define("taoDevTools/controller/ControllerMap/index",function(){}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("jquery"),require("lodash")):"function"==typeof define&&define.amd?define("core/pluginifier",["jquery","lodash"],factory):(global=global||self)["core/pluginifier"]=factory(global.$,global._)}(this,function($,_){"use strict";$=$&&$.hasOwnProperty("default")?$.default:$,_=_&&_.hasOwnProperty("default")?_.default:_;var basePlugin={options:function(dataNs,ns,options){return this.each(function(){var $elt=$(this),currentOptions=$elt.data(dataNs);currentOptions&&$elt.data(dataNs,_.merge(
currentOptions,options))})},disable:function(dataNs,ns){return this.each(function(){var $elt=$(this),options=$elt.data(dataNs);options&&$elt.addClass(options.disableClass||"disabled").trigger("disable."+ns)})},enable:function(dataNs,ns){return this.each(function(){var $elt=$(this),options=$elt.data(dataNs);options&&$elt.removeClass(options.disableClass||"disabled").trigger("enable."+ns)})}};return{register:function(pluginName,plugin,config){var ns=(config=config||{}).ns||pluginName.toLowerCase(),dataNs=config.dataNs||"ui."+ns,expose=config.expose||[];return _.isFunction($.fn[pluginName])?$.error("A plugin named "+pluginName+" is already registered"
):_.isPlainObject(plugin)&&_.isFunction(plugin.init)?(_.assign(plugin,_.transform(basePlugin,function(result,prop,key){_.isFunction(prop)&&(result[key]=_.partial(basePlugin[key],dataNs,ns))})),_.forEach(expose,function(toExposeName){var privateMethod=toExposeName,publicMethod=toExposeName;/^_/.test(expose)?publicMethod=publicMethod.replace(/^_/,""):privateMethod="_"+privateMethod,_.isFunction(plugin[privateMethod])&&!_.isFunction(plugin[publicMethod])&&(plugin[publicMethod]=function(){var returnValue,args=Array.prototype.slice.call(arguments,0);return this.each(function(){returnValue=plugin[privateMethod].apply(plugin,[$(this)].concat(args))}),
returnValue||this})}),void($.fn[pluginName]=function(method){if(plugin[method]){if(!/^_/.test(method))return plugin[method].apply(this,Array.prototype.slice.call(arguments,1));$.error("Trying to call a private method `"+method+"`")}else if("object"==typeof method||!method)return plugin.init.apply(this,arguments);$.error("Method "+method+" does not exist on plugin")})):$.error("The object to register as a jQuery plugin must be a plain object with an `init` method.")}}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("jquery"),require("lodash")):"function"==typeof define&&define.amd?define(
"core/dataattrhandler",["jquery","lodash"],factory):(global=global||self)["core/dataattrhandler"]=factory(global.$,global._)}(this,function($,_){"use strict";$=$&&$.hasOwnProperty("default")?$.default:$,_=_&&_.hasOwnProperty("default")?_.default:_;var defaults={container:!1,listenerEvent:"click",useTarget:!0,bubbled:!1},letDefaultOn=[":radio",":checkbox"],shouldPreventDefault=function($elt){return!$elt.is(letDefaultOn.join(","))},DataAttrHandler=function(attrName,options){var self=this;this.options=_.defaults(options,defaults);var selector="[data-"+attrName+"]";if(!_.has(this.options,"namespace")||!_.isString(this.options.namespace))return $.error(
"The plugin data namespace option is required");this.options.container&&this.options.container.selector&&(selector=this.options.container.selector+" "+selector),this.options.inner&&(selector+=" "+this.options.inner),$(document).off(this.options.listenerEvent,selector).on(this.options.listenerEvent,selector,function(e){var $target,$outer,$elt=$(e.target);!0!==self.options.bubbled&&!$elt.is(selector)||(void 0===$elt.data(attrName)&&(self.options.inner||self.options.bubbled)&&($elt=($outer=$elt).parents("[data-"+attrName+"]")),$target=!0===self.options.useTarget?DataAttrHandler.getTarget(attrName,$elt):self.options.inner?$outer:void 0,$elt.data(
self.options.namespace)||("function"==typeof self.createPlugin&&self.createPlugin($elt,$target),$elt.is(":radio")&&$elt.attr("name")&&$(':radio[name="'+$elt.attr("name")+'"]').not($elt).on(self.options.listenerEvent,function(e){"function"==typeof self.callPluginMethod&&self.callPluginMethod($elt,$target),shouldPreventDefault($elt)&&e.preventDefault()})),"function"==typeof self.callPluginMethod&&self.callPluginMethod($elt,$target),shouldPreventDefault($elt)&&e.preventDefault())})};return DataAttrHandler.prototype.init=function(cb){return this.createPlugin=cb,this},DataAttrHandler.prototype.trigger=function(cb){return this.callPluginMethod=cb,this},
DataAttrHandler.getTarget=function(attrName,$elt){var relativeRegex=/^(\+|>|~|:parent|<)/,$target=[],targetSelector=$elt.attr("data-"+attrName)||$elt.attr("href")||$elt.attr("attrName");if(!_.isEmpty(targetSelector)){var matches=relativeRegex.exec(targetSelector);if(null!==matches){var selector=targetSelector.replace(relativeRegex,"");$target=":parent"===matches[0]||"<"===matches[0]?$elt.parents(selector):"~"===matches[0]?$elt.siblings(selector):"+"===matches[0]?$elt.next(selector):$(selector,$elt)}else $target=$(targetSelector)}return $target},DataAttrHandler}),define("ui/toggler",["jquery","core/pluginifier","core/dataattrhandler"],function($,Pluginifier,
DataAttrHandler){"use strict";$=$&&$.hasOwnProperty("default")?$.default:$,Pluginifier=Pluginifier&&Pluginifier.hasOwnProperty("default")?Pluginifier.default:Pluginifier,DataAttrHandler=DataAttrHandler&&DataAttrHandler.hasOwnProperty("default")?DataAttrHandler.default:DataAttrHandler;var ns="toggler",dataNs="ui."+ns,defaults={disableClass:"disabled",bindEvent:"click",openedClass:"opened",closedClass:"closed"},Toggler={init:function(options){return options=$.extend(!0,{},defaults,options),this.each(function(){var $elt=$(this),$target=options.target,openedClass=options.openedClass,closedClass=options.closedClass;$elt.data(dataNs)||(options.hideText&&(
options.showText=$elt.text()),$elt.data(dataNs,options),$elt.hasClass(closedClass)||$elt.hasClass(openedClass)||$elt.addClass("none"===$target.css("display")?closedClass:openedClass),$target.on("toggle."+ns,function(e,$toggler){e.stopPropagation(),$toggler.is($elt)||("none"===$target.css("display")?$elt.addClass(closedClass).removeClass(openedClass):$elt.removeClass(closedClass).addClass(openedClass))}),!1!==options.bindEvent&&$elt.on(options.bindEvent,function(e){e.preventDefault(),Toggler._toggle($(this))}),$elt.trigger("create."+ns))})},_toggle:function($elt){var action,options=$elt.data(dataNs),$target=options.target,triggerEvents=function(){
$elt.trigger("toggle."+ns,[$target]).trigger(action+"."+ns,[$target]),$target.trigger("toggle."+ns,[$elt])};$elt.is(":radio,:checkbox")?action=$elt.prop("checked")?"open":"close":(action=$elt.hasClass(options.closedClass)?"open":"close",$elt.toggleClass(options.closedClass).toggleClass(options.openedClass)),"open"===action?($target.fadeIn(200,triggerEvents),options.hideText&&$elt.text(options.hideText)):($target.fadeOut(300,triggerEvents),options.showText&&$elt.text(options.showText))},destroy:function(){this.each(function(){var $elt=$(this),options=$elt.data(dataNs);!1!==options.bindEvent&&$elt.off(options.bindEvent),$elt.trigger("destroy."+ns)})}}
;return Pluginifier.register(ns,Toggler,{expose:["toggle"]}),function($container){new DataAttrHandler("toggle",{container:$container,listenerEvent:"click",bubbled:!0,namespace:dataNs}).init(function($elt,$target){var opts={target:$target,bindEvent:!1};$elt.data("hide-text")&&(opts.hideText=$elt.data("hide-text")),$elt.toggler(opts)}).trigger(function($elt){$elt.toggler("toggle")})}}),define("ui/disabler",["jquery","core/pluginifier","core/dataattrhandler"],function($,Pluginifier,DataAttrHandler){"use strict";$=$&&$.hasOwnProperty("default")?$.default:$,Pluginifier=Pluginifier&&Pluginifier.hasOwnProperty("default")?Pluginifier.default:Pluginifier,
DataAttrHandler=DataAttrHandler&&DataAttrHandler.hasOwnProperty("default")?DataAttrHandler.default:DataAttrHandler;var ns="disabler",dataNs="ui."+ns,defaults={bindEvent:"click",disabledClass:"disabled"},Disabler={init:function(options){return options=$.extend(!0,{},defaults,options),this.each(function(){var $elt=$(this);$elt.data(dataNs)||($elt.data(dataNs,options),!1!==options.bindEvent&&$elt.on(options.bindEvent,function(e){Disabler._toogle($elt),e.preventDefault()}),$elt.trigger("create."+ns))})},enable:function(){this.each(function(){Disabler._enable($(this))})},_enable:function($elt){var options=$elt.data(dataNs),$target=options.target
;$target.removeClass(options.disabledClass).find(":input").prop("disabled",!1),$elt.trigger("enable."+ns,[$target]),$target.find(":input").addBack().trigger("enable")},disable:function(){this.each(function(){Disabler._disable($(this))})},_disable:function($elt){var options=$elt.data(dataNs),$target=options.target;$target.addClass(options.disabledClass).find(":input").prop("disabled",!0),$elt.trigger("disable."+ns,[$target]),$target.find(":input").addBack().trigger("disable")},toggle:function(){this.each(function(){Disabler._toggle($(this))})},_toggle:function($elt){var options=$elt.data(dataNs);$elt.is(":radio,:checkbox")?$elt.prop("checked")?this._disable(
$elt):this._enable($elt):options.target.hasClass(options.disabledClass)?this._enable($elt):this._disable($elt)},destroy:function(){this.each(function(){var $elt=$(this),options=$elt.data(dataNs);!1!==options.bindEvent&&$elt.off(options.bindEvent),$elt.trigger("destroy."+ns)})}};return Pluginifier.register(ns,Disabler),function($container){new DataAttrHandler("disable",{container:$container,listenerEvent:"click",namespace:dataNs}).init(function($elt,$target){$elt.disabler({target:$target,bindEvent:!1})}).trigger(function($elt){$elt.disabler("toggle")})}}),define("ui/adder",["jquery","lodash","handlebars","core/pluginifier","core/dataattrhandler"],function($,_
,Handlebars,Pluginifier,DataAttrHandler){"use strict";$=$&&$.hasOwnProperty("default")?$.default:$,_=_&&_.hasOwnProperty("default")?_.default:_,Handlebars=Handlebars&&Handlebars.hasOwnProperty("default")?Handlebars.default:Handlebars,Pluginifier=Pluginifier&&Pluginifier.hasOwnProperty("default")?Pluginifier.default:Pluginifier,DataAttrHandler=DataAttrHandler&&DataAttrHandler.hasOwnProperty("default")?DataAttrHandler.default:DataAttrHandler;var ns="adder",dataNs="ui."+ns,positions=["append","prepend"],defaults={bindEvent:"click",disableClass:"disabled",position:"append",templateData:function(dataCallback){dataCallback({})}},Adder={init:function(options){if(
"function"==typeof(options=_.defaults(options||{},defaults)).content)options._template=options.content;else{var $content=options.content;"SCRIPT"===$content.prop("tagName")&&"text/template"===$content.attr("type")?options._template=Handlebars.compile($content.html()):options._html=$content.html()}return _.contains(positions,options.position)?this.each(function(){var $elt=$(this);$elt.data(dataNs)||($elt.data(dataNs,options),!1!==options.bindEvent&&$elt.on(options.bindEvent,function(e){e.preventDefault(),Adder._add($elt)}),$elt.trigger("create."+ns))}):$.error("Unsupported position option")},_add:function($elt){var options=$elt.data(dataNs),
$target=options.target,position=options.position+"To",applyTemplate=function($content,position,$target,data){$content[position]($target),$target.trigger("add",[$content,data]),$elt.trigger("add."+ns,[$target,$content,data])};"function"==typeof options._template?options.templateData(function(data){applyTemplate($($.parseHTML(options._template(data))),position,$target,data)}):applyTemplate($($.parseHTML(options._html)),position,$target)},destroy:function(){this.each(function(){var $elt=$(this),options=$elt.data(dataNs);!1!==options.bindEvent&&$elt.off(options.bindEvent),$elt.removeData(dataNs),$elt.trigger("destroy."+ns)})}};return Pluginifier.register(ns,
Adder,{expose:["add"]}),function($container){new DataAttrHandler("add",{container:$container,listenerEvent:"click",namespace:dataNs}).init(function($elt,$target){$elt.adder({target:$target,bindEvent:!1,content:$($elt.attr("data-content"))})}).trigger(function($elt){$elt.adder("add")})}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash")):"function"==typeof define&&define.amd?define("core/format",["lodash"],factory):(global=global||self)["core/format"]=factory(global._)}(this,function(_){"use strict";_=_&&_.hasOwnProperty("default")?_.default:_;var pattern=/(%[sdj])/g;return function(message
){var replacements=Array.prototype.slice.call(arguments,1);return _.reduce(message.match(pattern),function(acc,match,index){var replacement="";if(void 0!==replacements[index]){switch(match){case"%d":replacement=Number(replacements[index]);break;case"%j":try{replacement=JSON.stringify(replacements[index]).replace(/"/g,"")}catch(e){}break;default:replacement=replacements[index]}message=message.replace(match,replacement)}return message},message)}}),define("ui/deleter",["jquery","lodash","i18n","core/pluginifier","core/dataattrhandler","handlebars","lib/dompurify/purify"],function($$1,_,__,Pluginifier,DataAttrHandler,Handlebars,DOMPurify){"use strict"
;function Helpers0(hb){hb.registerHelper("__",function(key){return __(key)}),hb.registerHelper("dompurify",function(context){return DOMPurify.sanitize(context)}),hb.registerHelper("join",function(arr,keyValueGlue,fragmentGlue,wrapper){var fragments=[];return keyValueGlue="string"==typeof keyValueGlue?keyValueGlue:void 0,fragmentGlue="string"==typeof fragmentGlue?fragmentGlue:" ",wrapper="string"==typeof wrapper?wrapper:'"',_.forIn(arr,function(value,key){var fragment="";null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"==typeof value&&(value=_.values(value).join(" ")):value="",void 0!==keyValueGlue&&(
fragment+=key+keyValueGlue),fragment+=wrapper+value+wrapper,fragments.push(fragment)}),fragments.join(fragmentGlue)}),hb.registerHelper("for",function(startIndex,stopIndex,increment,options){var ret="";startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),increment=parseInt(increment);for(var i=startIndex;i<stopIndex;i+=increment)ret+=options.fn(_.extend({},this,{i:i}));return ret}),hb.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),hb.registerHelper("property",function(name,context){return context[name]||""}),hb.registerHelper("includes",function(haystack,needle,options){if(_.contains(
haystack,needle))return options.fn(this)})}$$1=$$1&&$$1.hasOwnProperty("default")?$$1.default:$$1,_=_&&_.hasOwnProperty("default")?_.default:_,__=__&&__.hasOwnProperty("default")?__.default:__,Pluginifier=Pluginifier&&Pluginifier.hasOwnProperty("default")?Pluginifier.default:Pluginifier,DataAttrHandler=DataAttrHandler&&DataAttrHandler.hasOwnProperty("default")?DataAttrHandler.default:DataAttrHandler,Handlebars=Handlebars&&Handlebars.hasOwnProperty("default")?Handlebars.default:Handlebars,DOMPurify=DOMPurify&&DOMPurify.hasOwnProperty("default")?DOMPurify.default:DOMPurify,Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0)
;var Template=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,options,buffer="",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+='<div class="undobox feedback-info">\n    <span class="icon-info"></span>\n        ',buffer+=escapeExpression((helper=helpers.undoMessage)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.undoMessage)?helper.call(depth0,{hash:{},data:data}):helper)+'\n        <a class="undo" href="#">'+escapeExpression((options={hash:{},data:data},(
helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Undo",options):helperMissing.call(depth0,"__","Undo",options)))+'</a>\n    <span title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Remove Message",options):helperMissing.call(depth0,"__","Remove Message",options)))+'" class="icon-close" data-close=":parent .undobox"></span>\n</div>\n'});var ns="deleter",dataNs="ui."+ns,defaults={bindEvent:"click",undo:!1,undoTimeout:5e3,undoMessage:__("Element deleted."),undoContainer:!1,confirm:!1,confirmMessage:__("Are you sure you want to delete it?"),disableClass:"disabled"},deleter={init:function(
options){return options=_.defaults(options,defaults),this.each(function(){var $elt=$$1(this);$elt.data(dataNs)||($elt.data(dataNs,options),!1!==options.bindEvent&&$elt.on(options.bindEvent,function(e){e.preventDefault(),deleter._delete($elt)}),$elt.trigger("create."+ns))})},_delete:function($elt){var $target,$parent,$evtTrigger,$placeholder,$undoBox,undoRemove,timeout,self=deleter,performDelete=!0,options=$elt.data(dataNs),realRemove=function(){performDelete&&$target&&($target.remove(),$evtTrigger.trigger("deleted."+ns))};options&&!$elt.hasClass(options.disableClass)&&($target=options.target,!0===options.confirm&&(performDelete=window.confirm(
options.confirmMessage)),performDelete&&($parent=$target.parent(),$evtTrigger=0<$target.has($elt).length?$parent:$elt,$elt.trigger("delete."+ns,[$target]),$target.trigger("delete",[options.undo]),$placeholder=$$1('<span style="display:none;" />').insertAfter($target),$target.detach(),options.undo?($$1(document).off(".unundo."+ns),($undoBox=self._createUndoBox(options)).find(".undo").click(function(e){e.preventDefault(),"number"==typeof timeout&&clearTimeout(timeout),performDelete=!1,$undoBox.remove(),$target.insertBefore($placeholder),$placeholder.remove(),$elt.trigger("undo."+ns,[$target]),$target.trigger("undo."+ns)}),undoRemove=function(){
$undoBox&&$undoBox.length&&($undoBox.remove(),$placeholder.remove()),realRemove(),$$1(document).off(".unundo."+ns)},$$1(document).one("mousedown.unundo."+ns,function(e){return e.preventDefault(),e.stopImmediatePropagation(),0!==$undoBox.find(e.target).length&&$$1(e.target).hasClass("undo")||"number"!=typeof timeout||(clearTimeout(timeout),undoRemove()),_.delay(function(){$$1(e.target).trigger("mousedown")},10),!1}),timeout=setTimeout(function(){undoRemove()},options.undoTimeout)):realRemove()))},_createUndoBox:function(options){var $undoContainer=options.undoContainer||$$1("#feedback-messages-main");return $undoContainer.length||($undoContainer=$$1(
'<div id="feedback-messages-main" class="tao-scope"></div>').appendTo("body")),$$1(function(data,options){var html=Template(data,options);return html}(options)).appendTo($undoContainer)},destroy:function(){this.each(function(){var $elt=$$1(this),options=$elt.data(dataNs);!1!==options.bindEvent&&$elt.off(options.bindEvent),$elt.removeData(dataNs),$elt.trigger("destroy."+ns)})}};return Pluginifier.register(ns,deleter,{expose:["delete"]}),function($container){new DataAttrHandler("delete",{container:$container,listenerEvent:"click",namespace:dataNs,bubbled:!0}).init(function($elt,$target){var options={target:$target,bindEvent:!1,undo:!0},confirm=$elt.data(
"delete-confirm"),undo=$elt.data("delete-undo");confirm&&(options.confirm=!0,options.undo=!1,0<confirm.length&&(options.confirmMessage=confirm)),null!=undo&&(!1===undo?options.undo=!1:(options.confirm=!1,options.undo=!0,0<undo.length&&(options.undoMessage=undo))),$elt.deleter(options)}).trigger(function($elt){$elt.deleter("delete")})}}),define("ui/incrementer",["jquery","lodash","core/pluginifier","lib/gamp/gamp"],function($,_,Pluginifier,gamp){"use strict";$=$&&$.hasOwnProperty("default")?$.default:$,_=_&&_.hasOwnProperty("default")?_.default:_,Pluginifier=Pluginifier&&Pluginifier.hasOwnProperty("default")?Pluginifier.default:Pluginifier,
gamp=gamp&&gamp.hasOwnProperty("default")?gamp.default:gamp;var ns="incrementer",dataNs="ui."+ns,defaults={disableClass:"disabled",step:1,min:null,max:null,zero:!1,incrementerClass:"incrementer",incrementerCtrlClass:"incrementer-ctrl",incrementerWrapperClass:"incrementer-ctrl-wrapper",decimal:0},Incrementer={init:function(options){var self=Incrementer;return options=_.defaults(options||{},defaults),this.each(function(){var $ctrl,currentValue,$elt=$(this),wrapper=$("<span>",{class:options.incrementerWrapperClass});$elt.data(dataNs)||($elt.is('input[type="text"]')?(currentValue=parseFloat($elt.val()).toFixed(options.decimal),$elt.wrap(wrapper),$elt.data(dataNs
,options).addClass(options.incrementerClass).after('<span class="ctrl '+options.incrementerCtrlClass+'"><a href="#" class="inc" title="+'+options.step+'" tabindex="-1"></a><a href="#" class="dec" title="-'+options.step+'" tabindex="-1"></a></span>').on("keydown",function(e){38===e.which?(self._inc($elt),this.select()):40===e.which&&(self._dec($elt),this.select())}).on("keyup",_.debounce(function(){var value=$elt.val(),negative="-"===value.charAt(0),options=$elt.data(dataNs);value=parseFloat(value.replace(/[^\d\.]/g,"")),isNaN(value)?$elt.val(""):(value=negative?-value:value,null===options.min||_.isNumber(options.min
)&&value>=options.min||!0===options.zero&&0===value?$elt.val(value):($elt.val(options.min),value=options.min),null===options.max||_.isNumber(options.max)&&value<=options.max?$elt.val(value):$elt.val(options.max)),$elt.trigger("change")},600)).on("focus",function(){this.select()}).on("disable.incrementer",function(){$elt.prop("disabled",!0).addClass("disabled"),$ctrl.find(".inc,.dec").prop("disabled",!0).addClass("disabled")}).on("enable.incrementer",function(){$elt.prop("disabled",!1).removeClass("disabled"),$ctrl.find(".inc,.dec").removeProp("disabled").removeClass("disabled")}),(_.isNaN(currentValue
)||null!==options.min&&currentValue<options.min||null!==options.max&&currentValue>options.max)&&$elt.val(options.min||0),($ctrl=$elt.next("."+options.incrementerCtrlClass)).find(".inc").click(function(e){e.preventDefault(),$(this).prop("disabled")||self._inc($elt)}),$ctrl.find(".dec").click(function(e){e.preventDefault(),$(this).prop("disabled")||self._dec($elt)}),$elt.trigger("create."+ns)):$.error("The incrementer plugin applies only on input element of the type text"))})},_toFixedDown:function(number,precision){var m=Math.pow(10,precision||0);return Math.floor(number*m)/m},_decimalPlaces:function(number){var match=(""+number).match(
/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return match?Math.max(0,(match[1]?match[1].length:0)-(match[2]?+match[2]:0)):0},_inc:function($elt){var value,options=$elt.data(dataNs),current=parseFloat($elt.val()||0);value=gamp.add(current,options.step),_.isNumber(options.min)&&value<options.min&&(value=options.min),(null===options.max||_.isNumber(options.max)&&value<=options.max)&&($elt.val(value),$elt.trigger("increment."+ns,[value]).trigger("change"))},_dec:function($elt){var value,options=$elt.data(dataNs),current=parseFloat($elt.val()||0);value=gamp.sub(current,options.step),!0===options.zero&&_.isNumber(options.min)&&value<options.min&&(value=0),(
null===options.min||_.isNumber(options.min)&&value>=options.min||!0===options.zero&&0===value)&&($elt.val(value),$elt.trigger("decrement."+ns,[value]).trigger("change"))},destroy:function(){this.each(function(){var $elt=$(this),options=$elt.data(dataNs);$elt.off("keyup keydown").siblings("."+options.incrementerCtrlClass).remove(),$elt.trigger("destroy."+ns)})}};return Pluginifier.register(ns,Incrementer),function($container){$container.find("[data-increment]").each(function(){var min,max,$elt=$(this),decimal=Incrementer._decimalPlaces($elt.attr("data-increment")),step=parseFloat($elt.attr("data-increment")),zero=!!$elt.data("zero"),options={}
;options.zero=zero,_.isNaN(step)||(options.step=step),_.isNaN(decimal)||(options.decimal=decimal),$elt.attr("data-min")&&(min=parseFloat($elt.attr("data-min")),_.isNaN(min)||(options.min=min)),$elt.attr("data-max")&&(max=parseFloat($elt.attr("data-max")),_.isNaN(max)||(options.max=max)),$elt.incrementer(options)})}}),define("ui/inplacer",["jquery","lodash","core/pluginifier","core/dataattrhandler"],function($,_,Pluginifier,DataAttrHandler){"use strict";$=$&&$.hasOwnProperty("default")?$.default:$,_=_&&_.hasOwnProperty("default")?_.default:_,Pluginifier=Pluginifier&&Pluginifier.hasOwnProperty("default")?Pluginifier.default:Pluginifier,
DataAttrHandler=DataAttrHandler&&DataAttrHandler.hasOwnProperty("default")?DataAttrHandler.default:DataAttrHandler;var ns="inplacer",dataNs="ui."+ns,defaults={disableClass:"disabled",bindEvent:"click",inplaceClass:"inplace",mapping:{textarea:["p","div"]}};function getText($elt){var text="";return $elt.contents().filter(function(){this.nodeType===Node.TEXT_NODE&&""!==$.trim(this.nodeValue)&&(text+=$.trim(this.nodeValue))}),text}var InPlacer={init:function(options){return options=$.extend(!0,{},defaults,options),this.each(function(){var $elt=$(this);if(!$elt.data(dataNs)){var $target=options.target;/^#/.test($target.selector)||$.error(
"The target selector must referr to the of an element id or to the element to create."),0===$target.length?($elt.after("<input id='"+$target.selector.replace("#","")+"' type='hidden' />"),options.target=$($target.selector)):"INPUT"!==$target.prop("tagName")&&$.error("The target must be an input element."),$elt.data(dataNs,options),$elt.addClass(options.inplaceClass),InPlacer._sync($elt,$target),!1!==options.bindEvent&&$elt.on(options.bindEvent,function(e){0===$elt.children(":text").length&&(e.preventDefault(),InPlacer._edit($elt))}),$elt.trigger("create."+ns)}})},_toggle:function($elt){0<$elt.children(":text").length?this._leave($elt):this._edit($elt)},
_edit:function($elt){var $editor,self=this,options=$elt.data(dataNs),$target=options.target,text=getText($elt),width=options.width||$elt.width()+"px";if(function($elt){$elt.contents().filter(function(){this.nodeType===Node.TEXT_NODE&&(this.nodeValue="")})}($elt),_.contains(options.mapping.textarea,$elt.prop("tagName").toLowerCase())){var height=options.height||$elt.height()+"px";$editor=$elt.append("<textarea>"+text+"</textarea>").children(":input").width(width).height(height)}else $editor=$elt.prepend($("<input>",{type:"text"})).children(":input").width(width).focus().val(text);$editor.off("click").change(function(e){e.stopPropagation()}).keyup(function(e){
13===e.which&&self._leave($elt)}).blur(function(){self._leave($elt)}).focus(),self._sync($elt,$target),$elt.trigger("edit."+ns,[$target.val()])},_leave:function($elt){var $target=$elt.data(dataNs).target,$input=$elt.children(":input"),content=$input.val();$input.remove(),function($elt,text){var set=!1;$elt.contents().filter(function(){if(this.nodeType===Node.TEXT_NODE&&!1===set)return set=!0,void(this.nodeValue=text)}),!1===set&&$elt.prepend(text)}($elt,content),this._sync($elt,$target),$elt.trigger("leave."+ns,[$target.val()]),$elt.trigger("change")},_sync:function($elt,$target){0<$elt.children(":text").length?$target.val($elt.children(":text").val()
):$target.val(getText($elt))},destroy:function(){this.each(function(){var $elt=$(this),options=$elt.data(dataNs);$elt.removeClass(options.inplaceClass),!1!==options.bindEvent&&$elt.off(options.bindEvent),$elt.removeData(dataNs),$elt.trigger("destroy."+ns)})}};return Pluginifier.register(ns,InPlacer,{expose:["toggle","leave","edit"]}),function($container){new DataAttrHandler("in-place",{container:$container,listenerEvent:"click",namespace:dataNs}).init(function($elt,$target){var options={target:$target,bindEvent:!1};$elt.data("width")&&(options.width=$elt.data("width")),$elt.inplacer(options)}).trigger(function($elt){$elt.inplacer("toggle")})}}),define(
"ui/btngrouper",["jquery","lodash","core/pluginifier","core/dataattrhandler"],function($,_,Pluginifier,DataAttrHandler){"use strict";$=$&&$.hasOwnProperty("default")?$.default:$,_=_&&_.hasOwnProperty("default")?_.default:_,Pluginifier=Pluginifier&&Pluginifier.hasOwnProperty("default")?Pluginifier.default:Pluginifier,DataAttrHandler=DataAttrHandler&&DataAttrHandler.hasOwnProperty("default")?DataAttrHandler.default:DataAttrHandler;var ns="btngrouper",dataNs="ui."+ns,defaults={bindEvent:"click",activeClass:"active",disableClass:"disabled",innerElt:"li",action:"toggle"},availableActions=["toggle","switch"],BtnGrouper={init:function(options){
return options=_.defaults(options||{},defaults),_.contains(availableActions,options.action)?this.each(function(){var $elt=$(this);if(!$elt.data(dataNs)){if($elt.data(dataNs,options),"toggle"===options.action){var $activeElt=$elt.find(options.innerElt+"."+options.activeClass);0===$activeElt.length?$elt.find(options.innerElt+":first").addClass(options.activeClass):1<$activeElt.length&&$elt.find(options.innerElt+"."+options.activeClass).not(":first").removeClass(options.activeClass)}!1!==options.bindEvent&&$elt.on(options.bindEvent,options.innerElt,function(e){e.preventDefault();var action="_"+options.action
;"function"==typeof BtnGrouper[action]&&BtnGrouper[action]($elt,$(this))}),$elt.trigger("create."+ns)}}):$.error("Action "+options.action+" not supported")},_toggle:function($elt){var options=$elt.data(dataNs);$elt.find(options.innerElt).toggleClass(options.activeClass),$elt.trigger("toggle."+ns).trigger("change")},_switch:function($elt,$target){var options=$elt.data(dataNs);$target.toggleClass(options.activeClass),$elt.trigger("switch."+ns).trigger("change")},value:function(){var value=[];return this.each(function(){var $elt=$(this),options=$elt.data(dataNs),eltValue=$elt.find(options.innerElt).filter("."+options.activeClass).text();$.isArray(eltValue
)||value.push(eltValue)}),1===value.length?value[0]:value},destroy:function(){this.each(function(){var $elt=$(this),options=$elt.data(dataNs);!1!==options.bindEvent&&$elt.off(options.bindEvent,options.innerElt),$elt.removeData(dataNs),$elt.trigger("destroy."+ns)})}};return Pluginifier.register(ns,BtnGrouper,{expose:["toggle","switch"]}),function($container){new DataAttrHandler("button-group",{container:$container,inner:"li",bubbled:!0,listenerEvent:"click",namespace:dataNs,useTarget:!1}).init(function($elt,$target){$elt.on("create."+ns,function(e){e.namespace===ns&&$elt.btngrouper($elt.data("button-group"),$target)}),$elt.btngrouper({action:$elt.data(
"button-group")})})}}),define("ui/durationer",["jquery","lodash","i18n","core/pluginifier","handlebars","moment","ui/incrementer"],function($,_,__,Pluginifier,Handlebars,moment,incrementer){"use strict";$=$&&$.hasOwnProperty("default")?$.default:$,_=_&&_.hasOwnProperty("default")?_.default:_,__=__&&__.hasOwnProperty("default")?__.default:__,Pluginifier=Pluginifier&&Pluginifier.hasOwnProperty("default")?Pluginifier.default:Pluginifier,Handlebars=Handlebars&&Handlebars.hasOwnProperty("default")?Handlebars.default:Handlebars,moment=moment&&moment.hasOwnProperty("default")?moment.default:moment;var ns="durationer",dataNs="ui."+ns,defaults={format:"HH:mm:ss",
separator:":",wrapperClass:"duration-ctrl-wrapper",ctrlClass:"duration-ctrl",disableClass:"disabled",title:{hours:__("hours"),minutes:__("minutes"),seconds:__("seconds")}},fieldTmpl=Handlebars.compile("<input type='text' id='{{id}}-{{type}}' data-duration-type='{{type}}' class='{{ctrlClass}}' value='{{value}}' title='{{title}}' />"),Durationer={init:function(options){var self=Durationer;return options=_.defaults(options||{},defaults),this.each(function(){var $elt=$(this);if(!$elt.data(dataNs))if($elt.is('input[type="text"]')){options.id=$elt.attr("id")||$elt.attr("name")||"durationer-"+(new Date).getTime();var duration=moment($elt.val(),options.format)
;$elt.hide(),self._insertField($elt,options,duration.hours(),"hours"),self._insertField($elt,options,duration.minutes(),"minutes"),self._insertField($elt,options,duration.seconds(),"seconds"),options.separator&&$elt.siblings("."+options.wrapperClass+":not(:last)").after('<span class="separator">:</span>'),options.$ctrls=$elt.siblings("."+options.wrapperClass).children("input"),options.$ctrls.on("change",function(){self._syncToField($elt)}),$elt.on("change",function(e){e.namespace!==ns&&self._syncFromField($elt)}),$elt.data(dataNs,options),$elt.trigger("create."+ns)}else $.error("The durationer plugin applies only on input element of type text")})},
_insertField:function($elt,options,value,type){var data=_.defaults({type:type,value:value,title:options.title[type]},options);$(fieldTmpl(data)).insertBefore($elt).val(value).incrementer({min:0,max:"hours"===type?23:59,incrementerWrapperClass:options.wrapperClass})},_syncFromField:function($elt){var options=$elt.data(dataNs),current=moment($elt.val(),options.format);options.$ctrls.each(function(){var $field=$(this);current[$field.data("duration-type")]&&$field.val(current[$field.data("duration-type")]())})},_syncToField:function($elt){var options=$elt.data(dataNs),current=moment($elt.val(),options.format);options.$ctrls.each(function(){var $field=$(this)
;!isNaN($field.val())&&current[$field.data("duration-type")]&&current[$field.data("duration-type")]($field.val())}),$elt.val(current.format(options.format)),$elt.trigger("update."+ns).trigger("change")},destroy:function(){this.each(function(){var $elt=$(this),options=$elt.data(dataNs);$elt.siblings("."+options.wrapperClass).remove(),$elt.siblings(".separator").remove(),$elt.removeData(dataNs),$elt.trigger("destroy."+ns)})}};return Pluginifier.register(ns,Durationer),function($container){$container.find("[data-duration]").each(function(){var $elt=$(this),format=$elt.data("duration"),options=0<$.trim(format).length?{format:format}:{};$elt.durationer(options)})
}}),define("ui/selecter",["jquery","select2"],function($,select2){"use strict";return $=$&&$.hasOwnProperty("default")?$.default:$,function($container){$("select.select2",$container).each(function(){var $elt=$(this),hasSearch=!(!1===$elt.data("has-search")),hasPlaceholder=!(!$elt.attr("placeholder")&&!$elt.data("placeholder")),widthMethod=$elt.data("width")||"resolve",hasSelectedIndex=function(options){for(var i=options.length,selected=!1;i--;)if("string"==typeof options[i].getAttribute("selected")){selected=!0;break}return selected}(this.options),settings={width:widthMethod};hasPlaceholder&&this.options[0]&&this.options[0].text&&($elt.prepend("<option>"),
hasSelectedIndex||(this.selectedIndex=this.options[0])),hasSearch||(settings.minimumResultsForSearch=-1),$elt.select2(settings)})}}),define("ui/modal",["jquery","core/pluginifier","core/dataattrhandler"],function($,Pluginifier,DataAttrHandler){"use strict";$=$&&$.hasOwnProperty("default")?$.default:$,Pluginifier=Pluginifier&&Pluginifier.hasOwnProperty("default")?Pluginifier.default:Pluginifier,DataAttrHandler=DataAttrHandler&&DataAttrHandler.hasOwnProperty("default")?DataAttrHandler.default:DataAttrHandler;var dataNs="ui.modal",defaults={modalCloseClass:"modal-close",modalOverlayClass:"modal-bg",startClosed:!1,disableClosing:!1,width:"responsive",minWidth:0,
minHeight:0,vCenter:!0,$context:null,animate:400},modal={init:function(options){return(options=$.extend(!0,{},defaults,options)).animate&&("number"!=typeof options.animate?options.animate=defaults.animate:options.animate=Math.max(100,options.animate)),$(this).each(function(){var $modal=$(this);if(options.modalOverlay="__modal-bg-"+($modal.attr("id")||(new Date).getTime()),$modal.data(dataNs,options),0===$("#"+options.modalOverlay).length){var $overlay=$("<div/>").attr({id:options.modalOverlay,class:options.modalOverlayClass});options.$context instanceof $&&options.$context.length?($overlay.css("position","absolute"),options.$context.append($overlay)
):$modal.after($overlay)}0!==$("."+options.modalCloseClass,$modal).length||options.disableClosing||$('<button id="modal-close-btn" class="'+options.modalCloseClass+'"><span class="icon-close"></span></button>').appendTo($modal),options.startClosed||modal._open($modal),$modal.trigger("create.modal")})},_destroy:function($element){return $element.each(function(){var $modal=$(this),options=$modal.data(dataNs);$modal.removeData(dataNs),$("#"+options.modalOverlay).remove(),$modal.hide(),$element.trigger("destroyed.modal")})},_bindEvents:function($element){var options=$element.data(dataNs);options&&("responsive"===options.width&&$(window).on("resize.modal",
function(e){e.preventDefault(),modal._resize($element)}),options.disableClosing||($("."+options.modalCloseClass,$element).on("click.modal",function(e){e.preventDefault(),closeModal($element,"close")}),$("#"+options.modalOverlay).on("click.modal",function(e){e.preventDefault(),closeModal($element,"overlay")}),options.disableEscape||$(document).on("keydown.modal",function(e){27===e.keyCode&&(e.preventDefault(),closeModal($element,"escape"))})))},_unBindEvents:function($element){var options=$element.data(dataNs);options&&"responsive"===options.width&&$(window).off("resize.modal"),$element.off("click.modal"),options&&!options.disableClosing&&($(
"."+options.modalCloseClass,$element).off("click.modal"),$("#"+options.modalOverlay).off("click.modal"),$(document).off("keydown.modal"))},_open:function($element){var topOffset,onOpen,$overlay,to,modalHeight=$element.outerHeight(),windowHeight=$(window).height(),options=$element.data(dataNs);void 0!==options&&(onOpen=function(){$element.addClass("opened"),modal._bindEvents($element),$element.trigger("opened.modal")},topOffset=options.top?options.top:options.vCenter||windowHeight<modalHeight?40:(windowHeight-modalHeight)/2,options.top||$element.parent().hasClass("no-scroll-offset")||$element.parents().map(function(){
"BODY"!==this.tagName&&"HTML"!==this.tagName&&(topOffset+=parseInt($(this).scrollTop(),10))}),to={opacity:"1",top:topOffset+"px"},modal._resize($element),$overlay=$("#"+options.modalOverlay),$element.show(),options.animate&&$element.is(":visible")?($element.css({top:"-"+modalHeight+"px",display:"block"}),$overlay.fadeIn(options.animate-100),$element.animate(to,options.animate,onOpen)):($overlay.show(),$element.css(to),onOpen()))},_close:function($element){closeModal($element,"api")},_resize:function($element){var options=$element.data(dataNs),windowWidth=parseInt($(window).width(),10),css={},modalWidth="responsive"===options.width?.7*windowWidth:parseInt(
options.width,10);css.width=Math.max(modalWidth,options.minWidth),options.minHeight&&(css.minHeight=parseInt(options.minHeight)+"px"),$element.css(css)}};function closeModal($element,reason){function onClose(){$element.removeClass("opened"),$element.css("display","none"),$element.trigger("closed.modal",reason)}var options=$element.data(dataNs),$overlay=$("#"+options.modalOverlay);modal._unBindEvents($element),options.animate&&$element.is(":visible")?($overlay.fadeOut(options.animate-100),$element.animate({opacity:"0",top:"-1000px"},options.animate,onClose)):($overlay.hide(),$element.hide(),onClose())}return Pluginifier.register("modal",modal,{expose:["open",
"close","destroy"]}),function($container){new DataAttrHandler("modal",{container:$container,listenerEvent:"click",namespace:dataNs}).init(function($elt,$target){$target.modal()})}}),define("ui/tooltip",["jquery","lodash","core/dataattrhandler","lib/popper/tooltip","handlebars","i18n","lib/dompurify/purify"],function($$1,_,DataAttrHandler,Tooltip,Handlebars,__,DOMPurify){"use strict";function Helpers0(hb){hb.registerHelper("__",function(key){return __(key)}),hb.registerHelper("dompurify",function(context){return DOMPurify.sanitize(context)}),hb.registerHelper("join",function(arr,keyValueGlue,fragmentGlue,wrapper){var fragments=[]
;return keyValueGlue="string"==typeof keyValueGlue?keyValueGlue:void 0,fragmentGlue="string"==typeof fragmentGlue?fragmentGlue:" ",wrapper="string"==typeof wrapper?wrapper:'"',_.forIn(arr,function(value,key){var fragment="";null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"==typeof value&&(value=_.values(value).join(" ")):value="",void 0!==keyValueGlue&&(fragment+=key+keyValueGlue),fragment+=wrapper+value+wrapper,fragments.push(fragment)}),fragments.join(fragmentGlue)}),hb.registerHelper("for",function(startIndex,stopIndex,increment,options){var ret="";startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),
increment=parseInt(increment);for(var i=startIndex;i<stopIndex;i+=increment)ret+=options.fn(_.extend({},this,{i:i}));return ret}),hb.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),hb.registerHelper("property",function(name,context){return context[name]||""}),hb.registerHelper("includes",function(haystack,needle,options){if(_.contains(haystack,needle))return options.fn(this)})}$$1=$$1&&$$1.hasOwnProperty("default")?$$1.default:$$1,_=_&&_.hasOwnProperty("default")?_.default:_,DataAttrHandler=DataAttrHandler&&DataAttrHandler.hasOwnProperty("default")?DataAttrHandler.default:DataAttrHandler,
Tooltip=Tooltip&&Tooltip.hasOwnProperty("default")?Tooltip.default:Tooltip,Handlebars=Handlebars&&Handlebars.hasOwnProperty("default")?Handlebars.default:Handlebars,__=__&&__.hasOwnProperty("default")?__.default:__,DOMPurify=DOMPurify&&DOMPurify.hasOwnProperty("default")?DOMPurify.default:DOMPurify,Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,buffer="";return buffer+='<div class="tooltip ',buffer+=(0,this.escapeExpression)((helper=helpers.class
)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.class)?helper.call(depth0,{hash:{},data:data}):helper)+'" role="tooltip">\n    <div class="tooltip-arrow"></div>\n    <div class="tooltip-inner tooltip-body"></div>\n</div>'});function defaultTpl(data,options){var html=Template(data,options);return html}var themes=["dark","default","info","warning","error","success","danger"],themesMap={default:defaultTpl({class:"tooltip-plain"}),dark:defaultTpl({class:"tooltip-dark"}),error:defaultTpl({class:"tooltip-red"}),success:defaultTpl({class:"tooltip-green"}),info:defaultTpl({class:"tooltip-blue"}),warning:defaultTpl({
class:"tooltip-orange"}),danger:defaultTpl({class:"tooltip-danger"})},defaultOptions={template:themesMap.default,html:!0,trigger:"hover focus",popperOptions:{positionFixed:!0,placement:"auto",modifiers:{preventOverflow:{escapeWithReference:!1,enabled:!0,padding:6,boundariesElement:"viewport"}}}},checkHTMLInstance=function(el){return el instanceof Element||el instanceof HTMLDocument||el.jquery};return{lookup:function($container){var themeName;if(!$container||!checkHTMLInstance($container))throw new TypeError("Tooltip should be connected to DOM Element");$$1("[data-tooltip]",$container).each(function(){var opt,$content=DataAttrHandler.getTarget("tooltip",$$1(
this)),predefinedOptions=_.cloneDeep(defaultOptions);themeName=_.contains(themes,$$1(this).data("tooltip-theme"))?$$1(this).data("tooltip-theme"):"default",opt={template:themesMap[themeName]},opt=$content.length?_.merge(predefinedOptions,opt,{title:$content[0].cloneNode(!0)}):_.merge(predefinedOptions,opt),function(el,inst){$$1(el).data("$tooltip")&&($$1(el).data("$tooltip").dispose(),$$1(el).removeData("$tooltip")),$$1(el).data("$tooltip",inst)}(this,new Tooltip(this,opt))})},create:function(el,message,options){var calculatedOptions,themeName,template,predefinedOptions=_.cloneDeep(defaultOptions);if(calculatedOptions=options?_.merge(predefinedOptions,
options):predefinedOptions,themeName=_.contains(themes,calculatedOptions.theme)?calculatedOptions.theme:"default",template={template:themesMap[themeName]},!el&&!checkHTMLInstance(el))throw new TypeError("Tooltip should be connected to DOM Element");if(!message&&!checkHTMLInstance(el)&&"string"!=typeof message)throw new TypeError("Tooltip should have messsage to show");return new Tooltip(el,_.merge(calculatedOptions,template,{title:message}))},error:function(element,message,options){var theme={theme:"error"};return this.create(element,message,options?_.merge(theme,options):theme)},success:function(element,message,options){var theme={theme:"success"}
;return this.create(element,message,options?_.merge(theme,options):theme)},info:function(element,message,options){var theme={theme:"info"};return this.create(element,message,options?_.merge(theme,options):theme)},warning:function(element,message,options){var theme={theme:"warning"};return this.create(element,message,options?_.merge(theme,options):theme)},danger:function(element,message,options){var theme={theme:"danger"};return this.create(element,message,options?_.merge(theme,options):theme)}}}),define("ui/form",["jquery"],function($){"use strict";$=$&&$.hasOwnProperty("default")?$.default:$;return function($container){
var selector=$container.selector||".tao-scope";!function(selector){$(document).on("click",selector+" .pseudo-label-box",function(e){e.preventDefault();var $box=$(this),$radios=$box.find("input:radio").not("[disabled]").not(".disabled"),$checkboxes=$box.find("input:checkbox").not("[disabled]").not(".disabled");$radios.length&&($radios.not(":checked").prop("checked",!0),$radios.trigger("change")),$checkboxes.length&&($checkboxes.prop("checked",!$checkboxes.prop("checked")),$checkboxes.trigger("change"))})}(selector),function(selector){$(document).on("click",selector+" .disabled, "+selector+" :disabled",function(e){return e.preventDefault(),!1})}(selector)}}),
define("ui/validator/Report",[],function(){"use strict";function Report(type,data){this.type=type,this.data=data}return Report.prototype.isError=function(){return"failure"===this.type||"error"===this.type},Report}),define("ui/validator/validators",["jquery","lodash","i18n"],function($,_,__){"use strict";$=$&&$.hasOwnProperty("default")?$.default:$,_=_&&_.hasOwnProperty("default")?_.default:_;var validators={numeric:{name:"numeric",message:(__=__&&__.hasOwnProperty("default")?__.default:__)("must be numeric"),options:{},validate:function(value,callback){var parsedValue=parseFloat(value),r=parsedValue.toString()===value.toString()&&_.isNumber(parsedValue
)&&!_.isNaN(parsedValue);"function"==typeof callback&&callback.call(null,r)}},notEmpty:{name:"notEmpty",message:__("this is required"),options:{},validate:function(value,callback){var r;r=!!_.isNumber(value)||!_.isEmpty(value),"function"==typeof callback&&callback.call(null,r)}},pattern:{name:"pattern",message:__("does not match"),options:{pattern:"",modifier:"igm"},validate:function(value,callback,options){var regex=new RegExp(options.pattern,options.modifier||""),r=null!==value.match(regex);return"function"==typeof callback&&callback.call(null,r),r}},length:{name:"length",message:__("required length"),options:{min:0,max:0},validate:function(value,callback,
options){var r=!1;value.length>=options.min&&(r=!options.max||value.length<=options.max),"function"==typeof callback&&callback.call(null,r)}},fileExists:{name:"fileExists",message:__("no file not found in this location"),options:{baseUrl:""},validate:function(value,callback,options){value?new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])?)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(value)||/^data:[^\/]+\/[^;]+(;charset=[\w]+)?;base64,/.test(value)?callback(!0):$.ajax({type:"HEAD",url:options.baseUrl+encodeURIComponent(value),success:function(){callback(!0)},
error:function(jqXHR,textStatus,errorThrown){callback(!1)}}):callback(!1)}},validRegex:{name:"validRegex",message:__("invalid regular expression"),options:{},validate:function(value,callback){if("function"==typeof callback){var valid=!1;if(""!==value)try{new RegExp("^"+value+"$"),valid=!0}catch(e){valid=!1}else valid=!0;callback(valid)}}}};return{validators:validators,register:function(name,validator,force){if(_.isPlainObject(name)&&name.name&&!validator&&(name=(validator=name).name),!_.isString(name)||_.isEmpty(name))throw new Error("Please name your validator");if(!_.isObject(validator)||!_.isString(validator.message)||!_.isFunction(validator.validate)
)throw new Error("A validator must be an object with a message and a validate method, but given : "+JSON.stringify(validator));validators[name]&&!force||(validators[name]=validator)}}}),define("ui/validator/Validator",["lodash","async","ui/validator/Report","ui/validator/validators"],function(_,async,Report,validators){"use strict";_=_&&_.hasOwnProperty("default")?_.default:_,async=async&&async.hasOwnProperty("default")?async.default:async,Report=Report&&Report.hasOwnProperty("default")?Report.default:Report,validators=validators&&validators.hasOwnProperty("default")?validators.default:validators;function Validator(rules,options){this.options=_.merge(
_.cloneDeep(_defaultOptions),options),this.rules=[],this.addRules(rules)}var _defaultOptions={lazy:!1};return Validator.getDefaultOptions=function(){return _.clone(_defaultOptions)},Validator.prototype.validate=function(value,arg1,arg2){var callback,callstack=[],options=_.cloneDeep(this.options);return _.isFunction(arg1)?callback=arg1:_.isObject(arg1)&&(_.merge(options,arg1),_.isFunction(arg2)&&(callback=arg2)),_.each(this.rules,function(rule){var message,validatorOptions={};callstack.push(function(cb){!function(value,rule,callback,options){options=_.merge(_.cloneDeep(rule.options),options),rule.validate(value,callback,options)}(value,rule,function(success){
if(success)cb(null,new Report("success",{validator:rule.name}));else{message=rule.options.message||rule.message;var report=new Report("failure",{validator:rule.name,message:message});options.lazy?cb(new Error("lazy mode"),report):cb(null,report)}},validatorOptions)})}),async.series(callstack,function(err,results){_.isFunction(callback)&&callback(results)}),this},Validator.prototype.addRule=function(rule){var _rules=validators.validators;return _.isString(rule)&&_rules[rule]?this.rules.push(_rules[rule]):(rule=function(rule){var ret=null,_rules=validators.validators;return _.isString(rule)&&_rules[rule]?ret=_rules[rule]:_.isObject(rule)&&rule.name&&(
_rules[rule.name]?ret=_.merge(_.cloneDeep(_rules[rule.name]),rule):rule.message&&_.isFunction(rule.validate)&&(ret=rule)),ret}(rule))&&this.rules.push(rule),this},Validator.prototype.addRules=function(rules){var _this=this;return _.each(rules,function(rule){_this.addRule(rule)}),this},Validator}),define("ui/validator",["jquery","lodash","ui/validator/Report","ui/validator/Validator"],function($,_,Report,Validator){"use strict";function isCreated($elt){return"object"==typeof $elt.data("validator-config")}$=$&&$.hasOwnProperty("default")?$.default:$,_=_&&_.hasOwnProperty("default")?_.default:_,Report=Report&&Report.hasOwnProperty("default"
)?Report.default:Report,Validator=Validator&&Validator.hasOwnProperty("default")?Validator.default:Validator,$.fn.validator=function(options,arg1,arg2){var ret,opts={},method="",args=[];return"object"==typeof options?opts=$.extend({},$.fn.validator.defaults,options):void 0===options?opts=$.extend({},$.fn.validator.defaults):"string"==typeof options&&"function"==typeof methods[options]&&(method=options,args=Array.prototype.slice.call(arguments,1)),this.each(function(){var $this=$(this);isCreated($this)||create($this,opts),method&&(isCreated($this)?ret=methods[method].apply($(this),args):$.error("call of method of validator when it is not initialized"))}),
void 0===ret?this:ret},$.fn.validator.defaults={allowEmpty:!1,validator:{lazy:!1}};var methods={destroy:function(){destroy($(this))},validate:function(arg1,arg2){var callback,options={};_.isFunction(arg1)?callback=arg1:_.isObject(arg1)&&(_.merge(options,arg1),_.isFunction(arg2)&&(callback=arg2)),validate($(this),callback,options)},getValidator:function(){return $(this).data("validator-instance")}},tokenize=function(inputStr){var ret=[],tokens=inputStr.split(/;/);return _.each(tokens,function(token){token=$.trim(token);var key,options={},rightStr=token.replace(/\$(\w*)/,function($0,k){return key=k,""});if(key){var optionsStr=rightStr.replace(/^\((.*)\)$/,"$1"
);(optionsStr=optionsStr.replace(/(\w+)=((\"(\\.|[^\"])*\")|(\'(\\.|[^\'])*\')),?/g,function($0,optionName,optionValue){return optionValue=optionValue.replace(/^["'](.*)["']$/g,"$1"),options[optionName]=optionValue,""})).replace(/(\w*)=([^\s]*)(,)?/g,function($0,optionName,optionValue){","===optionValue.charAt(optionValue.length-1)&&(optionValue=optionValue.substring(0,optionValue.length-1)),options[optionName]=optionValue}),ret.push({name:key,options:options})}}),ret},create=function($elt,options){if(!isCreated($elt)){var rules=function($elt){var rulesStr=$elt.data("validate");return rulesStr?tokenize(rulesStr):{}}($elt);options.rules&&(rules=_.merge(rules,
options.rules),delete options.rules),options=_.merge(options,function($elt){var optionsStr=$elt.data("validate-option"),optionsArray=optionsStr?tokenize(optionsStr):{},availableCoreValidatorOptions=_.keys(Validator.getDefaultOptions()),options=_.clone($.fn.validator.defaults);return _.each(optionsArray,function(optionArray){0<=_.indexOf(availableCoreValidatorOptions,optionArray.name)?options.validator[optionArray.name]=optionArray.options:options[optionArray.name]=optionArray.options}),options}($elt)||{}),$elt.data("validator-config",_.clone(options)),createValidator($elt,rules,options)}},destroy=function($elts){$elts.removeData(
"validator-instance validator-config"),$elts.off(".validator")},createValidator=function($elt,rules,options){$elt.data("validator-instance",new Validator(rules,options.validator||{})),options.event&&bindEvents($elt,options)},bindEvents=function($elt,options){var events=_.isArray(options.event)?options.event:[options.event];0<events.length&&_.isFunction(options.validated)&&_.forEach(events,function(event){switch(_.isString(event)&&(event={type:event}),event.type){case"keyup":case"keydown":$elt.on(event.type,function(){var v=$elt.val();event.length?v&&v.length>event.length&&validate($elt,options.validated,{}):validate($elt,options.validated,{})});break
;case"change":case"blur":$elt.on(event.type,function(){validate($elt,options.validated,{})});break;default:$.error("unknown event type to be bound to validation : "+event.type)}})},validate=function($elt,callback,options){function execCallback(results){var valid;$elt.trigger("validated",{elt:$elt[0],results:results}),_.isFunction(callback)&&(valid=0===_.where(results,{type:"failure"}).length,callback.call($elt[0],valid,results))}var value=$elt.val();$elt.data("validator-config").allowEmpty&&""===value?execCallback([new Report("success",{validator:"allowEmpty"})]):$elt.data("validator-instance").validate(value,options||{},execCallback)}}),define(
"ui/groupvalidator",["jquery","lodash","ui/validator"],function($,_,validator){"use strict";$=$&&$.hasOwnProperty("default")?$.default:$,_=_&&_.hasOwnProperty("default")?_.default:_,$.fn.groupValidator=function(options){return options=_.defaults(options||{},$.fn.groupValidator.defaults),this.each(function(){function callback(valid,results){var $elt=$(this);states[$elt.attr("name")]=valid,options.callback.call(this,valid,results,options),$elt.trigger("validated.single",[valid]),$container.trigger("validated.group",[!1===_(states).values().contains(!1),this])}var $container=options.$container=$(this),states=[],$toValidate=$("[data-validate]",$container
).validator({event:options.events,validated:callback});options.validateOnInit&&$toValidate.validator("validate",{},callback)})},$.fn.groupValidator.defaults={validateOnInit:!1,errorClass:"error",errorMessageClass:"validate-error",events:["change","blur"],callback:function(valid,results,options){var rule,$elt=$(this);$elt.siblings("."+options.errorMessageClass).remove(),!1===valid?(rule=_.where(results,{type:"failure"})[0],$elt.addClass(options.errorClass),rule&&rule.data.message&&$elt.after("<span class='"+options.errorMessageClass+"'>"+rule.data.message+"</span>")):$elt.removeClass(options.errorClass)}}}),function(global,factory){
"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("util/bytes",factory):(global=global||self)["util/bytes"]=factory()}(this,function(){"use strict";return{hrSize:function(bytes){var unit=0;for(bytes=bytes||0;1024<=bytes;)bytes/=1024,unit++;return bytes.toFixed(2)+["B","kB","MB","GB","TB"][unit]}}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("context")):"function"==typeof define&&define.amd?define("util/url",["lodash","context"],factory):(global=global||self)["util/url"]=factory(global._,global.context)}(
this,function(_,context){"use strict";_=_&&_.hasOwnProperty("default")?_.default:_,context=context&&context.hasOwnProperty("default")?context.default:context;var parsers={absolute:/^(?:[a-z]+:)?\/\//i,base64:/^data:[^\/]+\/[^;]+(;charset=[\w]+)?;base64,/,query:/(?:^|&)([^&=]*)=?([^&]*)/g,url:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/};return{parse:function(url){var matches,keys=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","queryString","hash"],i=keys.length,parsed=Object.create({toString:function(
){return this.source}});if(parsed.base64=parsers.base64.test(url),parsed.base64)parsed.source=url;else{for(matches=parsers.url.exec(url);i--;)parsed[keys[i]]=matches[i]||"";parsed.query={},parsed.queryString.replace(parsers.query,function($0,$1,$2){$1&&(parsed.query[$1]=$2)})}return parsed},isAbsolute:function(url){return"object"==typeof url&&url.hasOwnProperty("source")?url.source!==url.relative:"string"==typeof url?parsers.absolute.test(url):void 0},isRelative:function(url){var absolute=this.isAbsolute(url);if("boolean"==typeof absolute)return!absolute},isBase64:function(url){return"object"==typeof url&&url.hasOwnProperty("source"
)?url.base64:"string"==typeof url?parsers.base64.test(url):void 0},encodeAsXmlAttr:function(uri){return/[<>&']+/.test(uri)?encodeURIComponent(uri):uri},build:function(path,params){var url,hasQueryString,queryString="";return path&&(_.isString(path)&&(url=path),_.isArray(path)&&(url="",_.forEach(path,function(chunk){/\/$/.test(url)&&/^\//.test(chunk)?url+=chunk.substr(1):""===url||/\/$/.test(url)||/^\//.test(chunk)?url+=chunk:url+="/"+chunk})),_.isPlainObject(params)&&(hasQueryString=-1<url.indexOf("?"),queryString=_.reduce(params,function(acc,value,key){return _.isEmpty(acc)&&!hasQueryString||(acc+="&"),"object"!=typeof value||_.isArray(value
)?acc+=encodeURIComponent(key)+"="+encodeURIComponent(value):_.forOwn(value,function(parameterValue,parameterName){acc+=encodeURIComponent(key)+"["+encodeURIComponent(parameterName)+"]="+encodeURIComponent(parameterValue)+"&"}),acc},queryString),_.isEmpty(queryString)||(hasQueryString||(url+="?"),url+=queryString))),url},route:function(action,controller,extension,params,rootUrl){var routeParts=[extension,controller,action];if(_.some(routeParts,function(value){return _.isEmpty(value)||!_.isString(value)}))throw new TypeError("All parts are required to build an URL");return rootUrl=rootUrl||context&&context.root_url,this.build([rootUrl].concat(routeParts),
params)}}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("core/promise",factory):(global=global||self)["core/promise"]=factory()}(this,function(){"use strict";return Promise}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("lib/uuid",factory):(global=global||self).uuid=factory()}(this,function(){"use strict";var CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return function(len,radix){var i,r,chars=CHARS,uuid=[];if(
radix=radix||chars.length,len)for(i=0;i<len;i++)uuid[i]=chars[0|Math.random()*radix];else for(uuid[8]=uuid[13]=uuid[18]=uuid[23]="-",uuid[14]="4",i=0;i<36;i++)uuid[i]||(r=0|16*Math.random(),uuid[i]=chars[19===i?3&r|8:r]);return uuid.join("")}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/format"),require("core/promise")):"function"==typeof define&&define.amd?define("core/logger/api",["lodash","core/format","core/promise"],factory):(global=global||self)["core/logger/api"]=factory(global._,global["core/format"],global["core/promise"])}(this,function(_,format,Promise){
"use strict";_=_&&_.hasOwnProperty("default")?_.default:_,format=format&&format.hasOwnProperty("default")?format.default:format,Promise=Promise&&Promise.hasOwnProperty("default")?Promise.default:Promise;function loggerFactory(name,minLevel,fields){var baseRecord,logger;if(!_.isString(name)||_.isEmpty(name))throw new TypeError("A logger needs a name");return _.isPlainObject(minLevel)&&"undefined"==typeof field&&(fields=minLevel,minLevel=defaultLevel),baseRecord=_.defaults(fields||{},{name:name,pid:1,hostname:navigator.userAgent}),logger={log:function(level,recordFields,message){var record,err,rest=[],time=(new Date).toISOString();if(
!1!==loggerFactory.providers&&checkMinLevel(minLevel||defaultLevel,level))return rest=_.isString(recordFields)||recordFields instanceof Error?(message=recordFields,recordFields={},[].slice.call(arguments,2)):[].slice.call(arguments,3),record={level:getLevel(level),v:0,time:time},checkMinLevel(levels.error,level)||message instanceof Error?(err=message instanceof Error?message:(message=_.isObject(message)?JSON.stringify(message):message,new Error(message)),record.msg=err.message,record.err=err):record.msg=format.apply(null,[message].concat(rest)),_.merge(record,baseRecord,recordFields),logQueue.push(record),loggerFactory.flush(),this},level:function(value){
return void 0!==value?(minLevel=getLevelNum(value),this):getLevel(minLevel)},child:function(childFields){return loggerFactory(name,minLevel,_.defaults(childFields,baseRecord))}},_.reduce(levels,function(target,level,levelName){return target[levelName]=_.partial(logger.log,level),target},logger)}var defaultLevel="info",levels={fatal:60,error:50,warn:40,info:30,debug:20,trace:10},logQueue=[],getLevel=function(level){return void 0===level||_.isString(level)&&!_.has(levels,level)?defaultLevel:_.isNumber(level)?_.findKey(levels,function(l){return l===level})||defaultLevel:level},getLevelNum=function(level){return _.isString(level)&&_.has(levels,level
)?levels[level]:_.isNumber(level)&&_.contains(levels,level)?level:levels[defaultLevel]},checkMinLevel=function(minLevel,level){return getLevelNum(level)>=getLevelNum(minLevel)};return loggerFactory.levels=levels,loggerFactory.providers=!1,loggerFactory.load=function(providerConfigs){var self=this,modules=[];return this.providers=[],new Promise(function(resolve,reject){_.forEach(providerConfigs,function(providerConfig,providerName){modules.push(providerName)}),require(modules,function(){var loadedProviders=[].slice.call(arguments);_.forEach(loadedProviders,function(provider,moduleKey){try{self.register(provider,providerConfigs[modules[moduleKey]])}catch(err){
reject(err)}}),self.flush(),resolve()},reject)})},loggerFactory.register=function(provider,providerConfig){if(!_.isPlainObject(provider)||!_.isFunction(provider.log))throw new TypeError("A log provider is an object with a log method");provider.checkMinLevel=checkMinLevel,_.isFunction(provider.setConfig)&&provider.setConfig(providerConfig),this.providers=this.providers||[],this.providers.push(provider)},loggerFactory.flush=function(){_.isArray(this.providers)&&0<this.providers.length&&(_.forEach(logQueue,function(message){_.forEach(loggerFactory.providers,function(provider){provider.log.call(provider,message)})}),logQueue=[])},
loggerFactory.setDefaultLevel=function(level){return defaultLevel=getLevel(level)},loggerFactory}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("module"),require("core/logger/api")):"function"==typeof define&&define.amd?define("core/logger",["lodash","module","core/logger/api"],factory):(global=global||self)["core/logger"]=factory(global._,global.module,global["core/logger/api"])}(this,function(_,module,loggerFactory){"use strict";_=_&&_.hasOwnProperty("default")?_.default:_,module=module&&module.hasOwnProperty("default")?module.default:module;var defaultConfig={level:(
loggerFactory=loggerFactory&&loggerFactory.hasOwnProperty("default")?loggerFactory.default:loggerFactory).levels.warn,loggers:{"core/logger/console":{level:"warn"}}},config=_.defaults(module.config()||{},defaultConfig),logger=loggerFactory("core/logger");return loggerFactory.setDefaultLevel(config.level),loggerFactory.load(config.loggers),window.onerror=function(msg,url,line,col,error){logger.error("Caught[via window.onerror]: '"+msg+"' from "+url+":"+line+":"+col)},window.setTaoLogLevel=function(level){return loggerFactory.setDefaultLevel(level)},loggerFactory}),function(global,factory){
"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/promise"),require("lib/uuid"),require("core/logger")):"function"==typeof define&&define.amd?define("core/eventifier",["lodash","core/promise","lib/uuid","core/logger"],factory):(global=global||self)["core/eventifier"]=factory(global._,global["core/promise"],global["lib/uuid"],global["core/logger"])}(this,function(_,Promise,uuid,loggerFactory){"use strict";_=_&&_.hasOwnProperty("default")?_.default:_,Promise=Promise&&Promise.hasOwnProperty("default")?Promise.default:Promise,uuid=uuid&&uuid.hasOwnProperty("default")?uuid.default:uuid,
loggerFactory=loggerFactory&&loggerFactory.hasOwnProperty("default")?loggerFactory.default:loggerFactory;var defaultNs="@",eventifierLogger=loggerFactory("core/eventifier");function getEventNames(eventNames){return!_.isString(eventNames)||_.isEmpty(eventNames)?[]:_(eventNames.split(/\s/g)).compact().uniq().value()}function getName(eventName){return-1<eventName.indexOf(".")?eventName.substr(0,eventName.indexOf(".")):eventName}function getNamespace(eventName){return-1<eventName.indexOf(".")?eventName.substr(eventName.indexOf(".")+1):defaultNs}return function(target){var targetName,logger,stoppedEvents,eventHandlers={},getHandlers=function(eventName,type){
var name=getName(eventName),ns=getNamespace(eventName);return type=type||"between",eventHandlers[ns]=eventHandlers[ns]||{},eventHandlers[ns][name]=eventHandlers[ns][name]||{before:[],between:[],after:[]},eventHandlers[ns][name][type]},eventApi={on:function(eventNames,handler){return _.isFunction(handler)&&_.forEach(getEventNames(eventNames),function(eventName){getHandlers(eventName).push(handler)}),this},off:function(eventNames){return _.forEach(getEventNames(eventNames),function(eventName){var offNamespaces,name=getName(eventName),ns=getNamespace(eventName);ns&&!name?"*"===ns?((offNamespaces={})[defaultNs]=eventHandlers[defaultNs],
eventHandlers=offNamespaces):eventHandlers[ns]={}:_.forEach(eventHandlers,function(nsHandlers,namespace){!nsHandlers[name]||ns!==defaultNs&&ns!==namespace||(nsHandlers[name]={before:[],between:[],after:[]})})}),this},removeAllListeners:function(){return eventHandlers={},this},trigger:function(eventNames){var self=this,args=[].slice.call(arguments,1);function triggerBetween(allHandlers,event){shouldStop(event.name)?logHandlerStop("before",event):triggerHandlers(allHandlers.between,event).then(function(){!function(handlers,event){shouldStop(event.name)?logHandlerStop("on",event):triggerHandlers(handlers,event).then(function(){shouldStop(event.name
)&&logHandlerStop("after",event)}).catch(function(err){logHandlerStop("after",event,err)})}(allHandlers.after,event)}).catch(function(err){logHandlerStop("on",event,err)})}function triggerHandlers(handlers,event){var pHandlers;return pHandlers=handlers.map(function(handler){return shouldStop(event.name)?Promise.reject():handler.apply(self,args)}),Promise.all(pHandlers)}function logHandlerStop(stoppedIn,event,err){err instanceof Error&&logger.error(err),logger.trace({err:err,event:event.name,stoppedIn:stoppedIn},event.name+" handlers stopped")}function shouldStop(name){return stoppedEvents[name]}return stoppedEvents={},_.forEach(getEventNames(eventNames),
function(eventName){var ns=getNamespace(eventName),name=getName(eventName),mergedHandlers=_(eventHandlers).filter(function(nsHandlers,namespace){return nsHandlers[name]&&(ns===defaultNs||ns===namespace||"*"===namespace)}).reduce(function(acc,nsHandlers){return acc.before=acc.before.concat(nsHandlers[name].before),acc.between=acc.between.concat(nsHandlers[name].between),acc.after=acc.after.concat(nsHandlers[name].after),acc},{before:[],between:[],after:[]});logger.trace({event:eventName,args:args},"trigger %s",eventName),mergedHandlers&&function(allHandlers,name,ns){var event={name:name,namespace:ns};allHandlers.before.length?function(handlers,event){
var pHandlers,beforeArgs=args.slice();return beforeArgs.unshift(event),pHandlers=handlers.map(function(handler){var value=!shouldStop(event.name)&&handler.apply(self,beforeArgs);return!1===value?Promise.reject():value}),Promise.all(pHandlers)}(allHandlers.before,event).then(function(){triggerBetween(allHandlers,event)}).catch(function(err){logHandlerStop("before",event,err)}):triggerBetween(allHandlers,event)}(mergedHandlers,name,ns)}),this},before:function(eventNames,handler){return _.isFunction(handler)&&_.forEach(getEventNames(eventNames),function(eventName){getHandlers(eventName,"before").push(handler)}),this},after:function(eventNames,handler){
return _.isFunction(handler)&&_.forEach(getEventNames(eventNames),function(eventName){getHandlers(eventName,"after").push(handler)}),this},stopEvent:function(name){_.isString(name)&&!_.isEmpty(name.trim())&&(stoppedEvents[name.trim()]=!0)},spread:function(destination,eventNames){var self=this;return destination&&_.isFunction(destination.trigger)&&(_.isString(eventNames)&&(eventNames=getEventNames(eventNames)),_.forEach(eventNames,function(eventName){self.on(eventName,function(){var args=[eventName].concat([].slice.call(arguments));destination.trigger.apply(destination,args)})})),this}};return targetName=(target=target||{}
).name||target.id||target.serial||uuid(6),logger=eventifierLogger.child({target:targetName}),_(eventApi).functions().forEach(function(method){_.isFunction(target[method])&&eventifierLogger.warn("The target object has already a method named "+method,target),target[method]=function(){var args=[].slice.call(arguments);return eventApi[method].apply(target,args)}}),target}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash")):"function"==typeof define&&define.amd?define("util/namespace",["lodash"],factory):(global=global||self)["util/namespace"]=factory(global._)}(this,function(_){"use strict"
;_=_&&_.hasOwnProperty("default")?_.default:_;var reSplit=/\s/g,namespaceHelper={split:function(names,normalize){return!_.isString(names)||_.isEmpty(names)?[]:(normalize&&(names=names.toLowerCase()),_(names.trim().split(reSplit)).compact().uniq().value())},getName:function(namespaced){return!_.isString(namespaced)||_.isEmpty(namespaced)?"":-1<namespaced.indexOf(".")?namespaced.substr(0,namespaced.indexOf(".")):namespaced},getNamespace:function(namespaced,defaultNs){return!_.isString(namespaced)||_.isEmpty(namespaced)?"":-1<namespaced.indexOf(".")?namespaced.substr(namespaced.indexOf(".")+1):defaultNs||"@"},namespaceAll:function(names,namespace,normalize){
var suffix;return _.isArray(names)||(names=namespaceHelper.split(names,normalize)),normalize&&(namespace=namespace.toLowerCase()),suffix=namespace?"."+namespace:"",_(names).map(function(sh){return sh.indexOf(".")<0?sh+suffix:sh}).compact().uniq().value().join(" ")}};return namespaceHelper}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("jquery"),require("lodash"),require("util/namespace")):"function"==typeof define&&define.amd?define("util/shortcut/registry",["jquery","lodash","util/namespace"],factory):(global=global||self)["util/shortcut/registry"]=factory(global.$,global._,
global["util/namespace"])}(this,function($,_,namespaceHelper){"use strict";$=$&&$.hasOwnProperty("default")?$.default:$,_=_&&_.hasOwnProperty("default")?_.default:_,namespaceHelper=namespaceHelper&&namespaceHelper.hasOwnProperty("default")?namespaceHelper.default:namespaceHelper;var modifiers={ctrl:"ctrlKey",alt:"altKey",option:"altKey",shift:"shiftKey",meta:"metaKey",cmd:"metaKey",win:"metaKey"},translateKeys={escape:"esc",arrowdown:"down",arrowleft:"left",arrowright:"right",arrowup:"up"},specialKeys={8:"backspace",9:"tab",13:"enter",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",
40:"down",45:"insert",46:"delete",91:"meta",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",145:"scrolllock",144:"numlock"};function registerEvent(target,eventName,listener){target.addEventListener?target.addEventListener(eventName,listener,!1):target.attachEvent?target.attachEvent("on"+eventName,listener):target["on"+eventName]=listener}function unregisterEvent(target,eventName,listener){target.removeEventListener?target.removeEventListener(eventName,listener,!1):target.detachEvent?target.detachEvent("on"+eventName,listener):target["on"+eventName]=null}function normalizeCommand(descriptor){
var key=translateKeys[descriptor.key]||descriptor.key,parts=[];return descriptor.ctrlKey&&parts.push("control"),descriptor.altKey&&parts.push("alt"),descriptor.shiftKey&&parts.push("shift"),descriptor.metaKey&&parts.push("meta"),descriptor.scrollDown&&parts.push("scrollDown"),descriptor.scrollUp&&parts.push("scrollUp"),descriptor.clickLeft&&parts.push("clickLeft"),descriptor.clickRight&&parts.push("clickRight"),descriptor.clickMiddle&&parts.push("clickMiddle"),descriptor.clickBack&&parts.push("clickBack"),descriptor.clickForward&&parts.push("clickForward"),key&&parts.indexOf(key)<0&&parts.push(key),parts.join("+")}function parseCommand(shortcut){
var parts=namespaceHelper.getName(shortcut).split("+"),descriptor={keyboardInvolved:!1,mouseClickInvolved:!1,mouseWheelInvolved:!1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,key:null,scrollUp:null,scrollDown:null,clickLeft:null,clickRight:null,clickMiddle:null,clickBack:null,clickForward:null};return _.forEach(parts,function(part){if(modifiers[part])descriptor[modifiers[part]]=!0;else if(0<=part.indexOf("mouse")){if(descriptor.keyboardInvolved)throw new Error("A shortcut cannot involve both mouse and regular keys!");0<=part.indexOf("scroll")&&(descriptor.mouseWheelInvolved=!0,descriptor.scrollUp=0<=part.indexOf("up"),descriptor.scrollDown=0<=part.indexOf(
"down")),0<=part.indexOf("click")&&(descriptor.mouseClickInvolved=!0,descriptor.clickLeft=0<=part.indexOf("left"),descriptor.clickRight=0<=part.indexOf("right"),descriptor.clickMiddle=0<=part.indexOf("middle"),descriptor.clickBack=0<=part.indexOf("back"),descriptor.clickForward=0<=part.indexOf("forward"))}else{if(descriptor.mouseClickInvolved||descriptor.mouseWheelInvolved)throw new Error("A shortcut cannot involve both mouse and regular keys!");descriptor.keyboardInvolved=!0,descriptor.key=part}}),descriptor}return function(root,defaultOptions){var keyboardIsRegistered=!1,mouseClickIsRegistered=!1,mouseWheelIsRegistered=!1,keyboardCount=0,mouseClickCount=0,
mouseWheelCount=0,shortcuts={},handlers={},states={};function getHandlers(command,namespace){return handlers[namespace]=handlers[namespace]||{},handlers[namespace][command]=handlers[namespace][command]||[],handlers[namespace][command]}function getCommandHandlers(command){return _.reduce(handlers,function(acc,nsHandlers){return nsHandlers[command]&&(acc=acc.concat(nsHandlers[command])),acc},[])}function setOptions(descriptor,options){descriptor.options=_.defaults(_.merge(descriptor.options||{},options),defaultOptions)}function unregisterKeyboard(){--keyboardCount<=0&&(keyboardCount=0,keyboardIsRegistered&&(unregisterEvent(root,"keydown",onKeyboard),
keyboardIsRegistered=!1))}function unregisterMouseClick(){--mouseClickCount<=0&&(mouseClickCount=0,mouseClickIsRegistered&&(unregisterEvent(root,"click",onMouseClick),mouseClickIsRegistered=!1))}function unregisterMouseWheel(){--mouseWheelCount<=0&&(mouseWheelCount=0,mouseWheelIsRegistered&&(unregisterEvent(root,"wheel",onMouseWheel),mouseWheelIsRegistered=!1))}function registerCommand(command,descriptor){(shortcuts[command]=descriptor).keyboardInvolved&&(keyboardIsRegistered||(registerEvent(root,"keydown",onKeyboard),keyboardIsRegistered=!0),keyboardCount++),descriptor.mouseClickInvolved&&(mouseClickIsRegistered||(registerEvent(root,"click",onMouseClick),
mouseClickIsRegistered=!0),mouseClickCount++),descriptor.mouseWheelInvolved&&(mouseWheelIsRegistered||(registerEvent(root,"wheel",onMouseWheel),mouseWheelIsRegistered=!0),mouseWheelCount++)}function onKeyboard(event){processShortcut(event,{keyboardInvolved:!0,ctrlKey:event.ctrlKey,altKey:event.altKey,shiftKey:event.shiftKey,metaKey:event.metaKey,key:function(event){var code=event.which||event.keyCode,character=32<=code?String.fromCharCode(code).toLowerCase():"",key=event.key&&event.key.toLowerCase(),keyName=event.code&&event.code.toLowerCase();return keyName&&(0===keyName.indexOf("key")?(key<"a"||"z"<key)&&"a"<=character&&character<="z"&&(key=character
):0===keyName.indexOf("digit")&&(key=keyName.substr(5))),specialKeys[code]||key||character}(event)})}function onMouseClick(event){processShortcut(event,_.merge({mouseClickInvolved:!0,ctrlKey:event.ctrlKey,altKey:event.altKey,shiftKey:event.shiftKey,metaKey:event.metaKey},function(event){var buttons={clickLeft:!1,clickRight:!1,clickMiddle:!1,clickBack:!1,clickForward:!1};if(event.buttons)buttons.clickLeft=!!(1&event.buttons),buttons.clickRight=!!(2&event.buttons),buttons.clickMiddle=!!(4&event.buttons),buttons.clickBack=!!(8&event.buttons),buttons.clickForward=!!(16&event.buttons);else switch(event.button){case 0:buttons.clickLeft=!0;break;case 1:
buttons.clickMiddle=!0;break;case 2:buttons.clickRight=!0;break;case 3:buttons.clickBack=!0;break;case 4:buttons.clickForward=!0}return buttons}(event)))}function onMouseWheel(event){processShortcut(event,_.merge({mouseClickInvolved:!0,ctrlKey:event.ctrlKey,altKey:event.altKey,shiftKey:event.shiftKey,metaKey:event.metaKey},function(event){return{scrollUp:event.deltaY<0,scrollDown:0<event.deltaY}}(event)))}function processShortcut(event,descriptor){var shortcutHandlers,$target,command=normalizeCommand(descriptor),shortcut=shortcuts[command];if(shortcut&&!states.disabled){if(!0===shortcut.options.avoidInput&&($target=$(event.target)).closest(
'[type="text"],textarea').length&&(!shortcut.options.allowIn||!$target.closest(shortcut.options.allowIn).length))return;!1===shortcut.options.propagate&&event.stopPropagation(),!0===shortcut.options.prevent&&event.preventDefault(),(shortcutHandlers=getCommandHandlers(command))&&_.forEach(shortcutHandlers,function(handler){handler(event,command)})}}return root.jquery&&(root=root.get(0)),{set:function(shortcut,options){return _.forEach(namespaceHelper.split(shortcut,!0),function(normalized){var descriptor=parseCommand(normalized),command=normalizeCommand(descriptor);setOptions(descriptor,options),registerCommand(command,descriptor)}),this},add:function(
shortcut,handler,options){return _.isFunction(handler)&&_.forEach(namespaceHelper.split(shortcut,!0),function(normalized){var namespace=namespaceHelper.getNamespace(normalized,"*"),descriptor=parseCommand(normalized),command=normalizeCommand(descriptor);setOptions(descriptor,options),registerCommand(command,descriptor),getHandlers(command,namespace).push(handler)}),this},remove:function(shortcut){return _.forEach(namespaceHelper.split(shortcut,!0),function(normalized){var namespace=namespaceHelper.getNamespace(normalized,"*"),command=normalizeCommand(parseCommand(normalized));!function(command,namespace){namespace&&!command?handlers[namespace]={}:_.forEach(
handlers,function(nsHandlers,ns){!nsHandlers[command]||"*"!==namespace&&namespace!==ns||(nsHandlers[command]=[])})}(command,namespace),getCommandHandlers(command).length||function(command){var descriptor=shortcuts[command];shortcuts[command]=null,descriptor&&(descriptor.keyboardInvolved&&unregisterKeyboard(),descriptor.mouseClickInvolved&&unregisterMouseClick(),descriptor.mouseWheelInvolved&&unregisterMouseWheel())}(command)}),this},exists:function(shortcut){var normalized=String(shortcut).trim().toLowerCase(),namespace=namespaceHelper.getNamespace(normalized,"*"),command=normalizeCommand(parseCommand(normalized)),shortcutExists=!1
;return shortcuts[command]?shortcutExists="*"===namespace||!!getHandlers(command,namespace).length:command||(shortcutExists=!_.isEmpty(handlers[namespace])),shortcutExists},clear:function(){return shortcuts={},handlers={},mouseWheelCount=mouseClickCount=keyboardCount=0,unregisterKeyboard(),unregisterMouseClick(),unregisterMouseWheel(),this},getState:function(name){return!!states[name]},setState:function(name,state){return states[name]=!!state,this},enable:function(){return this.setState("disabled",!1),this},disable:function(){return this.setState("disabled",!0),this}}}}),define("ui/keyNavigation/navigator",["jquery","lodash","core/eventifier",
"util/shortcut/registry"],function($,_,eventifier,shortcutRegistry){"use strict";$=$&&$.hasOwnProperty("default")?$.default:$,_=_&&_.hasOwnProperty("default")?_.default:_,eventifier=eventifier&&eventifier.hasOwnProperty("default")?eventifier.default:eventifier,shortcutRegistry=shortcutRegistry&&shortcutRegistry.hasOwnProperty("default")?shortcutRegistry.default:shortcutRegistry;var _navigationGroups={},_ns=".ui-key-navigator",_defaults={defaultPosition:0,keepState:!1,replace:!1,loop:!1,propagateTab:!0},keyNavigatorFactory=function(config){var id,navigables,keyNavigator,$group,_cursor={position:-1,navigable:null},getCurrentCursor=function(){var isFocused=!1
;return document.activeElement&&_.forEach(navigables,function(navigable,index){if(navigable.isVisible()&&navigable.isEnabled()&&(document.activeElement===navigable.getElement().get(0)||(!$(document.activeElement).hasClass("key-navigation-highlight")||$(document.activeElement).data("key-navigatior-id")!==id)&&$.contains(navigable.getElement().get(0),document.activeElement)))return _cursor.position=index,_cursor.navigable=navigable,!(isFocused=!0)}),isFocused?_cursor:null},getClosestPositionRight=function(fromPosition){var pos;for(pos=fromPosition;pos<navigables.length;pos++)if(navigables[pos]&&navigables[pos].isVisible()&&navigables[pos].isEnabled()
)return pos;return-1},getClosestPositionLeft=function(fromPosition){var pos;for(pos=fromPosition;0<=pos;pos--)if(navigables[pos]&&navigables[pos].isVisible()&&navigables[pos].isEnabled())return pos;return-1};if(config=_.defaults(config||{},_defaults),id=config.id||_.uniqueId("navigator_"),navigables=config.elements||[],_navigationGroups[id]){if(!config.replace)throw new TypeError("the navigation group id is already in use : "+id);_navigationGroups[id].destroy()}if(_.each(navigables,function(navigable){navigable.init(),navigable.getElement().data("key-navigatior-id",id)}),config.group){if(!($group=$(config.group)).length)throw new TypeError(
"group element does not exist");$group.addClass("key-navigation-group").attr("data-navigation-id",id)}return keyNavigator=eventifier({getId:function(){return id},getGroup:function(){return $group},isFocused:function(){return!!getCurrentCursor()},next:function(){var pos,cursor=getCurrentCursor();return cursor?(0<=(pos=getClosestPositionRight(cursor.position+1))?this.focusPosition(pos):config.loop?this.focusPosition(getClosestPositionRight(0)):this.trigger("upperbound"),this.trigger("next",getCurrentCursor())):this.focusPosition(getClosestPositionRight(0)),this},previous:function(){var pos,cursor=getCurrentCursor();return cursor?(0<=(
pos=getClosestPositionLeft(cursor.position-1))?this.focusPosition(pos):config.loop?this.focusPosition(getClosestPositionLeft(navigables.length-1)):this.trigger("lowerbound"),this.trigger("previous",getCurrentCursor())):this.focusPosition(getClosestPositionRight(0)),this},activate:function(target){var cursor=getCurrentCursor();return cursor&&this.trigger("activate",cursor,target),this},goto:function(groupId){return _navigationGroups[groupId]?_navigationGroups[groupId].focus():this.trigger("error",new Error("goto an unknown navigation group")),this},focus:function(originNavigator){var pos
;return config.keepState&&_cursor&&0<=_cursor.position?pos=_cursor.position:_.isFunction(config.defaultPosition)?(pos=config.defaultPosition(navigables))<0&&(pos=0):pos=config.defaultPosition,this.focusPosition(getClosestPositionRight(pos),originNavigator),this},focusPosition:function(position,originNavigator){return navigables[position]&&(_cursor.navigable&&this.trigger("blur",this.getCursor(),originNavigator),_cursor.position=position,navigables[_cursor.position].focus(),_cursor.navigable=navigables[_cursor.position],this.trigger("focus",this.getCursor(),originNavigator)),this},first:function(){return this.focusPosition(getClosestPositionRight(0)),this},
last:function(){return this.focusPosition(getClosestPositionLeft(navigables.length-1)),this},destroy:function(){return _.each(navigables,function(navigable){navigable.getElement().off(_ns),navigable.destroy(),navigable.shortcuts&&navigable.shortcuts.clear()}),delete _navigationGroups[id],this},blur:function(){var cursor=this.getCursor();return cursor&&cursor.navigable&&cursor.navigable.getElement().blur(),this},getCursor:function(){return _.clone(_cursor)},getNavigables:function(){return _.clone(navigables)}}),_.each(navigables,function(navigable){if(!function(navElement){return navElement&&_.isFunction(navElement.init)&&_.isFunction(navElement.destroy
)&&_.isFunction(navElement.getElement)&&_.isFunction(navElement.isVisible)&&_.isFunction(navElement.isEnabled)&&_.isFunction(navElement.focus)}(navigable))throw new TypeError("not a valid navigable element");navigable.shortcuts=shortcutRegistry(navigable.getElement()).add("tab shift+tab",function(e,key){keyNavigator.trigger(key,e.target)},{propagate:!!config.propagateTab,prevent:!0}).add("enter",function(e){$(e.target).is(":text,textarea")||(e.preventDefault(),keyNavigator.activate(e.target))},{propagate:!1}).add("up down left right",function(e,key){var $target=$(e.target);$target.is(":text,textarea")||($target.is("img")||$target.hasClass(
"key-navigation-scrollable")||e.preventDefault(),keyNavigator.trigger(key,e.target))},{propagate:!1}),navigable.getElement().on("keyup"+_ns,function(e){32===(e.keyCode?e.keyCode:e.charCode)&&(e.target!==this&&$(e.target).is(":input")?e.stopPropagation():(e.preventDefault(),keyNavigator.activate(e.target)))}).on("blur"+_ns,function(){var cursor=keyNavigator.getCursor();cursor&&cursor.navigable&&keyNavigator.trigger("blur",cursor)})}),_navigationGroups[id]=keyNavigator};return keyNavigatorFactory.get=function(id){if(_navigationGroups[id])return _navigationGroups[id]},keyNavigatorFactory}),define("ui/keyNavigation/navigableDomElement",["jquery",
"core/eventifier"],function($,eventifier){"use strict";$=$&&$.hasOwnProperty("default")?$.default:$,eventifier=eventifier&&eventifier.hasOwnProperty("default")?eventifier.default:eventifier;var navigableDomElement=function($element){return $element=$($element),eventifier({init:function(){if(!$element.length)throw new TypeError("dom element does not exist");return $element.attr("tabindex",-1),$element.addClass("key-navigation-highlight"),this},destroy:function(){return $element.removeClass("key-navigation-highlight"),this},getElement:function(){return $element},isVisible:function(){return $element.is(":visible")},isEnabled:function(){return!$element.is(
":disabled")},focus:function(){return $element.focus(),this}})};return navigableDomElement.createFromDoms=function($elements){var list=[];return $elements.each(function(){list.push(navigableDomElement($(this)))}),list},navigableDomElement}),define("ui/dialog",["jquery","lodash","i18n","handlebars","lib/dompurify/purify","ui/keyNavigation/navigator","ui/keyNavigation/navigableDomElement","util/shortcut/registry","ui/modal"],function($$1,_,__,Handlebars,DOMPurify,keyNavigator,navigableDomElement,shortcutRegistry,modal){"use strict";function Helpers0(hb){hb.registerHelper("__",function(key){return __(key)}),hb.registerHelper("dompurify",function(context){
return DOMPurify.sanitize(context)}),hb.registerHelper("join",function(arr,keyValueGlue,fragmentGlue,wrapper){var fragments=[];return keyValueGlue="string"==typeof keyValueGlue?keyValueGlue:void 0,fragmentGlue="string"==typeof fragmentGlue?fragmentGlue:" ",wrapper="string"==typeof wrapper?wrapper:'"',_.forIn(arr,function(value,key){var fragment="";null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"==typeof value&&(value=_.values(value).join(" ")):value="",void 0!==keyValueGlue&&(fragment+=key+keyValueGlue),fragment+=wrapper+value+wrapper,fragments.push(fragment)}),fragments.join(fragmentGlue)}),hb.registerHelper("for",
function(startIndex,stopIndex,increment,options){var ret="";startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),increment=parseInt(increment);for(var i=startIndex;i<stopIndex;i+=increment)ret+=options.fn(_.extend({},this,{i:i}));return ret}),hb.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),hb.registerHelper("property",function(name,context){return context[name]||""}),hb.registerHelper("includes",function(haystack,needle,options){if(_.contains(haystack,needle))return options.fn(this)})}$$1=$$1&&$$1.hasOwnProperty("default")?$$1.default:$$1,_=_&&_.hasOwnProperty("default")?_.default:_,
__=__&&__.hasOwnProperty("default")?__.default:__,Handlebars=Handlebars&&Handlebars.hasOwnProperty("default")?Handlebars.default:Handlebars,DOMPurify=DOMPurify&&DOMPurify.hasOwnProperty("default")?DOMPurify.default:DOMPurify,keyNavigator=keyNavigator&&keyNavigator.hasOwnProperty("default")?keyNavigator.default:keyNavigator,navigableDomElement=navigableDomElement&&navigableDomElement.hasOwnProperty("default")?navigableDomElement.default:navigableDomElement,shortcutRegistry=shortcutRegistry&&shortcutRegistry.hasOwnProperty("default")?shortcutRegistry.default:shortcutRegistry,Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0)
;var Template=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div class="preview-modal-feedback modal ',stack1=(helper=helpers.class)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.class)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n    <div class="modal-body clearfix">\n        ',!(stack1=helpers.if.call(depth0,depth0&&depth0.heading,{hash:{},inverse:this.noop,
fn:this.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n        <h4 class="strong">',stack1=(helper=helpers.heading)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.heading)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</h4>\n        "},data),data:data}))&&0!==stack1||(buffer+=stack1),buffer+='\n\n        <p class="message">',!(stack1=(helper=helpers.message)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.message)===functionType?helper.call(depth0,{hash:{},data:data}):helper)&&0!==stack1||(buffer+=stack1),buffer+="</p>\n\n        ",!(
stack1=helpers.if.call(depth0,depth0&&depth0.content,{hash:{},inverse:this.noop,fn:this.program(3,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n        <div class="content">',!(stack1=(helper=helpers.content)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.content)===functionType?helper.call(depth0,{hash:{},data:data}):helper)&&0!==stack1||(buffer+=stack1),buffer+="</div>\n        "},data),data:data}))&&0!==stack1||(buffer+=stack1),buffer+='\n\n        <div class="buttons rgt"></div>\n    </div>\n</div>\n'});Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template$1=Handlebars.template(
function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;function program2(depth0,data){var stack1,helper,buffer="";return buffer+='<span class="icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span> '}return!(stack1=helpers.each.call(depth0,depth0&&depth0.buttons,{hash:{},inverse:self.noop,fn:self.program(1,function(
depth0,data){var stack1,helper,buffer="";return buffer+='\n    <button class="btn-',stack1=(helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.type)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+" small ",stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-control="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}
):helper,buffer+=escapeExpression(stack1)+'" type="button">\n        ',!(stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}))&&0!==stack1||(buffer+=stack1),buffer+='\n        <span class="label">',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</span>\n    </button>\n"},data),data:data}))&&0!==stack1||(buffer+=stack1),buffer+="\n"});var _definedButtons={ok:{id:"ok",type:"info",label:__("Ok"),close:!0},cancel:{id:"cancel",type:"regular",
label:__("Cancel"),close:!0},yes:{id:"yes",type:"info",label:__("Yes"),close:!0},no:{id:"no",type:"regular",label:__("No"),close:!0}},_defaults={message:"",content:"",width:500,animate:!1,autoRender:!1,autoDestroy:!1,renderTo:"body",buttons:"cancel,ok"},dialog={init:function(options){var self=this,events={},initOptions=_.omit(options||{},function(value,key){var omit=!1;return 2<key.length&&"on"===key.substr(0,2)&&(events[key.substr(2)]=value,omit=!0),omit});return _.defaults(this,initOptions,_defaults),this.$html=$$1(function(data,options){var html=Template(data,options);return html}(this)),this.$buttons=this.$html.find(".buttons"),this.rendered=!1,
this.destroyed=!1,this.$buttons.on("click.modal","button",this._onButtonClick.bind(this)),this.setButtons(this.buttons),_.forEach(events,function(callback,eventName){eventName.indexOf(".")<0&&(eventName+=".modal"),self.on(eventName.toLowerCase(),callback)}),this.autoRender&&this.render(),this},destroy:function(){return this.destroyed||(this._destroy(),this.rendered=!1,this.destroyed=!0,this.trigger("destroy.modal"),this.$buttons.off(".modal"),this.$html.off(".modal").remove(),this.$html=null,this.$buttons=null),this},setButtons:function(buttons){var self=this;return this.destroyed||(buttons=buttons||_defaults.buttons,_.isArray(buttons)||_.isString(buttons
)&&(buttons=buttons.split(",")),this.buttons={},_.forEach(buttons,function(btn){_.isString(btn)&&(btn=btn.trim(),btn=_definedButtons[btn]||{id:btn,type:"info",label:btn}),btn.type||(btn.type="regular"),self.buttons[btn.id]=btn}),this.$buttons.html(function(data,options){var html=Template$1(data,options);return html}(this))),this},render:function(to){return this.destroyed||($$1(to||this.renderTo).append(this.$html),this._install(),this.rendered=!0),this},show:function(){return this.destroyed||(this.rendered?this._open():this.render()),this},hide:function(){return!this.destroyed&&this.rendered&&(this._close(),this.autoDestroy&&this.destroy()),this},
on:function(eventName){var dom=this.$html;return dom&&dom.on.apply(dom,arguments),this},off:function(eventName){var dom=this.$html;return dom&&dom.off.apply(dom,arguments),this},trigger:function(eventName,extraParameters){var dom=this.$html;return dom&&(void 0===extraParameters&&(extraParameters=[]),_.isArray(extraParameters)||(extraParameters=[extraParameters]),(extraParameters=Array.prototype.slice.call(extraParameters)).push(this),dom.trigger(eventName,extraParameters)),this},getDom:function(){return this.$html},_onButtonClick:function(event){var id=$$1(event.target).closest("button").data("control"),btn=this.buttons[id];btn&&this._execute(btn)},
_execute:function(btn){btn.action&&btn.action.apply(this,[btn,this]),this.trigger(btn.id+"btn.modal",[btn]),btn.close&&this.hide()},focus:function(button){var focusPosition=-1;button&&(focusPosition=_.findIndex(this.navigator.getNavigables(),function(navigable){return navigable.getElement().is('[data-control="'+button+'"]')})),0<=focusPosition?this.navigator.focusPosition(focusPosition):this.navigator.focus()},_install:function(){var $buttons,closeButton,self=this;this.destroyed||(this.$html.modal({width:this.width,animate:this.animate,disableClosing:this.disableClosing,disableEscape:this.disableEscape}).on("closed.modal",function(){
self.autoDestroy&&self.destroy()}),$buttons=this.$buttons.find("button"),(closeButton=$$1(".modal").find("#modal-close-btn")[0])&&$buttons.push(closeButton),this.navigator=keyNavigator({elements:navigableDomElement.createFromDoms($buttons)}).on("right down",function(){this.next()}).on("left up",function(){this.previous()}).on("tab",function(){this.getCursor().position===$buttons.length-1?this.first():this.next()}).on("shift+tab",function(){0===this.getCursor().position?this.last():this.previous()}).on("activate",function(cursor){cursor.navigable.getElement().click()}),self.navigator.last(),this.globalShortcut=shortcutRegistry($$1("body")).add("tab shift+tab"
,function(){self.navigator.isFocused()||self.navigator.focus()}),self.trigger("create.dialog"))},_open:function(){this.$html.modal("open")},_close:function(){this.$html.modal("close")},_destroy:function(){this.$html.modal("destroy"),this.navigator&&this.navigator.destroy(),this.globalShortcut&&this.globalShortcut.clear()}};return function(options){var instance=_.clone(dialog,!0);return instance.init(options),instance}}),define("ui/dialog/alert",["lodash","ui/dialog"],function(_,dialog){"use strict";return _=_&&_.hasOwnProperty("default")?_.default:_,dialog=dialog&&dialog.hasOwnProperty("default")?dialog.default:dialog,function(message,action,onCreateDialog){
var dlg=dialog({message:message,buttons:"ok",autoDestroy:!0,autoRender:!0}).on("create.dialog",function(){onCreateDialog&&onCreateDialog()});return _.isFunction(action)&&dlg.on("closed.modal",action),dlg}}),define("ui/filesender",["jquery","lodash","layout/logout-event"],function($,_,logoutEvent){"use strict";$=$&&$.hasOwnProperty("default")?$.default:$,_=_&&_.hasOwnProperty("default")?_.default:_,logoutEvent=logoutEvent&&logoutEvent.hasOwnProperty("default")?logoutEvent.default:logoutEvent;var FileSender={_opts:{frame:"__postFrame_",loaded:function(data){}},_init:function(options){var xhr,fd,self=FileSender,opts=_.defaults(options,self._opts),
xhr2="undefined"!=typeof XMLHttpRequest&&(new XMLHttpRequest).upload&&"undefined"!=typeof FormData,fileParamName=options.fileParamName||"content",fileNameParamName=options.fileNameParamName||"contentName";if(!(this.attr("action")||opts.url&&0!==opts.url.trim().length))throw new Error("An url is required in the options or at least an action ");if(0===this.find("input[type='file']").length)throw new Error("This plugin is used to post files, your form should include an input element of type file.");if(!this||!this.is("form"))throw new Error("This plugin can only be called on a FORM element");xhr2&&(xhr=new XMLHttpRequest,fd=new FormData(this[0]),
options.file&&options.file instanceof File&&(fd.append(fileParamName,options.file),fd.append(fileNameParamName,encodeURIComponent(options.file.name))),xhr.open("POST",opts.url,!0),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr.onreadystatechange=function(){if(4===xhr.readyState)if(200===xhr.status){var result=$.parseJSON(xhr.responseText);result.error?"function"==typeof opts.failed&&opts.failed(result.error):"function"==typeof opts.loaded&&opts.loaded(result)}else 403===xhr.status&&logoutEvent(),"function"==typeof opts.failed&&opts.failed()},xhr.send(fd))}};$.fn.sendfile=function(options){return FileSender._init.call(this,options)}}),define(
"ui/progressbar",["jquery","lodash","core/pluginifier"],function($,_,Pluginifier){"use strict";$=$&&$.hasOwnProperty("default")?$.default:$,_=_&&_.hasOwnProperty("default")?_.default:_,Pluginifier=Pluginifier&&Pluginifier.hasOwnProperty("default")?Pluginifier.default:Pluginifier;var ns="progressbar",dataNs="ui."+ns,defaults={disableClass:"disabled",style:"info",value:0,showProgress:!1},progressBar={init:function(options){return options=_.defaults(options||{},defaults),this.each(function(){var $pgElt,percent,$elt=$(this);$elt.data(dataNs)||(options.value=parseInt(options.value,10),$elt.data(dataNs,options),percent=options.value+"%",$pgElt=$("<span></span>"
).width(percent).attr("title",percent),options.showProgress&&$pgElt.text(percent),$elt.addClass("progressbar").addClass(options.style).empty().append($pgElt),$elt.trigger("create."+ns))})},_update:function($elt,value){var $pgElt,percent,options=$elt.data(dataNs);0<=(value=parseInt(value,10))&&value<=100&&(percent=value+"%",($pgElt=$elt.children("span")).width(value+"%").attr("title",percent),options.showProgress&&$pgElt.text(percent),options.value=value,$elt.data(dataNs,options),$elt.trigger("update."+ns,value))},_value:function($elt,value){var options=$elt.data(dataNs);return void 0!==value?progressBar._update($elt,value):options.value},destroy:function(){
return this.each(function(){var $elt=$(this);$elt.data(dataNs)&&($elt.removeClass("progressbar").empty().removeData(dataNs),$elt.trigger("destroy."+ns))})}};Pluginifier.register(ns,progressBar,{expose:["update","value"]})}),define("ui/uploader",["jquery","lodash","i18n","async","core/pluginifier","util/bytes","handlebars","lib/dompurify/purify","ui/filesender","ui/progressbar"],function($$1,_,__,async,Pluginifier,bytes,Handlebars,DOMPurify,filesender,progressbar){"use strict";function Helpers0(hb){hb.registerHelper("__",function(key){return __(key)}),hb.registerHelper("dompurify",function(context){return DOMPurify.sanitize(context)}),hb.registerHelper("join"
,function(arr,keyValueGlue,fragmentGlue,wrapper){var fragments=[];return keyValueGlue="string"==typeof keyValueGlue?keyValueGlue:void 0,fragmentGlue="string"==typeof fragmentGlue?fragmentGlue:" ",wrapper="string"==typeof wrapper?wrapper:'"',_.forIn(arr,function(value,key){var fragment="";null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"==typeof value&&(value=_.values(value).join(" ")):value="",void 0!==keyValueGlue&&(fragment+=key+keyValueGlue),fragment+=wrapper+value+wrapper,fragments.push(fragment)}),fragments.join(fragmentGlue)}),hb.registerHelper("for",function(startIndex,stopIndex,increment,options){var ret=""
;startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),increment=parseInt(increment);for(var i=startIndex;i<stopIndex;i+=increment)ret+=options.fn(_.extend({},this,{i:i}));return ret}),hb.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),hb.registerHelper("property",function(name,context){return context[name]||""}),hb.registerHelper("includes",function(haystack,needle,options){if(_.contains(haystack,needle))return options.fn(this)})}$$1=$$1&&$$1.hasOwnProperty("default")?$$1.default:$$1,_=_&&_.hasOwnProperty("default")?_.default:_,__=__&&__.hasOwnProperty("default")?__.default:__,
async=async&&async.hasOwnProperty("default")?async.default:async,Pluginifier=Pluginifier&&Pluginifier.hasOwnProperty("default")?Pluginifier.default:Pluginifier,bytes=bytes&&bytes.hasOwnProperty("default")?bytes.default:bytes,Handlebars=Handlebars&&Handlebars.hasOwnProperty("default")?Handlebars.default:Handlebars,DOMPurify=DOMPurify&&DOMPurify.hasOwnProperty("default")?DOMPurify.default:DOMPurify,Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var stack1,helper,options,buffer="",helperMissing=(
helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,escapeExpression=this.escapeExpression,functionType="function";return buffer+='<div class="file-upload grid-row">\n    <span class="btn-info btn-browse small col-5"><span class="icon-folder-open"></span>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Browse...",options):helperMissing.call(depth0,"__","Browse...",options)))+'</span>\n    <span class="file-name col-7 truncate placeholder">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"No file selected",options):helperMissing.call(
depth0,"__","No file selected",options)))+'</span>\n    <input type="file" name="',stack1=(helper=helpers.inputName)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.inputName)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" ',!(stack1=helpers.if.call(depth0,depth0&&depth0.multiple,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){return"multiple"},data),data:data}))&&0!==stack1||(buffer+=stack1),
buffer+='>\n</div>\n\x3c!--<div class="grid-row" style="display:none;">--\x3e\n\x3c!--<ul class="file-list"></ul>--\x3e\n\x3c!--</div>--\x3e\n<div class="grid-row">\n    <div class="file-drop col-12" data-drop-msg="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Drop the files to upload",options):helperMissing.call(depth0,"__","Drop the files to upload",options)))+'">\n        <div class="dragholder">\n            ~ '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"or",options):helperMissing.call(depth0,"__","or",options))
)+" ~\n            <br/>\n            ",!(stack1=helpers.if.call(depth0,depth0&&depth0.multiple,{hash:{},inverse:this.program(5,function(depth0,data){var helper,options,buffer="";return buffer+="\n            "+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Drag file here",options):helperMissing.call(depth0,"__","Drag file here",options)))+"\n            "},data),fn:this.program(3,function(depth0,data){var helper,options,buffer="";return buffer+="\n            "+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Drag files here",options
):helperMissing.call(depth0,"__","Drag files here",options)))+"\n            "},data),data:data}))&&0!==stack1||(buffer+=stack1),buffer+='\n        </div>\n    </div>\n</div>\n<div class="grid-row">\n    <div class="progressbar col-12"></div>\n    <br/>\n</div>\n<div class="grid-row">\n    ',!(stack1=helpers.if.call(depth0,depth0&&depth0.showResetButton,{hash:{},inverse:this.noop,fn:this.program(7,function(depth0,data){var helper,options,buffer="";return buffer+='\n    <button type="button" class="btn-info btn-reset small"><span class="icon-eraser"></span>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(
depth0,"Reset",options):helperMissing.call(depth0,"__","Reset",options)))+"</button>\n    "},data),data:data}))&&0!==stack1||(buffer+=stack1),buffer+="\n    ",!(stack1=helpers.if.call(depth0,depth0&&depth0.showUploadButton,{hash:{},inverse:this.noop,fn:this.program(9,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n    <button class="btn-success btn-upload small"><span class="icon-upload"></span>',stack1=(helper=helpers.uploadBtnText)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.uploadBtnText)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</button>\n    "},data),
data:data}))&&0!==stack1||(buffer+=stack1),buffer+="\n</div>"});Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template$1=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,buffer="",escapeExpression=this.escapeExpression;return buffer+='<li data-file-name="',buffer+=escapeExpression((helper=helpers.name)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.name)?helper.call(depth0,{hash:{},data:data}):helper)+'">\n    ',buffer+=escapeExpression((helper=helpers.name)?helper.call(
depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.name)?helper.call(depth0,{hash:{},data:data}):helper)+'\n    <span class="size">',buffer+=escapeExpression((helper=helpers.size)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.size)?helper.call(depth0,{hash:{},data:data}):helper)+'</span>\n    <span class="status"></span>\n    <a href="#" data-role="delete"><span class="icon-close"></span></a>\n</li>\n'});var ns="uploader",dataNs="ui."+ns,defaults={upload:!0,read:!1,multiple:!1,uploadQueueSize:3,inputName:"content",showResetButton:!0,showUploadButton:!0,browseBtnClass:"btn-browse",
uploadBtnClass:"btn-upload",resetBtnClass:"btn-reset",fileNameClass:"file-name",dropZoneClass:"file-drop",progressBarClass:"progressbar",dragOverClass:"drag-hover",formAttributes:{class:"uploader uploaderContainer"},defaultErrMsg:__("Unable to upload file"),uploadBtnText:__("Upload"),fileSelect:function(files,done){return _.isFunction(done)?done(files):files}},tests={filereader:"undefined"!=typeof FileReader,dnd:"draggable"in document.createElement("span")},uploader={init:function(options){var self=uploader;return options=_.defaults(options||{},defaults),this.each(function(){var $builtInForm,$elt=$$1(this);if(!$elt.data(dataNs)){$elt.html(function(data,
options){var html=Template(data,options);return html}(options)),($builtInForm=options.$form&&options.$form.length?options.$form:$elt.find("form")).length||($builtInForm=$elt.closest("form")),$builtInForm.length||($elt.wrap($$1("<form>",options.formAttributes)),$builtInForm=$elt.parent()),options.$input=$$1("input[type=file]",$elt),options.$browseBtn=$$1("."+options.browseBtnClass,$elt),options.$fileName=$$1("."+options.fileNameClass,$elt),options.$dropZone=$$1("."+options.dropZoneClass,$elt),options.$progressBar=$$1("."+options.progressBarClass,$elt),options.$form=$builtInForm,options.$uploadBtn=$$1("."+options.uploadBtnClass,$elt),options.$resetBtn=$$1(
"."+options.resetBtnClass,$elt),options.useDropZone=tests.dnd,options.dropZonePlaceholder=options.$dropZone.html(),options.fileNamePlaceholder=options.$fileName.text(),options.files=[],$elt.data(dataNs,options),self._reset($elt);var dragOutHandler=function(e){e.preventDefault(),e.stopPropagation(),options.$dropZone.removeClass(options.dragOverClass)};if(!tests.filereader)throw new Error("FileReader API not supported! Please use a compliant browser!");options.$input.on("change",function(e){var finalFiles=[];_.forEach(e.target.files,function(file){finalFiles.push(file)}),self._selectFiles($elt,finalFiles)}),options.$input.on("mousedown",function(e){
return e.preventDefault(),$$1(this).blur(),!1}),options.useDropZone?($$1(document).off("drop."+ns).on("drop."+ns,function(e){return e.stopImmediatePropagation(),e.preventDefault(),!1}),$$1(document).off("dragover."+ns).on("dragover."+ns,function(e){return e.stopImmediatePropagation(),e.preventDefault(),!1}),options.$dropZone.on("dragover",function(e){e.preventDefault(),e.stopPropagation(),options.$dropZone.addClass(options.dragOverClass)}).on("dragend",dragOutHandler).on("dragleave",dragOutHandler).on("drop",function(e){var files=[];if(dragOutHandler(e),e.target.files?files=_.values(e.target.files):e.originalEvent.files?files=_.values(e.originalEvent.files
):e.originalEvent.dataTransfer&&e.originalEvent.dataTransfer.files&&(files=_.values(e.originalEvent.dataTransfer.files)),files&&files.length){var append=0<options.$dropZone.children("ul").length;options.multiple||(append=!(files=[files[0]])),self._selectFiles($elt,files,append)}return!1})):options.$dropZone.hide(),$elt.on("fileselect."+ns,function(){0===options.files.length&&self._reset($elt),options.upload&&options.$uploadBtn.off("click").on("click",function(e){e.preventDefault(),self._upload($elt,options.files)}).removeProp("disabled"),options.read&&self._read($elt,options.files),options.$resetBtn.off("click").on("click",function(e){e.preventDefault(),
self._reset($elt)}).removeProp("disabled")}),$elt.trigger("create."+ns)}})},_selectFiles:function($elt,files,append){var listContent,self=this,options=$elt.data(dataNs),updateFileName=function(){var length=options.files.length;options.$fileName.text(length+" "+__(1<length?"files selected":"file selected")).removeClass("placeholder")};files.length<=0&&!append&&self._reset($elt),0<files.length&&options.fileSelect.call($elt,files,function(filteredFiles){options.files=append?options.files.concat(filteredFiles):filteredFiles,options.useDropZone?(updateFileName(),listContent=_.reduce(filteredFiles,function(acc,file){return acc+function(data,options){
var html=Template$1(data,options);return html}({name:file.name,size:bytes.hrSize(file.size)})},""),append?options.$dropZone.children("ul").append(listContent):options.$dropZone.html("<ul>"+listContent+"</ul>"),options.$dropZone.off("click."+ns).on("click."+ns,"[data-role=delete]",function(e){var $fileEntry=$$1(this).parent(),name=$fileEntry.data("file-name");e.preventDefault(),e.stopPropagation(),name&&(options.files=_.reject(options.files,{name:name}),0===options.files.length?self._reset($elt):updateFileName(),$fileEntry.remove())})):(options.files=options.files.slice(0,1),options.$fileName.text(files[0].name).removeClass("placeholder")),$elt.trigger(
"fileselect."+ns)})},_files:function($elt){var files=[],options=$elt.data(dataNs);return options&&(files=options.files),files},_reset:function($elt){var options=$elt.data(dataNs);options.$fileName.text(options.fileNamePlaceholder).addClass("placeholder"),options.$dropZone.empty().html(options.dropZonePlaceholder),options.$uploadBtn.prop("disabled",!0),options.$resetBtn.prop("disabled",!0),options.$progressBar&&options.$progressBar.removeClass("success").progressbar("destroy").progressbar({value:0}),$elt.trigger("reset."+ns)},_upload:function($elt){var length,$fileEntries,entryHeight,q,errors=[],options=$elt.data(dataNs);options&&options.files.length&&(
length=options.files.length,$fileEntries=$$1("ul",options.$dropZone),entryHeight=$$1("li:first",$fileEntries).outerHeight(),q=async.queue(function(file,done){var $fileEntry=$$1('li[data-file-name="'+file.name+'"]',$fileEntries),$status=$$1(".status",$fileEntry),index=$fileEntries.children().index($fileEntry);options.$dropZone.stop(!0,!0).animate({scrollTop:index*entryHeight},25),$status.removeClass("success").removeClass("error").addClass("sending"),options.$form.sendfile({url:options.uploadUrl,file:file,loaded:function(result){$status.removeClass("sending").removeClass("error").addClass("success"),done(null,result)},failed:function(message){
message=message||options.defaultErrMsg,$status.removeClass("sending").removeClass("success").addClass("error").attr("title",message),done(new Error(message))}})},options.uploadQueueSize||1),options.$uploadBtn.prop("disabled",!0),options.$resetBtn.prop("disabled",!0),options.$progressBar.progressbar("value",0),_.forEach(options.files,function(file,index){_.delay(function(){q.push(file,function(err,result){var complete=(index+1)/length*100;err?(errors.push(err),$elt.trigger("fail."+ns,[file,err])):$elt.trigger("upload."+ns,[file,result]),options.$progressBar.progressbar("value",complete),100<=complete&&(errors.length===length?options.$progressBar.addClass(
"error"):0<errors.length?options.$progressBar.addClass("warning"):options.$progressBar.addClass("success"),$elt.trigger("end."+ns))})},50)}))},_read:function($elt){var options=$elt.data(dataNs);options&&options.files.length&&_.forEach(options.files,function(file){file.name,file.size,file.type;var reader=new FileReader;reader.onload=function(e){options.$progressBar.progressbar("value",100),$elt.trigger("readend."+ns,[file,e.target.result])},reader.onloadstart=function(e){options.$progressBar.progressbar("value",0),$elt.trigger("readstart."+ns,[file])},options.$progressBar.length&&(reader.onprogress=function(e){var percentProgress=Math.ceil(Math.round(e.loaded
)/Math.round(e.total)*100);options.$progressBar.progressbar("value",percentProgress)}),reader.readAsDataURL(file)})},destroy:function(){this.each(function(){var $elt=$$1(this);$$1(document).off("drop."+ns).off("dragover."+ns),$elt.empty(),$elt.trigger("destroy."+ns)})}};Pluginifier.register(ns,uploader,{expose:["reset","selectFiles","upload","read"]})}),define("css!ui/component/css/components",[],function(){}),define("ui/component",["jquery","lodash","core/eventifier","handlebars","i18n","lib/dompurify/purify","css!ui/component/css/components.css"],function($$1,_,eventifier,Handlebars,__,DOMPurify,components_css){"use strict";function Helpers0(hb){
hb.registerHelper("__",function(key){return __(key)}),hb.registerHelper("dompurify",function(context){return DOMPurify.sanitize(context)}),hb.registerHelper("join",function(arr,keyValueGlue,fragmentGlue,wrapper){var fragments=[];return keyValueGlue="string"==typeof keyValueGlue?keyValueGlue:void 0,fragmentGlue="string"==typeof fragmentGlue?fragmentGlue:" ",wrapper="string"==typeof wrapper?wrapper:'"',_.forIn(arr,function(value,key){var fragment="";null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"==typeof value&&(value=_.values(value).join(" ")):value="",void 0!==keyValueGlue&&(fragment+=key+keyValueGlue),
fragment+=wrapper+value+wrapper,fragments.push(fragment)}),fragments.join(fragmentGlue)}),hb.registerHelper("for",function(startIndex,stopIndex,increment,options){var ret="";startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),increment=parseInt(increment);for(var i=startIndex;i<stopIndex;i+=increment)ret+=options.fn(_.extend({},this,{i:i}));return ret}),hb.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),hb.registerHelper("property",function(name,context){return context[name]||""}),hb.registerHelper("includes",function(haystack,needle,options){if(_.contains(haystack,needle)
)return options.fn(this)})}$$1=$$1&&$$1.hasOwnProperty("default")?$$1.default:$$1,_=_&&_.hasOwnProperty("default")?_.default:_,eventifier=eventifier&&eventifier.hasOwnProperty("default")?eventifier.default:eventifier,Handlebars=Handlebars&&Handlebars.hasOwnProperty("default")?Handlebars.default:Handlebars,__=__&&__.hasOwnProperty("default")?__.default:__,DOMPurify=DOMPurify&&DOMPurify.hasOwnProperty("default")?DOMPurify.default:DOMPurify,Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,
Handlebars.helpers),'<div class="component"></div>'});function defaultTpl(data,options,asString){var html=Template(data,options);return html}var _slice=[].slice;function delegatedResize(){var width=this.config.width,height=this.config.height,$container=this.getContainer(),$element=this.getElement();$container&&("auto"===width&&(width=$container.width()),"auto"===height&&(height=$container.height())),$element&&(_.isNumber(width)&&$element.css({width:width+"px"}),_.isNumber(height)&&$element.css({height:height+"px"})),this._width=width,this._height=height}return function(specs,defaults){var $container,componentTpl=defaultTpl,componentState={},componentApi={
init:function(config){return this.config=_(config||{}).omit(function(value){return null==value}).defaults(defaults||{}).value(),componentState={},this.trigger("init"),this.config.renderTo&&($container=$$1(this.config.renderTo),this.render()),this},destroy:function(){return this.trigger("destroy"),this.$component&&this.$component.remove(),this.$component=null,componentState={},this},render:function(container){return container&&($container=$$1(container)),this.$component=$$1(componentTpl(this.config)),$container&&(this.config.replace&&$container.empty(),$container.append(this.$component)),this.setState("rendered",!0),delegatedResize.call(this),this.trigger(
"render",this.$component),this},setSize:function(width,height){return this.config.width=width,this.config.height=height,this.is("rendered")&&delegatedResize.call(this),this.trigger("setsize",width,height),this},getSize:function(){if(this.is("rendered"))return{width:this._width||0,height:this._height||0}},getOuterSize:function(includeMargin){var $component;if(this.is("rendered"))return $component=this.getElement(),includeMargin=includeMargin||!1,{width:Math.round($component.outerWidth(includeMargin)),height:Math.round($component.outerHeight(includeMargin))}},show:function(){return this.trigger("show",this),this.setState("hidden",!1)},hide:function(){
return this.trigger("hide",this),this.setState("hidden",!0)},enable:function(){return this.trigger("enable",this),this.setState("disabled",!1)},disable:function(){return this.trigger("disable",this),this.setState("disabled",!0)},is:function(state){return!!componentState[state]},setState:function(state,flag){return flag=!!flag,componentState[state]=flag,this.$component&&this.$component.toggleClass(state,flag),this.trigger("state",state,flag,this),this},getContainer:function(){return $container},getElement:function(){return this.$component},getTemplate:function(){return componentTpl},setTemplate:function(template){var tpl=template||defaultTpl
;return componentTpl=tpl,_.isFunction(componentTpl)||(componentTpl=function(){return tpl}),this.trigger("template",componentTpl),this},getConfig:function(){return this.config||defaults||{}}};return specs&&_(specs).functions().forEach(function(method){componentApi[method]=function(){return specs[method].apply(componentApi,_slice.call(arguments))}}),eventifier(componentApi)}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("util/regexEscape",factory):(global=global||self)["util/regexEscape"]=factory()}(this,function(){"use strict";return function(s){
return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("util/regexEscape")):"function"==typeof define&&define.amd?define("util/wrapLongWords",["util/regexEscape"],factory):(global=global||self)["util/wrapLongWords"]=factory(global["util/regexEscape"])}(this,function(regexEscape){"use strict";regexEscape=regexEscape&&regexEscape.hasOwnProperty("default")?regexEscape.default:regexEscape;var getCutTerm=function(longWord,chunkExp){for(var cutTerms=longWord.match(chunkExp),i=cutTerms.length,oldFirst="",newFirst="",offenders=[".",":",";"];i--;
)newFirst=cutTerms[i].charAt(0),-1<offenders.indexOf(newFirst)&&(cutTerms[i]=cutTerms[i].substr(1)),-1<offenders.indexOf(oldFirst)&&(cutTerms[i]=cutTerms[i]+oldFirst),oldFirst=newFirst;return cutTerms.join(" ")};return function(str,threshold){str=str.toString().replace(/([\w])</g,"$1 <");for(var cut,chunkExp=new RegExp(".{1,"+threshold+"}","g"),longWords=str.match(new RegExp("[\\S]{"+threshold+",}","g"))||[],i=longWords.length;i--;)cut=getCutTerm(longWords[i],chunkExp),str=str.replace(new RegExp(regexEscape(longWords[i]),"g"),cut);return str}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(
):"function"==typeof define&&define.amd?define("util/encode",factory):(global=global||self)["util/encode"]=factory()}(this,function(){"use strict";var _reQuot=/"/g,_reApos=/'/g,encodeHTML=function(html){return document.createElement("a").appendChild(document.createTextNode(html)).parentNode.innerHTML};return{html:encodeHTML,attribute:function(html){return encodeHTML(html).replace(_reQuot,"&quot;").replace(_reApos,"&apos;")},encodeBase64:function(str){return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g,function(match,p1){return String.fromCharCode("0x"+p1)}))},decodeBase64:function(str){return decodeURIComponent(Array.prototype.map.call(atob(str),
function(c){return"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join(""))}}}),define("ui/feedback",["jquery","lodash","core/format","ui/component","util/wrapLongWords","util/encode","handlebars","i18n","lib/dompurify/purify"],function($$1,_,format,component,wrapLongWords,encode,Handlebars,__,DOMPurify){"use strict";function Helpers0(hb){hb.registerHelper("__",function(key){return __(key)}),hb.registerHelper("dompurify",function(context){return DOMPurify.sanitize(context)}),hb.registerHelper("join",function(arr,keyValueGlue,fragmentGlue,wrapper){var fragments=[];return keyValueGlue="string"==typeof keyValueGlue?keyValueGlue:void 0,
fragmentGlue="string"==typeof fragmentGlue?fragmentGlue:" ",wrapper="string"==typeof wrapper?wrapper:'"',_.forIn(arr,function(value,key){var fragment="";null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"==typeof value&&(value=_.values(value).join(" ")):value="",void 0!==keyValueGlue&&(fragment+=key+keyValueGlue),fragment+=wrapper+value+wrapper,fragments.push(fragment)}),fragments.join(fragmentGlue)}),hb.registerHelper("for",function(startIndex,stopIndex,increment,options){var ret="";startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),increment=parseInt(increment);for(var i=startIndex;i<stopIndex;i+=increment
)ret+=options.fn(_.extend({},this,{i:i}));return ret}),hb.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),hb.registerHelper("property",function(name,context){return context[name]||""}),hb.registerHelper("includes",function(haystack,needle,options){if(_.contains(haystack,needle))return options.fn(this)})}$$1=$$1&&$$1.hasOwnProperty("default")?$$1.default:$$1,_=_&&_.hasOwnProperty("default")?_.default:_,format=format&&format.hasOwnProperty("default")?format.default:format,component=component&&component.hasOwnProperty("default")?component.default:component,
wrapLongWords=wrapLongWords&&wrapLongWords.hasOwnProperty("default")?wrapLongWords.default:wrapLongWords,encode=encode&&encode.hasOwnProperty("default")?encode.default:encode,Handlebars=Handlebars&&Handlebars.hasOwnProperty("default")?Handlebars.default:Handlebars,__=__&&__.hasOwnProperty("default")?__.default:__,DOMPurify=DOMPurify&&DOMPurify.hasOwnProperty("default")?DOMPurify.default:DOMPurify,Helpers0.__initialized||(Helpers0(Handlebars),Helpers0.__initialized=!0);var Template=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,
helper,options,buffer="",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+='<div id="',buffer+=escapeExpression(stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.id)?helper.call(depth0,{hash:{},data:data}):helper)+'" class="feedback feedback-',buffer+=escapeExpression(stack1=(helper=helpers.level)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.level)?helper.call(depth0,{hash:{},data:data}):helper)+" ",!(stack1=helpers.if.call(depth0,depth0&&depth0.popup,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){
return"popup"},data),data:data}))&&0!==stack1||(buffer+=stack1),buffer+='">\n    <span class="icon-',buffer+=escapeExpression(stack1=(helper=helpers.level)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.level)?helper.call(depth0,{hash:{},data:data}):helper)+'"></span>\n    <div>\n        ',options={hash:{},data:data},!(stack1=(helper=helpers.dompurify||depth0&&depth0.dompurify)?helper.call(depth0,depth0&&depth0.msg,options):helperMissing.call(depth0,"dompurify",depth0&&depth0.msg,options))&&0!==stack1||(buffer+=stack1),buffer+='\n    </div>\n    <span title="'+escapeExpression((options={hash:{},data:data},(
helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Close message",options):helperMissing.call(depth0,"__","Close message",options)))+'" class="icon-close" data-close=":parent .feedback"></span>\n</div>\n'});function tpl(data,options,asString){var html=Template(data,options);return html}var currents=[],levels=["info","success","warning","danger","error"],defaultOptions={timeout:{info:2e3,success:2e3,warning:4e3,danger:4e3,error:8e3},wrapLongWordsAfter:40,encodeHtml:!0,popup:!0};return function($container,config){if($container&&$container.length||($container=$$1("#feedback-box")),!$container.length)throw new TypeError(
"The feedback needs to belong to an existing container");return component({message:function(level,msg,params,options){var displayedMessage=msg;return level&&_.contains(levels,level)||(level="info"),_.isPlainObject(params)&&(options=params,params=[]),this.config=_.defaults(options||{},this.config),this.config.level=level,this.config.encodeHtml&&(displayedMessage=encode.html(displayedMessage)),this.config.wrapLongWordsAfter&&(displayedMessage=wrapLongWords(displayedMessage,this.config.wrapLongWordsAfter)),_.isArray(params)&&params.length&&(displayedMessage=format.apply(format,[displayedMessage].concat(params))),this.config.msg=displayedMessage,this},
info:function(msg,params,options){return this.message("info",msg,params,options).open()},success:function(msg,params,options){return this.message("success",msg,params,options).open()},warning:function(msg,params,options){return this.message("warning",msg,params,options).open()},danger:function(msg,params,options){return this.message("danger",msg,params,options).open()},error:function(msg,params,options){return this.message("error",msg,params,options).open()},open:function(){return _(currents).reject(this).invoke("close"),this.display()},close:function(){this.is("rendered")&&this.destroy()},display:function(){return this.is("rendered")?this.show(
):this.render($container),this}},defaultOptions).setTemplate(tpl).on("init",function(){this.config.id="feedback-"+(currents.length+1),currents.push(this),$container.trigger("create.feedback")}).on("render",function(){var self=this,$component=this.getElement(),$closer=$$1(".icon-close",$component),timeout=_.isPlainObject(this.config.timeout)?this.config.timeout[this.config.level]:this.config.timeout;$closer.off("click").on("click",function(e){e.preventDefault(),self.destroy()}),_.isNumber(timeout)&&0<timeout&&_.delay(function(){self.close()},timeout),$container.trigger("display.feedback")}).on("destroy",function(){$container.trigger("close.feedback"),
_.remove(currents,this)}).init(config)}}),define("taoDevTools/controller/fontConversion/fileUpload",["jquery","uikitLoader","ui/uploader","ui/feedback"],function($,ui,uploader,feedback){var container=$("#upload-container");container.uploader({uploadUrl:container.data("url")}),container.on("upload.uploader",function(e,file,interactionHook){feedback().success(interactionHook.success)}),container.on("fail.uploader",function(e,file,interactionHook){feedback().error(interactionHook.message)})}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/promise"),require("core/eventifier"),
require("lib/uuid")):"function"==typeof define&&define.amd?define("core/promiseQueue",["lodash","core/promise","core/eventifier","lib/uuid"],factory):(global=global||self)["core/promiseQueue"]=factory(global._,global["core/promise"],global["core/eventifier"],global["lib/uuid"])}(this,function(_,Promise,eventifier,uuid){"use strict";return _=_&&_.hasOwnProperty("default")?_.default:_,Promise=Promise&&Promise.hasOwnProperty("default")?Promise.default:Promise,eventifier=eventifier&&eventifier.hasOwnProperty("default")?eventifier.default:eventifier,uuid=uuid&&uuid.hasOwnProperty("default")?uuid.default:uuid,function(){function getId(){var id="promise-"+uuid(6)
;return void 0===queue[id]?id:getId()}var queue={};return{add:function(promise){return queue[getId()]=promise,this},getValues:function(){return _.values(queue)},clear:function(){return queue={},this},serie:function(promiseFn){var id=getId(),currentQueue=this.getValues(),emitter=eventifier();return queue[id]=new Promise(function(resolve){emitter.on("fulfilled",resolve)}),Promise.all(currentQueue).then(function(){if(_.isFunction(promiseFn))return promiseFn()}).then(function(data){return emitter.trigger("fulfilled"),delete queue[id],data}).catch(function(err){throw queue={},err})}}}}),function(global,factory){
"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/promise"),require("core/promiseQueue"),require("lib/uuid")):"function"==typeof define&&define.amd?define("core/store/localstorage",["lodash","core/promise","core/promiseQueue","lib/uuid"],factory):(global=global||self)["core/store/localstorage"]=factory(global._,global["core/promise"],global["core/promiseQueue"],global["lib/uuid"])}(this,function(_,Promise,promiseQueue,uuid){"use strict";_=_&&_.hasOwnProperty("default")?_.default:_,Promise=Promise&&Promise.hasOwnProperty("default")?Promise.default:Promise,
promiseQueue=promiseQueue&&promiseQueue.hasOwnProperty("default")?promiseQueue.default:promiseQueue,uuid=uuid&&uuid.hasOwnProperty("default")?uuid.default:uuid;var storage=window.localStorage,writingQueue=promiseQueue(),setEntry=function(storeName,key,value){return new Promise(function(resolve,reject){try{storage.setItem("tao-store-"+storeName+"."+key,JSON.stringify(value)),resolve(!0)}catch(ex){reject(ex)}})},getEntry=function(storeName,key){return new Promise(function(resolve,reject){var value;try{null===(value=storage.getItem("tao-store-"+storeName+"."+key))?resolve():resolve(JSON.parse(value))}catch(ex){reject(ex)}})},getKnownStores=function(){
return getEntry("index","stores")},localStorageBackend=function(storeName){var name,registered=!1,openStore=function(){return registered?Promise.resolve():function(storeName){return getKnownStores().then(function(stores){return(stores=stores||{})[storeName]={name:storeName,lastOpen:Date.now()},setEntry("index","stores",stores)})}(storeName).then(function(){registered=!0})};if(_.isEmpty(storeName)||!_.isString(storeName))throw new TypeError("The store name is required");return name="tao-store-"+storeName+".",{getItem:function(key){return writingQueue.serie(function(){return openStore().then(function(){return getEntry(storeName,key)})})},setItem:function(key,
value){return writingQueue.serie(function(){return openStore().then(function(){return setEntry(storeName,key,value)})})},removeItem:function(key){return writingQueue.serie(function(){return openStore().then(function(){return storage.removeItem(name+key),!0})})},getItems:function(){var keyPattern=new RegExp("^"+name);return writingQueue.serie(function(){return openStore().then(function(){return _(storage).map(function(entry,index){return storage.key(index)}).filter(function(key){return keyPattern.test(key)}).reduce(function(acc,key){var value,exposedKey=key.replace(name,"");try{null!==(value=storage.getItem(key))&&(acc[exposedKey]=JSON.parse(value))}catch(ex
){acc[exposedKey]=null}return acc},{})})})},clear:function(){var keyPattern=new RegExp("^"+name);return writingQueue.serie(function(){return openStore().then(function(){return _(storage).map(function(entry,index){return storage.key(index)}).filter(function(key){return keyPattern.test(key)}).forEach(function(key){storage.removeItem(key)}),!0})})},removeStore:function(){return this.clear().then(function(){return function(storeName){return getKnownStores().then(function(stores){return delete(stores=stores||{})[storeName],setEntry("index","stores",stores)})}(storeName)})}}};return localStorageBackend.removeAll=function(validate){return _.isFunction(validate)||(
validate=null),getKnownStores().then(function(stores){var removing=_(stores).filter(function(store,storeName){return!validate||validate(storeName,store)}).map(function(store){return store&&store.name?localStorageBackend(store.name).removeStore():Promise.resolve()}).value();return Promise.all(removing)})},localStorageBackend.getAll=function(validate){return getKnownStores().then(function(stores){return _(stores).filter(function(store,storeName){return!validate||validate(storeName,store)}).map(function(store){return store.name}).value()})},localStorageBackend.getStoreIdentifier=function(){var idStore=localStorageBackend("id");return idStore.getItem("id").then(
function(id){return _.isEmpty(id)?(id=uuid(),idStore.setItem("id",id).then(function(){return id})):id})},localStorageBackend}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/promise"),require("lib/uuid")):"function"==typeof define&&define.amd?define("core/store/indexeddb",["lodash","core/promise","lib/uuid"],factory):(global=global||self)["core/store/indexeddb"]=factory(global._,global["core/promise"],global["lib/uuid"])}(this,function(_,Promise,uuid){"use strict";_=_&&_.hasOwnProperty("default")?_.default:_,Promise=Promise&&Promise.hasOwnProperty("default"
)?Promise.default:Promise,uuid=uuid&&uuid.hasOwnProperty("default")?uuid.default:uuid;var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var module,knownStores,idbstore=(function(module){var definition,global;definition=function(){function defaultErrorHandler(error){throw error}function defaultSuccessHandler(){}function IDBStore(kwArgs,onStoreReady){for(var key in void 0===onStoreReady&&"function"==typeof kwArgs&&(onStoreReady=kwArgs),"[object Object]"!=Object.prototype.toString.call(kwArgs)&&(kwArgs={}),defaults
)this[key]=void 0!==kwArgs[key]?kwArgs[key]:defaults[key];this.dbName=this.storePrefix+this.storeName,this.dbVersion=parseInt(this.dbVersion,10)||1,onStoreReady&&(this.onStoreReady=onStoreReady);var env="object"==typeof window?window:self,availableImplementations=this.implementationPreference.filter(function(implName){return implName in env});this.implementation=availableImplementations[0],this.idb=env[this.implementation],this.keyRange=env.IDBKeyRange||env.webkitIDBKeyRange||env.mozIDBKeyRange,this.consts={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange",NEXT:"next",NEXT_NO_DUPLICATE:"nextunique",PREV:"prev",
PREV_NO_DUPLICATE:"prevunique"},this.openDB()}var defaults={storeName:"Store",storePrefix:"IDBWrapper-",dbVersion:1,keyPath:"id",autoIncrement:!0,onStoreReady:function(){},onError:defaultErrorHandler,indexes:[],implementationPreference:["indexedDB","webkitIndexedDB","mozIndexedDB","shimIndexedDB"]},proto={constructor:IDBStore,version:"1.7.0",db:null,dbName:null,dbVersion:null,store:null,storeName:null,storePrefix:null,keyPath:null,autoIncrement:null,indexes:null,implementationPreference:null,implementation:"",onStoreReady:null,onError:null,_insertIdCount:0,openDB:function(){var openRequest=this.idb.open(this.dbName,this.dbVersion),preventSuccessCallback=!1
;openRequest.onerror=function(error){var gotVersionErr=!1;"error"in error.target?gotVersionErr="VersionError"==error.target.error.name:"errorCode"in error.target&&(gotVersionErr=12==error.target.errorCode),gotVersionErr?this.onError(new Error("The version number provided is lower than the existing one.")):this.onError(error)}.bind(this),openRequest.onsuccess=function(event){if(!preventSuccessCallback)if(this.db)this.onStoreReady();else if(this.db=event.target.result,"string"!=typeof this.db.version)if(this.db.objectStoreNames.contains(this.storeName)){var emptyTransaction=this.db.transaction([this.storeName],this.consts.READ_ONLY)
;this.store=emptyTransaction.objectStore(this.storeName);var existingIndexes=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(indexData){var indexName=indexData.name;if(!indexName)return preventSuccessCallback=!0,void this.onError(new Error("Cannot create index: No index name given."));if(this.normalizeIndexData(indexData),this.hasIndex(indexName)){var actualIndex=this.store.index(indexName);this.indexComplies(actualIndex,indexData)||(preventSuccessCallback=!0,this.onError(new Error('Cannot modify index "'+indexName+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),existingIndexes.splice(
existingIndexes.indexOf(indexName),1)}else preventSuccessCallback=!0,this.onError(new Error('Cannot create new index "'+indexName+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))},this),existingIndexes.length&&(preventSuccessCallback=!0,this.onError(new Error('Cannot delete index(es) "'+existingIndexes.toString()+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),preventSuccessCallback||this.onStoreReady()}else this.onError(new Error("Object store couldn't be created."));else this.onError(new Error("The IndexedDB implementation in this browser is outdated. Please upgrade your browser."))}.bind(
this),openRequest.onupgradeneeded=function(event){if(this.db=event.target.result,this.db.objectStoreNames.contains(this.storeName))this.store=event.target.transaction.objectStore(this.storeName);else{var optionalParameters={autoIncrement:this.autoIncrement};null!==this.keyPath&&(optionalParameters.keyPath=this.keyPath),this.store=this.db.createObjectStore(this.storeName,optionalParameters)}var existingIndexes=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(indexData){var indexName=indexData.name;if(indexName||(preventSuccessCallback=!0,this.onError(new Error("Cannot create index: No index name given."))),this.normalizeIndexData(
indexData),this.hasIndex(indexName)){var actualIndex=this.store.index(indexName);this.indexComplies(actualIndex,indexData)||(this.store.deleteIndex(indexName),this.store.createIndex(indexName,indexData.keyPath,{unique:indexData.unique,multiEntry:indexData.multiEntry})),existingIndexes.splice(existingIndexes.indexOf(indexName),1)}else this.store.createIndex(indexName,indexData.keyPath,{unique:indexData.unique,multiEntry:indexData.multiEntry})},this),existingIndexes.length&&existingIndexes.forEach(function(_indexName){this.store.deleteIndex(_indexName)},this)}.bind(this)},deleteDatabase:function(onSuccess,onError){if(this.idb.deleteDatabase){this.db.close()
;var deleteRequest=this.idb.deleteDatabase(this.dbName);deleteRequest.onsuccess=onSuccess,deleteRequest.onerror=onError}else onError(new Error("Browser does not support IndexedDB deleteDatabase!"))},put:function(key,value,onSuccess,onError){null!==this.keyPath&&(onError=onSuccess,onSuccess=value,value=key),onError=onError||defaultErrorHandler,onSuccess=onSuccess||defaultSuccessHandler;var putRequest,hasSuccess=!1,result=null,putTransaction=this.db.transaction([this.storeName],this.consts.READ_WRITE);return putTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},putTransaction.onabort=onError,putTransaction.onerror=onError,(
putRequest=null!==this.keyPath?(this._addIdPropertyIfNeeded(value),putTransaction.objectStore(this.storeName).put(value)):putTransaction.objectStore(this.storeName).put(value,key)).onsuccess=function(event){hasSuccess=!0,result=event.target.result},putRequest.onerror=onError,putTransaction},get:function(key,onSuccess,onError){onError=onError||defaultErrorHandler,onSuccess=onSuccess||defaultSuccessHandler;var hasSuccess=!1,result=null,getTransaction=this.db.transaction([this.storeName],this.consts.READ_ONLY);getTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},getTransaction.onabort=onError,getTransaction.onerror=onError
;var getRequest=getTransaction.objectStore(this.storeName).get(key);return getRequest.onsuccess=function(event){hasSuccess=!0,result=event.target.result},getRequest.onerror=onError,getTransaction},remove:function(key,onSuccess,onError){onError=onError||defaultErrorHandler,onSuccess=onSuccess||defaultSuccessHandler;var hasSuccess=!1,result=null,removeTransaction=this.db.transaction([this.storeName],this.consts.READ_WRITE);removeTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},removeTransaction.onabort=onError,removeTransaction.onerror=onError;var deleteRequest=removeTransaction.objectStore(this.storeName).delete(key)
;return deleteRequest.onsuccess=function(event){hasSuccess=!0,result=event.target.result},deleteRequest.onerror=onError,removeTransaction},batch:function(dataArray,onSuccess,onError){if(onError=onError||defaultErrorHandler,onSuccess=onSuccess||defaultSuccessHandler,"[object Array]"!=Object.prototype.toString.call(dataArray))onError(new Error("dataArray argument must be of type Array."));else if(0===dataArray.length)return onSuccess(!0);var count=dataArray.length,called=!1,hasSuccess=!1,batchTransaction=this.db.transaction([this.storeName],this.consts.READ_WRITE);batchTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(hasSuccess)},
batchTransaction.onabort=onError,batchTransaction.onerror=onError;function onItemSuccess(){0!==--count||called||(hasSuccess=called=!0)}return dataArray.forEach(function(operation){function onItemError(err){batchTransaction.abort(),called||(called=!0,onError(err,type,key))}var type=operation.type,key=operation.key,value=operation.value;if("remove"==type){var deleteRequest=batchTransaction.objectStore(this.storeName).delete(key);deleteRequest.onsuccess=onItemSuccess,deleteRequest.onerror=onItemError}else if("put"==type){var putRequest;(putRequest=null!==this.keyPath?(this._addIdPropertyIfNeeded(value),batchTransaction.objectStore(this.storeName).put(value)
):batchTransaction.objectStore(this.storeName).put(value,key)).onsuccess=onItemSuccess,putRequest.onerror=onItemError}},this),batchTransaction},putBatch:function(dataArray,onSuccess,onError){var batchData=dataArray.map(function(item){return{type:"put",value:item}});return this.batch(batchData,onSuccess,onError)},upsertBatch:function(dataArray,options,onSuccess,onError){"function"==typeof options&&(onError=onSuccess=options,options={}),onError=onError||defaultErrorHandler,onSuccess=onSuccess||defaultSuccessHandler,options=options||{},"[object Array]"!=Object.prototype.toString.call(dataArray)&&onError(new Error("dataArray argument must be of type Array."))
;var keyField=options.keyField||this.keyPath,count=dataArray.length,called=!1,hasSuccess=!1,index=0,batchTransaction=this.db.transaction([this.storeName],this.consts.READ_WRITE);batchTransaction.oncomplete=function(){hasSuccess?onSuccess(dataArray):onError(!1)},batchTransaction.onabort=onError,batchTransaction.onerror=onError;function onItemSuccess(event){dataArray[index++][keyField]=event.target.result,0!==--count||called||(hasSuccess=called=!0)}return dataArray.forEach(function(record){var putRequest,key=record.key;(putRequest=null!==this.keyPath?(this._addIdPropertyIfNeeded(record),batchTransaction.objectStore(this.storeName).put(record)
):batchTransaction.objectStore(this.storeName).put(record,key)).onsuccess=onItemSuccess,putRequest.onerror=function(err){batchTransaction.abort(),called||(called=!0,onError(err))}},this),batchTransaction},removeBatch:function(keyArray,onSuccess,onError){var batchData=keyArray.map(function(key){return{type:"remove",key:key}});return this.batch(batchData,onSuccess,onError)},getBatch:function(keyArray,onSuccess,onError,arrayType){if(onError=onError||defaultErrorHandler,onSuccess=onSuccess||defaultSuccessHandler,arrayType=arrayType||"sparse","[object Array]"!=Object.prototype.toString.call(keyArray))onError(new Error("keyArray argument must be of type Array.")
);else if(0===keyArray.length)return onSuccess([]);var data=[],count=keyArray.length,hasSuccess=!1,result=null,batchTransaction=this.db.transaction([this.storeName],this.consts.READ_ONLY);batchTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},batchTransaction.onabort=onError,batchTransaction.onerror=onError;function onItemSuccess(event){event.target.result||"dense"==arrayType?data.push(event.target.result):"sparse"==arrayType&&data.length++,0===--count&&(hasSuccess=!0,result=data)}return keyArray.forEach(function(key){var getRequest=batchTransaction.objectStore(this.storeName).get(key);getRequest.onsuccess=onItemSuccess,
getRequest.onerror=function(err){onError(result=err),batchTransaction.abort()}},this),batchTransaction},getAll:function(onSuccess,onError){onError=onError||defaultErrorHandler,onSuccess=onSuccess||defaultSuccessHandler;var getAllTransaction=this.db.transaction([this.storeName],this.consts.READ_ONLY),store=getAllTransaction.objectStore(this.storeName);return store.getAll?this._getAllNative(getAllTransaction,store,onSuccess,onError):this._getAllCursor(getAllTransaction,store,onSuccess,onError),getAllTransaction},_getAllNative:function(getAllTransaction,store,onSuccess,onError){var hasSuccess=!1,result=null;getAllTransaction.oncomplete=function(){(
hasSuccess?onSuccess:onError)(result)},getAllTransaction.onabort=onError,getAllTransaction.onerror=onError;var getAllRequest=store.getAll();getAllRequest.onsuccess=function(event){hasSuccess=!0,result=event.target.result},getAllRequest.onerror=onError},_getAllCursor:function(getAllTransaction,store,onSuccess,onError){var all=[],hasSuccess=!1,result=null;getAllTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},getAllTransaction.onabort=onError,getAllTransaction.onerror=onError;var cursorRequest=store.openCursor();cursorRequest.onsuccess=function(event){var cursor=event.target.result;cursor?(all.push(cursor.value),cursor.continue()):(
hasSuccess=!0,result=all)},cursorRequest.onError=onError},clear:function(onSuccess,onError){onError=onError||defaultErrorHandler,onSuccess=onSuccess||defaultSuccessHandler;var hasSuccess=!1,result=null,clearTransaction=this.db.transaction([this.storeName],this.consts.READ_WRITE);clearTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},clearTransaction.onabort=onError,clearTransaction.onerror=onError;var clearRequest=clearTransaction.objectStore(this.storeName).clear();return clearRequest.onsuccess=function(event){hasSuccess=!0,result=event.target.result},clearRequest.onerror=onError,clearTransaction},_addIdPropertyIfNeeded:function(
dataObj){void 0===dataObj[this.keyPath]&&(dataObj[this.keyPath]=this._insertIdCount+++Date.now())},getIndexList:function(){return this.store.indexNames},hasIndex:function(indexName){return this.store.indexNames.contains(indexName)},normalizeIndexData:function(indexData){indexData.keyPath=indexData.keyPath||indexData.name,indexData.unique=!!indexData.unique,indexData.multiEntry=!!indexData.multiEntry},indexComplies:function(actual,expected){return["keyPath","unique","multiEntry"].every(function(key){if("multiEntry"==key&&void 0===actual[key]&&!1===expected[key])return!0;if("keyPath"!=key||"[object Array]"!=Object.prototype.toString.call(expected[key])
)return expected[key]==actual[key];var exp=expected.keyPath,act=actual.keyPath;if("string"==typeof act)return exp.toString()==act;if("function"!=typeof act.contains&&"function"!=typeof act.indexOf)return!1;if(act.length!==exp.length)return!1;for(var i=0,m=exp.length;i<m;i++)if(!(act.contains&&act.contains(exp[i])||act.indexOf(-1!==exp[i])))return!1;return!0})},iterate:function(onItem,options){var directionType="desc"==(options=mixin({index:null,order:"ASC",autoContinue:!0,filterDuplicates:!1,keyRange:null,writeAccess:!1,onEnd:null,onError:defaultErrorHandler,limit:1/0,offset:0,allowItemRejection:!1},options||{})).order.toLowerCase()?"PREV":"NEXT"
;options.filterDuplicates&&(directionType+="_NO_DUPLICATE");var hasSuccess=!1,cursorTransaction=this.db.transaction([this.storeName],this.consts[options.writeAccess?"READ_WRITE":"READ_ONLY"]),cursorTarget=cursorTransaction.objectStore(this.storeName);options.index&&(cursorTarget=cursorTarget.index(options.index));var recordCount=0;cursorTransaction.oncomplete=function(){hasSuccess?options.onEnd?options.onEnd():onItem(null):options.onError(null)},cursorTransaction.onabort=options.onError,cursorTransaction.onerror=options.onError;var cursorRequest=cursorTarget.openCursor(options.keyRange,this.consts[directionType]);return cursorRequest.onerror=options.onError,
cursorRequest.onsuccess=function(event){var cursor=event.target.result;if(cursor)if(options.offset)cursor.advance(options.offset),options.offset=0;else{var onItemReturn=onItem(cursor.value,cursor,cursorTransaction);options.allowItemRejection&&!1===onItemReturn||recordCount++,options.autoContinue&&(recordCount+options.offset<options.limit?cursor.continue():hasSuccess=!0)}else hasSuccess=!0},cursorTransaction},query:function(onSuccess,options){var result=[],processedItems=0;return(options=options||{}).autoContinue=!0,options.writeAccess=!1,options.allowItemRejection=!!options.filter,options.onEnd=function(){onSuccess(result,processedItems)},this.iterate(
function(item){processedItems++;var accept=!options.filter||options.filter(item);return!1!==accept&&result.push(item),accept},options)},count:function(onSuccess,options){var onError=(options=mixin({index:null,keyRange:null},options||{})).onError||defaultErrorHandler,hasSuccess=!1,result=null,cursorTransaction=this.db.transaction([this.storeName],this.consts.READ_ONLY);cursorTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},cursorTransaction.onabort=onError,cursorTransaction.onerror=onError;var cursorTarget=cursorTransaction.objectStore(this.storeName);options.index&&(cursorTarget=cursorTarget.index(options.index))
;var countRequest=cursorTarget.count(options.keyRange);return countRequest.onsuccess=function(evt){hasSuccess=!0,result=evt.target.result},countRequest.onError=onError,cursorTransaction},makeKeyRange:function(options){var keyRange,hasLower=void 0!==options.lower,hasUpper=void 0!==options.upper;switch(!0){case void 0!==options.only:keyRange=this.keyRange.only(options.only);break;case hasLower&&hasUpper:keyRange=this.keyRange.bound(options.lower,options.upper,options.excludeLower,options.excludeUpper);break;case hasLower:keyRange=this.keyRange.lowerBound(options.lower,options.excludeLower);break;case hasUpper:keyRange=this.keyRange.upperBound(options.upper,
options.excludeUpper);break;default:throw new Error('Cannot create KeyRange. Provide one or both of "lower" or "upper" value, or an "only" value.')}return keyRange}},empty={};function mixin(target,source){var name,s;for(name in source)(s=source[name])!==empty[name]&&s!==target[name]&&(target[name]=s);return target}return IDBStore.prototype=proto,IDBStore.version=proto.version,IDBStore},global=commonjsGlobal,module.exports?module.exports=definition():global.IDBStore=definition()}(module={exports:{}},module.exports),module.exports),isIndexedDB2="undefined"!=typeof IDBObjectStore&&"getAll"in IDBObjectStore.prototype,openStore=function(storeName){
return new Promise(function(resolve,reject){var store=new idbstore({dbVersion:1,storeName:storeName,storePrefix:"tao-store-",keyPath:"key",autoIncrement:!0,onStoreReady:function(){store.db.onversionchange=function(e){e&&e.newVersion||store.db.close()},resolve(store)},onError:reject})})},setEntry=function(store,key,value){return new Promise(function(resolve,reject){var entry={key:key,value:value};store.put(entry,function(returnKey){resolve(returnKey===key)},reject)})},getEntry=function(store,key){return new Promise(function(resolve,reject){store.get(key,function(entry){if(!entry||void 0===entry.value)return resolve(entry);resolve(entry.value)},reject)})},
removeEntry=function(store,key){return new Promise(function(resolve,reject){store.remove(key,function(result){resolve(!1!==result)},reject)})},getKnownStores=function(){return knownStores=knownStores||openStore("index")},deleteStore=function(store,storeName){return new Promise(function(resolve,reject){var success=function(){(function(storeName){return getKnownStores().then(function(store){return removeEntry(store,storeName)})})(storeName).then(function(){resolve(!0)}).catch(reject)};isIndexedDB2?store.deleteDatabase(success,reject):store.clear(success,reject)})},indexDbBackend=function(storeName){var innerStore,writePromise,getStore=function(){
return innerStore=innerStore||openStore(storeName).then(function(store){return function(storeName){return getKnownStores().then(function(store){return setEntry(store,storeName,{name:storeName,lastOpen:Date.now()})})}(storeName).then(function(){return Promise.resolve(store)})})},ensureSerie=function(getWritingPromise){return writePromise?new Promise(function(resolve,reject){function runWrite(){var p=getWritingPromise();(writePromise=p).then(resolve).catch(reject)}writePromise.then(runWrite).catch(runWrite)}):writePromise=getWritingPromise()};if(_.isEmpty(storeName)||!_.isString(storeName))throw new TypeError("The store name is required");return{
getItem:function(key){return ensureSerie(function(){return getStore().then(function(store){return getEntry(store,key)})})},setItem:function(key,value){return ensureSerie(function(){return getStore().then(function(store){return setEntry(store,key,value)})})},removeItem:function(key){return ensureSerie(function(){return getStore().then(function(store){return removeEntry(store,key)})})},getItems:function(){return ensureSerie(function(){return getStore().then(function(store){return function(store){return new Promise(function(resolve,reject){store.getAll(function(entries){if(!_.isArray(entries))return resolve({});resolve(_.reduce(entries,function(acc,entry){
return entry.key&&entry.value&&(acc[entry.key]=entry.value),acc},{}))},reject)})}(store)})})},clear:function(){return ensureSerie(function(){return getStore().then(function(store){return new Promise(function(resolve,reject){store.clear(function(){resolve(!0)},reject)})})})},removeStore:function(){return ensureSerie(function(){return getStore().then(function(store){return deleteStore(store,storeName)})})}}};return indexDbBackend.removeAll=function(validate){return _.isFunction(validate)||(validate=null),getKnownStores().then(function(store){return new Promise(function(resolve,reject){store.getAll(function(entries){var all=[];_.forEach(entries,function(entry){
var storeName=entry&&entry.key;storeName&&all.push(openStore(storeName).then(function(storeToRemove){if(!validate||validate(storeName,entry.value))return deleteStore(storeToRemove,storeName)}))}),Promise.all(all).then(resolve).catch(reject)},reject)})})},indexDbBackend.getAll=function(validate){return _.isFunction(validate)||(validate=function(){return!0}),getKnownStores().then(function(store){return new Promise(function(resolve,reject){store.getAll(function(entries){var storeNames=_(entries).filter(function(entry){return entry&&entry.key&&validate(entry.key,entry.value)}).map(function(entry){return entry.key}).value();return resolve(storeNames)},reject)})})
},indexDbBackend.getStoreIdentifier=function(){return openStore("id").then(function(store){return getEntry(store,"id").then(function(id){return _.isEmpty(id)?(id=uuid(),setEntry(store,"id",id).then(function(){return id})):id})})},indexDbBackend}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/promise"),require("lib/uuid")):"function"==typeof define&&define.amd?define("core/store/memory",["lodash","core/promise","lib/uuid"],factory):(global=global||self)["core/store/memory"]=factory(global._,global["core/promise"],global["lib/uuid"])}(this,function(_,Promise,uuid){
"use strict";_=_&&_.hasOwnProperty("default")?_.default:_,Promise=Promise&&Promise.hasOwnProperty("default")?Promise.default:Promise,uuid=uuid&&uuid.hasOwnProperty("default")?uuid.default:uuid;var idStore,memoryStore={},memoryStorageBackend=function(storeName){if(_.isEmpty(storeName)||!_.isString(storeName))throw new TypeError("The store name is required");return memoryStore[storeName]=memoryStore[storeName]||{},{getItem:function(key){return _.isPlainObject(memoryStore[storeName])?Promise.resolve(memoryStore[storeName][key]):Promise.resolve()},setItem:function(key,value){return _.isPlainObject(memoryStore[storeName])||(memoryStore[storeName]={}),
memoryStore[storeName][key]=value,Promise.resolve(!0)},removeItem:function(key){return memoryStore[storeName]=_.omit(memoryStore[storeName],key),Promise.resolve(void 0===memoryStore[storeName][key])},getItems:function(){return Promise.resolve(memoryStore[storeName])},clear:function(){return memoryStore[storeName]={},Promise.resolve(!0)},removeStore:function(){return memoryStore=_.omit(memoryStore,storeName),Promise.resolve(void 0===memoryStore[storeName])}}};return memoryStorageBackend.removeAll=function(validate){return _.isFunction(validate)||(validate=null),memoryStore=_.omit(memoryStore,function(store,storeName){return!validate||validate(storeName)}),
Promise.resolve(!0)},memoryStorageBackend.getAll=function(validate){var storeNames;return _.isFunction(validate)||(validate=null),storeNames=_(memoryStore).map(function(store,storeName){return storeName}).filter(function(storeName){return!validate||validate(storeName)}).value(),Promise.resolve(storeNames)},memoryStorageBackend.getStoreIdentifier=function(){return _.isEmpty(idStore)&&(idStore=uuid()),Promise.resolve(idStore)},memoryStorageBackend}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("moment"),require("module"),require("core/logger"),require("core/promise"),require(
"core/store/localstorage"),require("core/store/indexeddb"),require("core/store/memory")):"function"==typeof define&&define.amd?define("core/store",["lodash","moment","module","core/logger","core/promise","core/store/localstorage","core/store/indexeddb","core/store/memory"],factory):(global=global||self)["core/store"]=factory(global._,global.moment,global.module,global["core/logger"],global["core/promise"],global["core/store/localstorage"],global["core/store/indexeddb"],global["core/store/memory"])}(this,function(_,moment,module,loggerFactory,Promise,localStorageBackend,indexedDBBackend,memoryBackend){"use strict";_=_&&_.hasOwnProperty("default")?_.default:_,
moment=moment&&moment.hasOwnProperty("default")?moment.default:moment,module=module&&module.hasOwnProperty("default")?module.default:module,loggerFactory=loggerFactory&&loggerFactory.hasOwnProperty("default")?loggerFactory.default:loggerFactory,Promise=Promise&&Promise.hasOwnProperty("default")?Promise.default:Promise,localStorageBackend=localStorageBackend&&localStorageBackend.hasOwnProperty("default")?localStorageBackend.default:localStorageBackend,indexedDBBackend=indexedDBBackend&&indexedDBBackend.hasOwnProperty("default")?indexedDBBackend.default:indexedDBBackend,memoryBackend=memoryBackend&&memoryBackend.hasOwnProperty("default"
)?memoryBackend.default:memoryBackend;var store,supportsIndexedDB=!1,dectectionDone=!1,quotaChecked=!1,backendApi=["removeAll","getAll","getStoreIdentifier"],storeApi=["getItem","setItem","removeItem","getItems","clear","removeStore"],logger=loggerFactory("core/store"),config=_.defaults(module.config()||{},{lowSpaceRatio:80,invalidation:{staled:"P2W",oldster:"P2M"}}),isIndexDBSupported=function(){return dectectionDone?Promise.resolve(supportsIndexedDB):new Promise(function(resolve){var test,indexedDB,done=function(result){return dectectionDone=!0,resolve(supportsIndexedDB=!!result)};try{if(!(
indexedDB=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB))return done(!1);(test=indexedDB.open("__feature_test",1)).onsuccess=function(){if(test.result)return test.result.close(),done(!0)},test.onerror=function(e){return e.preventDefault(),done(!1),!1}}catch(err){done(!1)}})},loadBackend=function(preselectedBackend){return isIndexDBSupported().then(function(){var backend=preselectedBackend||(supportsIndexedDB?indexedDBBackend:localStorageBackend);return _.isFunction(backend)?function(backend){return _.all(backendApi,function(method){return _.isFunction(backend[method])})}(backend)?(
backend!==memoryBackend&&(!quotaChecked&&"storage"in window.navigator&&window.navigator.storage.estimate&&window.navigator.storage.estimate().then(function(estimate){var usedRatio=0;_.isNumber(estimate.usage)&&_.isNumber(estimate.quota)&&0<estimate.quota&&((usedRatio=estimate.usage/estimate.quota)>config.lowSpaceRatio?(logger.warn("The browser storage is getting low "+usedRatio.toFixed(2)+"% used",estimate),logger.warn("We will attempt to clean oldster databases in persistent backends"),store.cleanUpSpace(config.invalidation.oldster,[],localStorageBackend),store.cleanUpSpace(config.invalidation.oldster,[],indexedDBBackend)):logger.debug(
"Browser storage estimate : "+usedRatio.toFixed(2)+"% used",estimate))}).catch(function(err){logger.warn("Unable to retrieve quotas : "+err.message)}),quotaChecked=!0),backend):Promise.reject(new TypeError("This backend doesn't comply with the store backend API")):Promise.reject(new TypeError("No backend, no storage!"))})};return(store=function(storeName,preselectedBackend){return loadBackend(preselectedBackend).then(function(backend){var storeInstance=backend(storeName);return function(storage){return _.all(storeApi,function(method){return _.isFunction(storage[method])})}(storeInstance)?storeInstance:Promise.reject(new TypeError(
"The store doesn't comply with the Storage interface"))})}).backends={localStorage:localStorageBackend,indexedDB:indexedDBBackend,memory:memoryBackend},store.removeAll=function(validate,preselectedBackend){return loadBackend(preselectedBackend).then(function(backend){return backend.removeAll(validate)})},store.cleanUpSpace=function(since,storeNamePattern,preselectedBackend){var tsThreshold;return tsThreshold=_.isNumber(since)&&0<since?since:(_.isString(since)||(since=config.invalidation.oldster),moment().subtract(moment.duration(since)).valueOf()),logger.info("Trying to remove stores lastly opened before "+tsThreshold+"("+since+")"),store.removeAll(function(
storeName,storeEntry){return!(!storeName||!storeEntry)&&(!(storeNamePattern instanceof RegExp&&!storeNamePattern.test(storeName))&&(_.isNumber(storeEntry.lastOpen)&&_.isNumber(tsThreshold)&&storeEntry.lastOpen<=tsThreshold))},preselectedBackend)},store.getAll=function(validate,preselectedBackend){return loadBackend(preselectedBackend).then(function(backend){return backend.getAll(validate)})},store.getIdentifier=function(preselectedBackend){return loadBackend(preselectedBackend).then(function(backend){return backend.getStoreIdentifier()})},store}),define("ui/hider",["jquery","core/eventifier"],function($,eventifier){"use strict";$=$&&$.hasOwnProperty(
"default")?$.default:$;function jqWrap(element){return element instanceof $?element:$(element)}return{show:function(element){return jqWrap(element).removeClass("hidden")},hide:function(element){return jqWrap(element).addClass("hidden")},toggle:function(element,state){return void 0!==state&&(state=!state),jqWrap(element).toggleClass("hidden",state)},isHidden:function(element,real){var $elt=jqWrap(element);return real?$elt.hasClass("hidden")||"none"===$elt.css("display")||"hidden"===$elt.css("visibility"):$elt.hasClass("hidden")}}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require(
"util/shortcut/registry")):"function"==typeof define&&define.amd?define("util/shortcut",["util/shortcut/registry"],factory):(global=global||self)["util/shortcut"]=factory(global["util/shortcut/registry"])}(this,function(shortcutRegistry){"use strict";return(shortcutRegistry=shortcutRegistry&&shortcutRegistry.hasOwnProperty("default")?shortcutRegistry.default:shortcutRegistry)(window,{propagate:!1,prevent:!0})}),define("json!taoDevTools/controller/KeyChecker/shortcuts.json",function(){return[{label:"<Meta>+C",shortcut:"Meta+C",platform:"mac",browser:"all",description:"Copy to clipboard.",playground:!0},{label:"<Meta>+V",shortcut:"Meta+V",platform:"mac",
browser:"all",description:"Paste from clipboard.",playground:!0},{label:"<Meta>+<Alt>+V",shortcut:"Meta+Alt+V",platform:"mac",browser:"all",description:"Paste Style",playground:!0},{label:"<Meta>+<Shift>+<Alt>+V",shortcut:"Meta+Shift+Alt+V",platform:"mac",browser:"all",description:"Paste and Match Style",playground:!0},{label:"<Meta>+X",shortcut:"Meta+X",platform:"mac",browser:"all",description:"Cut to the clipboard",playground:!0},{label:"<Meta>+:",shortcut:"Meta+:",platform:"mac",browser:"all",description:"Show / Hide Spelling and Grammar",playground:!1},{label:"<Ctrl>+F3",shortcut:"Ctrl+F3",platform:"mac",browser:"all",
description:"Opens windows menu / dock.",playground:!1},{label:"<Ctrl>+F2",shortcut:"Ctrl+F2",platform:"mac",browser:"all",description:"Activate Menu",playground:!1},{label:"<Ctrl>+F8",shortcut:"Ctrl+F8",platform:"mac",browser:"all",description:"Active Menu Extras",playground:!1},{label:"<Shift>+<Meta>+Right",shortcut:"Shift+Meta+Right",platform:"mac",browser:"all",description:"Switch Applications",playground:!1},{label:"<Meta>+<Alt>+W",shortcut:"Meta+Alt+W",platform:"mac",browser:"all",description:"Close application",playground:!1},{label:"<Meta>+<Shift>+3",shortcut:"Meta+Shift+3",platform:"mac",browser:"all",description:"Take screenshot (entire screen)",
playground:!1},{label:"<Meta>+<Shift>+4",shortcut:"Meta+Shift+4",platform:"mac",browser:"all",description:"Take screenshot (partial / active window)",playground:!1},{label:"<Meta>+<Shift>+W",shortcut:"Meta+Shift+W",platform:"mac",browser:"all",description:"Closes the current window.",playground:!1},{label:"<Meta>+M",shortcut:"Meta+M",platform:"mac",browser:"all",description:"Minimizes the window.",playground:!1},{label:"<Meta>+<Alt>+M",shortcut:"Meta+Alt+M",platform:"mac",browser:"all",description:"Minimize (All)",playground:!1},{label:"backspace",shortcut:"backspace",platform:"mac",browser:"chrome",
description:"Goes to the previous page in your browsing history for the tab.",playground:!1},{label:"<Meta>+[",shortcut:"Meta+[",platform:"mac",browser:"chrome",description:"Goes to the previous page in your browsing history for the tab",playground:!1},{label:"<Meta>+]",shortcut:"Meta+]",platform:"mac",browser:"chrome",description:"Goes to the next page in your browsing history for the tab.",playground:!1},{label:"<Meta>+<Shift>+?",shortcut:"Meta+Shift+?",platform:"mac",browser:"chrome",description:"Browser Help",playground:!1},{label:"<Meta>+<Ctrl>+F",shortcut:"Meta+Ctrl+F",platform:"mac",browser:"chrome",
description:"Opens or Exits current page in full-screen mode. (TAO will enforce full screen.)",playground:!1},{label:"<Meta>+1",shortcut:"Meta+1",platform:"mac",browser:"chrome",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Meta>+2",shortcut:"Meta+2",platform:"mac",browser:"chrome",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Meta>+3",shortcut:"Meta+3",platform:"mac",browser:"chrome",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Meta>+4",shortcut:"Meta+4",platform:"mac",
browser:"chrome",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Meta>+5",shortcut:"Meta+5",platform:"mac",browser:"chrome",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Meta>+6",shortcut:"Meta+6",platform:"mac",browser:"chrome",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Meta>+7",shortcut:"Meta+7",platform:"mac",browser:"chrome",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Meta>+8",shortcut:"Meta+8",
platform:"mac",browser:"chrome",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Meta>+9",shortcut:"Meta+9",platform:"mac",browser:"chrome",description:"Switches to the last tab.",playground:!1},{label:"<Meta>+D",shortcut:"Meta+D",platform:"mac",browser:"chrome",description:"Saves your current webpage as a bookmark.",playground:!1},{label:"<Meta>+F",shortcut:"Meta+F",platform:"mac",browser:"chrome",description:"Opens the find bar.",playground:!1},{label:"<Meta>+G",shortcut:"Meta+G",platform:"mac",browser:"chrome",description:"Finds the next match for your input in the find bar.",playground:!1},{
label:"<Meta>+Y",shortcut:"Meta+Y",platform:"mac",browser:"chrome",description:"Opens the History page.",playground:!1},{label:"<Meta>+<Shift>+J",shortcut:"Meta+Shift+J",platform:"mac",browser:"chrome",description:"Opens the Downloads page.",playground:!1},{label:"<Meta>+L",shortcut:"Meta+L",platform:"mac",browser:"chrome",description:"Highlights the URL. (Appears not to work in Full Screen Mode)",playground:!0},{label:"<Meta>+N",shortcut:"Meta+N",platform:"mac",browser:"chrome",description:"Opens a new window.",playground:!1},{label:"<Meta>+O",shortcut:"Meta+O",platform:"mac",browser:"chrome",description:"Opens a file from your computer in Google Chrome.",
playground:!1},{label:"<Meta>+P",shortcut:"Meta+P",platform:"mac",browser:"chrome",description:"Prints your current page.",playground:!1},{label:"<Meta>+Q",shortcut:"Meta+Q",platform:"mac",browser:"chrome",description:"Quits Google Chrome.",playground:!1},{label:"<Meta>+R",shortcut:"Meta+R",platform:"mac",browser:"chrome",description:"Reloads your current page.",playground:!1},{label:"<Meta>+S",shortcut:"Meta+S",platform:"mac",browser:"chrome",description:"Saves your current page.",playground:!1},{label:"<Meta>+T",shortcut:"Meta+T",platform:"mac",browser:"chrome",description:"Opens a new tab.",playground:!1},{label:"<Meta>+<Alt>+U",shortcut:"Meta+Alt+U",
platform:"mac",browser:"chrome",description:"Opens the source of your current page.",playground:!1},{label:"<Meta>+W",shortcut:"Meta+W",platform:"mac",browser:"chrome",description:"Closes the current tab or pop-up.",playground:!1},{label:"<Meta>+<Shift>+B",shortcut:"Meta+Shift+B",platform:"mac",browser:"chrome",description:"Toggles the bookmarks bar on and off.  (Appears not to work in Full Screen Mode)",playground:!1},{label:"<Meta>+<Alt>+C",shortcut:"Meta+Alt+C",platform:"mac",browser:"chrome",description:"Open / switch from inspect element mode and browser window",playground:!1},{label:"<Meta>+<Shift>+D",shortcut:"Meta+Shift+D",platform:"mac",
browser:"chrome",description:"Saves all open pages as bookmarks in a new folder.",playground:!1},{label:"<Meta>+<Shift>+G",shortcut:"Meta+Shift+G",platform:"mac",browser:"chrome",description:"Finds the previous match for your input in the find bar.",playground:!1},{label:"<Meta>+<Alt>+I",shortcut:"Meta+Alt+I",platform:"mac",browser:"chrome",description:"Opens Developer Tools.",playground:!1},{label:"<Meta>+<Alt>+J",shortcut:"Meta+Alt+J",platform:"mac",browser:"chrome",description:"Open Developer Tools and bring focus to the console",playground:!1},{label:"<Meta>+<Shift>+M",shortcut:"Meta+Shift+M",platform:"mac",browser:"chrome",
description:"Switch between multiple users.",playground:!1},{label:"<Meta>+<Shift>+N",shortcut:"Meta+Shift+N",platform:"mac",browser:"chrome",description:"Opens a new window in incognito mode.",playground:!1},{label:"<Meta>+<Alt>+B",shortcut:"Meta+Alt+B",platform:"mac",browser:"chrome",description:"Opens the bookmark manager.",playground:!1},{label:"<Meta>+<Shift>+T",shortcut:"Meta+Shift+T",platform:"mac",browser:"chrome",description:"Reopens the last tab you've closed.",playground:!1},{label:"<Meta>+<Shift>+W",shortcut:"Meta+Shift+W",platform:"mac",browser:"chrome",description:"Close Window",playground:!1},{label:"<Meta>+H",shortcut:"Meta+H",platform:"mac",
browser:"chrome",description:"Hides Google Chrome.",playground:!1},{label:"<Meta>+<Alt>+H",shortcut:"Meta+Alt+H",platform:"mac",browser:"chrome",description:"Hides all other windows.",playground:!1},{label:"<Meta>+<Shift>+H",shortcut:"Meta+Shift+H",platform:"mac",browser:"chrome",description:"Opens your home page in your current tab.",playground:!1},{label:"<Meta>+<Shift>+I",shortcut:"Meta+Shift+I",platform:"mac",browser:"chrome",description:"Emails your current page.",playground:!1},{label:"<Meta>+<Shift>+P",shortcut:"Meta+Shift+P",platform:"mac",browser:"chrome",description:"Opens the Page Setup dialog.",playground:!1},{label:"<Meta>+,",shortcut:"Meta+,",
platform:"mac",browser:"chrome",description:"Opens the Settings page.",playground:!1},{label:"<Meta>+E",shortcut:"Meta+E",platform:"mac",browser:"chrome",description:"Uses selection for find",playground:!1},{label:"<Alt>+F4",shortcut:"Alt+F4",platform:"mac",browser:"chrome",description:"Close Window",playground:!1},{label:"<Meta>+<Shift>+Delete",shortcut:"Meta+Shift+Delete",platform:"mac",browser:"chrome",description:"Opens the Clear Browsing Data dialog.",playground:!1},{label:"<Meta>+<Alt>+Right",shortcut:"Meta+Alt+Right",platform:"mac",browser:"chrome",description:"Switches to the next tab.",playground:!1},{label:"<Meta>+<Alt>+Left",
shortcut:"Meta+Alt+Left",platform:"mac",browser:"chrome",description:"Switches to the previous tab.",playground:!1},{label:"<Ctrl>+pagedown",shortcut:"Ctrl+pagedown",platform:"mac",browser:"chrome",description:"Switches to the next tab.",playground:!1},{label:"<Ctrl>+pageup",shortcut:"Ctrl+pageup",platform:"mac",browser:"chrome",description:"Switches to the previous tab.",playground:!1},{label:"<Alt>+home",shortcut:"Alt+home",platform:"mac",browser:"chrome",description:"Open Home Page",playground:!1},{label:"<Meta>+LeftMouseClick",shortcut:"Meta+LeftMouseClick",platform:"mac",browser:"chrome",description:"Opens the link in a new tab in the background.",
playground:!0},{label:"<Meta>+<Shift>+LeftMouseClick",shortcut:"Meta+Shift+LeftMouseClick",platform:"mac",browser:"chrome",description:"Opens the link in a new tab in the background.",playground:!0},{label:"<Shift>+LeftMouseClick",shortcut:"Shift+LeftMouseClick",platform:"mac",browser:"chrome",description:"Opens the link in a new window.",playground:!0},{label:"Right Click",shortcut:"Right Click",platform:"mac",browser:"chrome",description:"Context Menu",playground:!1},{label:"<Alt>+LeftMouseClick",shortcut:"Alt+LeftMouseClick",platform:"mac",browser:"chrome",description:"Downloads the target of the link.",playground:!0},{label:"esc",shortcut:"esc",
platform:"mac",browser:"firefox",description:"Stop Loading",playground:!1},{label:"<Meta>+.",shortcut:"Meta+.",platform:"mac",browser:"firefox",description:"Stop Loading",playground:!1},{label:"F5",shortcut:"F5",platform:"mac",browser:"firefox",description:"Reloads your current page.",playground:!1},{label:"<Meta>+1",shortcut:"Meta+1",platform:"mac",browser:"firefox",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Meta>+2",shortcut:"Meta+2",platform:"mac",browser:"firefox",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Meta>+3",
shortcut:"Meta+3",platform:"mac",browser:"firefox",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Meta>+4",shortcut:"Meta+4",platform:"mac",browser:"firefox",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Meta>+5",shortcut:"Meta+5",platform:"mac",browser:"firefox",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Meta>+6",shortcut:"Meta+6",platform:"mac",browser:"firefox",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{
label:"<Meta>+7",shortcut:"Meta+7",platform:"mac",browser:"firefox",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Meta>+8",shortcut:"Meta+8",platform:"mac",browser:"firefox",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Meta>+9",shortcut:"Meta+9",platform:"mac",browser:"firefox",description:"Switches to the last tab.",playground:!1},{label:"<Meta>+B",shortcut:"Meta+B",platform:"mac",browser:"firefox",description:"Bookmarks Sidebar (toggle)",playground:!1},{label:"<Meta>+D",shortcut:"Meta+D",platform:"mac",browser:"firefox",
description:"Add bookmark",playground:!1},{label:"<Meta>+F",shortcut:"Meta+F",platform:"mac",browser:"firefox",description:"Find in This Page",playground:!1},{label:"<Meta>+G",shortcut:"Meta+G",platform:"mac",browser:"firefox",description:"Find Again",playground:!1},{label:"<Meta>+<Shift>+H",shortcut:"Meta+Shift+H",platform:"mac",browser:"firefox",description:"Browsing History (toggle)",playground:!1},{label:"<Meta>+J",shortcut:"Meta+J",platform:"mac",browser:"firefox",description:"Download History",playground:!1},{label:"<Meta>+K",shortcut:"Meta+K",platform:"mac",browser:"firefox",description:"Select Search Bar",playground:!1},{label:"<Meta>+L",
shortcut:"Meta+L",platform:"mac",browser:"firefox",description:"Select Location Bar",playground:!1},{label:"<Meta>+N",shortcut:"Meta+N",platform:"mac",browser:"firefox",description:"Open new window.",playground:!1},{label:"<Meta>+O",shortcut:"Meta+O",platform:"mac",browser:"firefox",description:"Open File",playground:!1},{label:"<Meta>+P",shortcut:"Meta+P",platform:"mac",browser:"firefox",description:"Prints your current page.",playground:!1},{label:"<Meta>+R",shortcut:"Meta+R",platform:"mac",browser:"firefox",description:"Reloads your current page.",playground:!1},{label:"<Meta>+S",shortcut:"Meta+S",platform:"mac",browser:"firefox",
description:"Save Page As",playground:!1},{label:"<Meta>+T",shortcut:"Meta+T",platform:"mac",browser:"firefox",description:"Open new tab.",playground:!1},{label:"<Meta>+U",shortcut:"Meta+U",platform:"mac",browser:"firefox",description:"Page Source",playground:!1},{label:"<Meta>+W",shortcut:"Meta+W",platform:"mac",browser:"firefox",description:"Close Tab (close Window if only one tab)",playground:!1},{label:"<Meta>+<Shift>+G",shortcut:"Meta+Shift+G",platform:"mac",browser:"firefox",description:"Find Previous",playground:!1},{label:"<Meta>+<Shift>+R",shortcut:"Meta+Shift+R",platform:"mac",browser:"firefox",description:"Force Reload Page (override cache)",
playground:!1},{label:"<Alt>+F4",shortcut:"Alt+F4",platform:"mac",browser:"firefox",description:"Close Window",playground:!1},{label:"<Alt>+return",shortcut:"Alt+return",platform:"mac",browser:"firefox",description:"Save Link Target As",playground:!0},{label:"<Alt>+home",shortcut:"Alt+home",platform:"mac",browser:"firefox",description:"Open Home Page",playground:!1},{label:"<Meta>+Left",shortcut:"Meta+Left",platform:"mac",browser:"firefox",description:"Back one Page",playground:!1},{label:"<Meta>+Right",shortcut:"Meta+Right",platform:"mac",browser:"firefox",description:"Forward one Page",playground:!1},{label:"<Meta>+[",shortcut:"Meta+[",platform:"mac",
browser:"firefox",description:"Back one Page",playground:!1},{label:"<Meta>+]",shortcut:"Meta+]",platform:"mac",browser:"firefox",description:"Forward one Page",playground:!1},{label:"<Meta>+return",shortcut:"Meta+return",platform:"mac",browser:"firefox",description:"Open Link (in new Background Tab)",playground:!0},{label:"<Meta>+F4",shortcut:"Meta+F4",platform:"mac",browser:"firefox",description:"Closes the current tab or pop-up.",playground:!1},{label:"<Meta>+F5",shortcut:"Meta+F5",platform:"mac",browser:"firefox",description:"Force Reload Page (override cache)",playground:!1},{label:"<Meta>+<Shift>+T",shortcut:"Meta+Shift+T",platform:"mac",
browser:"firefox",description:"Undo Close Tab",playground:!1},{label:"<Ctrl>+tab",shortcut:"Ctrl+tab",platform:"mac",browser:"firefox",description:"Next Tab",playground:!1},{label:"<Ctrl>+pagedown",shortcut:"Ctrl+pagedown",platform:"mac",browser:"firefox",description:"Switches to the next tab.",playground:!1},{label:"<Ctrl>+pageup",shortcut:"Ctrl+pageup",platform:"mac",browser:"firefox",description:"Switches to the previous tab.",playground:!1},{label:"<Meta>+<Shift>+W",shortcut:"Meta+Shift+W",platform:"mac",browser:"firefox",description:"Close Window",playground:!1},{label:"<Shift>+F3",shortcut:"Shift+F3",platform:"mac",browser:"firefox",
description:"Find Previous",playground:!1},{label:"<Shift>+return",shortcut:"Shift+return",platform:"mac",browser:"firefox",description:"Open Link in New Window",playground:!0},{label:"Right Click",shortcut:"Right Click",platform:"mac",browser:"firefox",description:"Context Menu",playground:!1},{label:"<Meta>+<Shift>+LeftMouseClick",shortcut:"Meta+Shift+LeftMouseClick",platform:"mac",browser:"firefox",description:"Open Link (in new Foreground Tab)",playground:!0},{label:"<Meta>+LeftMouseClick",shortcut:"Meta+LeftMouseClick",platform:"mac",browser:"firefox",description:"Open Link (in new Background Tab)",playground:!0},{label:"<Shift>+LeftMouseClick",
shortcut:"Shift+LeftMouseClick",platform:"mac",browser:"firefox",description:"Open Link in New Window",playground:!0},{label:"/",shortcut:"/",platform:"mac",browser:"firefox",description:"Quick Find Text (not critical)",playground:!1},{label:"",shortcut:"",platform:"mac",browser:"firefox",description:"Quick Find Link (not critical)",playground:!0},{label:"<Ctrl>+c",shortcut:"Ctrl+c",platform:"win",browser:"all",description:"Copy to clipboard.",playground:!0},{label:"<Ctrl>+v",shortcut:"Ctrl+v",platform:"win",browser:"all",description:"Paste from clipboard.",playground:!0},{label:"<Ctrl>+x",shortcut:"Ctrl+x",platform:"win",browser:"all",
description:"Cut to the clipboard",playground:!0},{label:"<Ctrl>+esc",shortcut:"Ctrl+esc",platform:"win",browser:"all",description:"Opens windows menu / dock.",playground:!1},{label:"<Ctrl>+F4",shortcut:"Ctrl+F4",platform:"win",browser:"all",description:"Close the active window.",playground:!1},{label:"<Shift>+F6",shortcut:"Shift+F6",platform:"win",browser:"all",description:"Switches focus to the next keyboard-accessible pane. (Doesn't seem to work in fullscreen mode.)",playground:!1},{label:"<Alt>+esc",shortcut:"Alt+esc",platform:"win",browser:"all",description:"Switch Applications",playground:!1},{label:"<Alt>+tab",shortcut:"Alt+tab",platform:"win",
browser:"all",description:"Switch Applications",playground:!1},{label:"<Alt>+space",shortcut:"Alt+space",platform:"win",browser:"all",description:"Open the shortcut menu for the active window",playground:!0},{label:"<Alt>+F4",shortcut:"Alt+F4",platform:"win",browser:"all",description:"Close application",playground:!1},{label:"PrtScn",shortcut:"PrtScn",platform:"win",browser:"all",description:"Take screenshot (entire screen)",playground:!1},{label:"<Alt>+PrtScn",shortcut:"Alt+PrtScn",platform:"win",browser:"all",description:"Take screenshot (partial / active window)",playground:!1},{label:"<Meta>+D",shortcut:"Meta+D",platform:"win",browser:"all",
description:"Minimize (All)",playground:!1},{label:"esc",shortcut:"esc",platform:"win",browser:"chrome",description:"Stops the loading of the current page.",playground:!1},{label:"backspace",shortcut:"backspace",platform:"win",browser:"chrome",description:"Goes to the previous page in your browsing history for the tab.",playground:!1},{label:"Backspace+Left Arrow",shortcut:"Backspace+Left Arrow",platform:"win",browser:"chrome",description:"Goes to the previous page in your browsing history for the tab",playground:!1},{label:"Backspace+Right Arrow",shortcut:"Backspace+Right Arrow",platform:"win",browser:"chrome",
description:"Goes to the next page in your browsing history for the tab.",playground:!1},{label:"F1",shortcut:"F1",platform:"win",browser:"chrome",description:"Browser Help",playground:!1},{label:"F3",shortcut:"F3",platform:"win",browser:"chrome",description:"Finds the next match for your input in the find bar.",playground:!1},{label:"F5",shortcut:"F5",platform:"win",browser:"chrome",description:"Reloads your current page.",playground:!1},{label:"F6",shortcut:"F6",platform:"win",browser:"chrome",description:"Switches focus to the next keyboard-accessible pane.",playground:!1},{label:"F10",shortcut:"F10",platform:"win",browser:"chrome",
description:"Opens the Chrome menu Chrome menu",playground:!1},{label:"F11",shortcut:"F11",platform:"win",browser:"chrome",description:"Opens or Exits current page in full-screen mode. (TAO will enforce full screen.)",playground:!1},{label:"F12",shortcut:"F12",platform:"win",browser:"chrome",description:"Opens Developer Tools.",playground:!1},{label:"<Ctrl>+1",shortcut:"Ctrl+1",platform:"win",browser:"chrome",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Ctrl>+2",shortcut:"Ctrl+2",platform:"win",browser:"chrome",description:"Switches to the tab at the specified position number on the tab strip.",
playground:!1},{label:"<Ctrl>+3",shortcut:"Ctrl+3",platform:"win",browser:"chrome",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Ctrl>+4",shortcut:"Ctrl+4",platform:"win",browser:"chrome",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Ctrl>+5",shortcut:"Ctrl+5",platform:"win",browser:"chrome",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Ctrl>+6",shortcut:"Ctrl+6",platform:"win",browser:"chrome",
description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Ctrl>+7",shortcut:"Ctrl+7",platform:"win",browser:"chrome",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Ctrl>+8",shortcut:"Ctrl+8",platform:"win",browser:"chrome",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Ctrl>+9",shortcut:"Ctrl+9",platform:"win",browser:"chrome",description:"Switches to the last tab.",playground:!1},{label:"<Ctrl>+d",shortcut:"Ctrl+d",platform:"win",browser:"chrome",
description:"Saves your current webpage as a bookmark.",playground:!1},{label:"<Ctrl>+e",shortcut:"Ctrl+e",platform:"win",browser:"chrome",description:"Places a '?' in the address bar. (Appears not to work in Full Screen Mode)",playground:!1},{label:"<Ctrl>+f",shortcut:"Ctrl+f",platform:"win",browser:"chrome",description:"Opens the find bar.",playground:!1},{label:"<Ctrl>+g",shortcut:"Ctrl+g",platform:"win",browser:"chrome",description:"Finds the next match for your input in the find bar.",playground:!1},{label:"<Ctrl>+h",shortcut:"Ctrl+h",platform:"win",browser:"chrome",description:"Opens the History page.",playground:!1},{label:"<Ctrl>+j",
shortcut:"Ctrl+j",platform:"win",browser:"chrome",description:"Opens the Downloads page.",playground:!1},{label:"<Ctrl>+k",shortcut:"Ctrl+k",platform:"win",browser:"chrome",description:"Places a '?' in the address bar. (Appears not to work in Full Screen Mode)",playground:!1},{label:"<Ctrl>+l",shortcut:"Ctrl+l",platform:"win",browser:"chrome",description:"Highlights the URL. (Appears not to work in Full Screen Mode)",playground:!0},{label:"<Ctrl>+n",shortcut:"Ctrl+n",platform:"win",browser:"chrome",description:"Opens a new window.",playground:!1},{label:"<Ctrl>+o",shortcut:"Ctrl+o",platform:"win",browser:"chrome",
description:"Opens a file from your computer in Google Chrome.",playground:!1},{label:"<Ctrl>+p",shortcut:"Ctrl+p",platform:"win",browser:"chrome",description:"Prints your current page.",playground:!1},{label:"<Ctrl>+q",shortcut:"Ctrl+q",platform:"win",browser:"chrome",description:"Quits Google Chrome.",playground:!1},{label:"<Ctrl>+r",shortcut:"Ctrl+r",platform:"win",browser:"chrome",description:"Reloads your current page.",playground:!1},{label:"<Ctrl>+s",shortcut:"Ctrl+s",platform:"win",browser:"chrome",description:"Saves your current page.",playground:!1},{label:"<Ctrl>+t",shortcut:"Ctrl+t",platform:"win",browser:"chrome",description:"Opens a new tab.",
playground:!1},{label:"<Ctrl>+u",shortcut:"Ctrl+u",platform:"win",browser:"chrome",description:"Opens the source of your current page.",playground:!1},{label:"<Ctrl>+w",shortcut:"Ctrl+w",platform:"win",browser:"chrome",description:"Closes the current tab or pop-up.",playground:!1},{label:"<Ctrl>+<Shift>+B",shortcut:"Ctrl+Shift+B",platform:"win",browser:"chrome",description:"Toggles the bookmarks bar on and off.  (Appears not to work in Full Screen Mode)",playground:!1},{label:"<Ctrl>+<Shift>+C",shortcut:"Ctrl+Shift+C",platform:"win",browser:"chrome",description:"Open / switch from inspect element mode and browser window",playground:!1},{
label:"<Ctrl>+<Shift>+D",shortcut:"Ctrl+Shift+D",platform:"win",browser:"chrome",description:"Saves all open pages as bookmarks in a new folder.",playground:!1},{label:"<Ctrl>+<Shift>+G",shortcut:"Ctrl+Shift+G",platform:"win",browser:"chrome",description:"Finds the previous match for your input in the find bar.",playground:!1},{label:"<Ctrl>+<Shift>+I",shortcut:"Ctrl+Shift+I",platform:"win",browser:"chrome",description:"Opens Developer Tools.",playground:!1},{label:"<Ctrl>+<Shift>+J",shortcut:"Ctrl+Shift+J",platform:"win",browser:"chrome",description:"Open Developer Tools and bring focus to the console",playground:!1},{label:"<Ctrl>+<Shift>+M",
shortcut:"Ctrl+Shift+M",platform:"win",browser:"chrome",description:"Switch between multiple users.",playground:!1},{label:"<Ctrl>+<Shift>+N",shortcut:"Ctrl+Shift+N",platform:"win",browser:"chrome",description:"Opens a new window in incognito mode.",playground:!1},{label:"<Ctrl>+<Shift>+O",shortcut:"Ctrl+Shift+O",platform:"win",browser:"chrome",description:"Opens the bookmark manager.",playground:!1},{label:"<Ctrl>+<Shift>+Q",shortcut:"Ctrl+Shift+Q",platform:"win",browser:"chrome",description:"Quits Google Chrome.",playground:!1},{label:"<Ctrl>+<Shift>+T",shortcut:"Ctrl+Shift+T",platform:"win",browser:"chrome",
description:"Reopens the last tab you've closed.",playground:!1},{label:"<Ctrl>+<Shift>+W",shortcut:"Ctrl+Shift+W",platform:"win",browser:"chrome",description:"Close Window",playground:!1},{label:"<Alt>+d",shortcut:"Alt+d",platform:"win",browser:"chrome",description:"Highlights the URL. (Appears not to work in Full Screen Mode)",playground:!0},{label:"<Alt>+e",shortcut:"Alt+e",platform:"win",browser:"chrome",description:"Opens the Chrome menu",playground:!1},{label:"<Alt>+f",shortcut:"Alt+f",platform:"win",browser:"chrome",description:"Opens the Chrome menu",playground:!1},{label:"<Alt>+F4",shortcut:"Alt+F4",platform:"win",browser:"chrome",
description:"Close Window",playground:!1},{label:"<Ctrl>+<Shift>+Delete",shortcut:"Ctrl+Shift+Delete",platform:"win",browser:"chrome",description:"Opens the Clear Browsing Data dialog.",playground:!1},{label:"<Ctrl>+tab",shortcut:"Ctrl+tab",platform:"win",browser:"chrome",description:"Switches to the next tab.",playground:!1},{label:"<Ctrl>+shift+tab",shortcut:"Ctrl+shift+tab",platform:"win",browser:"chrome",description:"Switches to the previous tab.",playground:!1},{label:"<Ctrl>+pagedown",shortcut:"Ctrl+pagedown",platform:"win",browser:"chrome",description:"Switches to the next tab.",playground:!1},{label:"<Ctrl>+pageup",shortcut:"Ctrl+pageup",
platform:"win",browser:"chrome",description:"Switches to the previous tab.",playground:!1},{label:"<Ctrl>+F4",shortcut:"Ctrl+F4",platform:"win",browser:"chrome",description:"Closes the current tab or pop-up.",playground:!1},{label:"<Ctrl>+F5",shortcut:"Ctrl+F5",platform:"win",browser:"chrome",description:"Reloads your current page, ignoring cached content.",playground:!1},{label:"<Shift>+esc",shortcut:"Shift+esc",platform:"win",browser:"chrome",description:"Opens the Chrome Task Manager.",playground:!1},{label:"<Shift>+backspace",shortcut:"Shift+backspace",platform:"win",browser:"chrome",
description:"Goes to the next page in your browsing history for the tab.",playground:!1},{label:"<Shift>+F3",shortcut:"Shift+F3",platform:"win",browser:"chrome",description:"Finds the previous match for your input in the find bar.",playground:!1},{label:"<Shift>+F5",shortcut:"Shift+F5",platform:"win",browser:"chrome",description:"Reloads your current page, ignoring cached content.",playground:!1},{label:"<Alt>+left",shortcut:"Alt+left",platform:"win",browser:"chrome",description:"Goes to the previous page in your browsing history for the tab.",playground:!1},{label:"<Alt>+right",shortcut:"Alt+right",platform:"win",browser:"chrome",
description:"Goes to the next page in your browsing history for the tab.",playground:!1},{label:"<Alt>+home",shortcut:"Alt+home",platform:"win",browser:"chrome",description:"Open Home Page",playground:!1},{label:"<Ctrl>+LeftMouseClick",shortcut:"Ctrl+LeftMouseClick",platform:"win",browser:"chrome",description:"Opens the link in a new tab in the background.",playground:!0},{label:"<Ctrl>+<Shift>+LeftMouseClick",shortcut:"Ctrl+Shift+LeftMouseClick",platform:"win",browser:"chrome",description:"Opens the link in a new tab in the background.",playground:!0},{label:"<Shift>+LeftMouseClick",shortcut:"Shift+LeftMouseClick",platform:"win",browser:"chrome",
description:"Opens the link in a new window.",playground:!0},{label:"Right Click",shortcut:"Right Click",platform:"win",browser:"chrome",description:"Context Menu",playground:!1},{label:"<Alt>+LeftMouseClick",shortcut:"Alt+LeftMouseClick",platform:"win",browser:"chrome",description:"Downloads the target of the link.",playground:!0},{label:"esc",shortcut:"esc",platform:"win",browser:"firefox",description:"Stop Loading",playground:!1},{label:"backspace",shortcut:"backspace",platform:"win",browser:"firefox",description:"Back one page",playground:!1},{label:"F1",shortcut:"F1",platform:"win",browser:"firefox",description:"Help",playground:!1},{label:"F3",
shortcut:"F3",platform:"win",browser:"firefox",description:"Find Again",playground:!1},{label:"F5",shortcut:"F5",platform:"win",browser:"firefox",description:"Reloads your current page.",playground:!1},{label:"F11",shortcut:"F11",platform:"win",browser:"firefox",description:"Opens or Exits current page in full-screen mode. (TAO will enforce full screen.)",playground:!1},{label:"<Ctrl>+1",shortcut:"Ctrl+1",platform:"win",browser:"firefox",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Ctrl>+2",shortcut:"Ctrl+2",platform:"win",browser:"firefox",
description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Ctrl>+3",shortcut:"Ctrl+3",platform:"win",browser:"firefox",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Ctrl>+4",shortcut:"Ctrl+4",platform:"win",browser:"firefox",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Ctrl>+5",shortcut:"Ctrl+5",platform:"win",browser:"firefox",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Ctrl>+6",shortcut:"Ctrl+6",platform:"win",
browser:"firefox",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Ctrl>+7",shortcut:"Ctrl+7",platform:"win",browser:"firefox",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Ctrl>+8",shortcut:"Ctrl+8",platform:"win",browser:"firefox",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Ctrl>+9",shortcut:"Ctrl+9",platform:"win",browser:"firefox",description:"Switches to the last tab.",playground:!1},{label:"<Ctrl>+b",shortcut:"Ctrl+b",platform:"win",browser:"firefox",
description:"Bookmarks Sidebar (toggle)",playground:!1},{label:"<Ctrl>+d",shortcut:"Ctrl+d",platform:"win",browser:"firefox",description:"Add bookmark",playground:!1},{label:"<Ctrl>+f",shortcut:"Ctrl+f",platform:"win",browser:"firefox",description:"Find in This Page",playground:!1},{label:"<Ctrl>+g",shortcut:"Ctrl+g",platform:"win",browser:"firefox",description:"Find Again",playground:!1},{label:"<Ctrl>+h",shortcut:"Ctrl+h",platform:"win",browser:"firefox",description:"Browsing History (toggle)",playground:!1},{label:"<Ctrl>+i",shortcut:"Ctrl+i",platform:"win",browser:"firefox",description:"Bookmarks Sidebar (toggle)",playground:!1},{label:"<Ctrl>+j",
shortcut:"Ctrl+j",platform:"win",browser:"firefox",description:"Download History",playground:!1},{label:"<Ctrl>+k",shortcut:"Ctrl+k",platform:"win",browser:"firefox",description:"Select Search Bar",playground:!1},{label:"<Ctrl>+l",shortcut:"Ctrl+l",platform:"win",browser:"firefox",description:"Select Location Bar",playground:!1},{label:"<Ctrl>+n",shortcut:"Ctrl+n",platform:"win",browser:"firefox",description:"Open new window.",playground:!1},{label:"<Ctrl>+o",shortcut:"Ctrl+o",platform:"win",browser:"firefox",description:"Open File",playground:!1},{label:"<Ctrl>+p",shortcut:"Ctrl+p",platform:"win",browser:"firefox",description:"Prints your current page.",
playground:!1},{label:"<Ctrl>+r",shortcut:"Ctrl+r",platform:"win",browser:"firefox",description:"Reloads your current page.",playground:!1},{label:"<Ctrl>+s",shortcut:"Ctrl+s",platform:"win",browser:"firefox",description:"Save Page As",playground:!1},{label:"<Ctrl>+t",shortcut:"Ctrl+t",platform:"win",browser:"firefox",description:"Open new tab.",playground:!1},{label:"<Ctrl>+u",shortcut:"Ctrl+u",platform:"win",browser:"firefox",description:"Page Source",playground:!1},{label:"<Ctrl>+w",shortcut:"Ctrl+w",platform:"win",browser:"firefox",description:"Close Tab (close Window if only one tab)",playground:!1},{label:"<Alt>+d",shortcut:"Alt+d",platform:"win",
browser:"firefox",description:"Select Location Bar",playground:!1},{label:"<Ctrl>+<Shift>+G",shortcut:"Ctrl+Shift+G",platform:"win",browser:"firefox",description:"Find Previous",playground:!1},{label:"<Ctrl>+<Shift>+R",shortcut:"Ctrl+Shift+R",platform:"win",browser:"firefox",description:"Force Reload Page (override cache)",playground:!1},{label:"<Alt>+F4",shortcut:"Alt+F4",platform:"win",browser:"firefox",description:"Close Window",playground:!1},{label:"<Alt>+return",shortcut:"Alt+return",platform:"win",browser:"firefox",description:"Save Link Target As",playground:!0},{label:"<Alt>+home",shortcut:"Alt+home",platform:"win",browser:"firefox",
description:"Open Home Page",playground:!1},{label:"<Alt>+left",shortcut:"Alt+left",platform:"win",browser:"firefox",description:"Back one Page",playground:!1},{label:"<Alt>+right",shortcut:"Alt+right",platform:"win",browser:"firefox",description:"Forward one Page",playground:!1},{label:"<Ctrl>+[",shortcut:"Ctrl+[",platform:"win",browser:"firefox",description:"Back one Page",playground:!1},{label:"<Ctrl>+]",shortcut:"Ctrl+]",platform:"win",browser:"firefox",description:"Forward one Page",playground:!1},{label:"<Ctrl>+return",shortcut:"Ctrl+return",platform:"win",browser:"firefox",description:"Open Link (in new Background Tab)",playground:!0},{
label:"<Ctrl>+F4",shortcut:"Ctrl+F4",platform:"win",browser:"firefox",description:"Closes the current tab or pop-up.",playground:!1},{label:"<Ctrl>+F5",shortcut:"Ctrl+F5",platform:"win",browser:"firefox",description:"Force Reload Page (override cache)",playground:!1},{label:"<Ctrl>+<Shift>+T",shortcut:"Ctrl+Shift+T",platform:"win",browser:"firefox",description:"Undo Close Tab",playground:!1},{label:"<Ctrl>+<Shift>+Del",shortcut:"Ctrl+Shift+Del",platform:"win",browser:"firefox",description:"Clear Private Data",playground:!1},{label:"<Ctrl>+tab",shortcut:"Ctrl+tab",platform:"win",browser:"firefox",description:"Next Tab",playground:!1},{label:"<Ctrl>+pagedown",
shortcut:"Ctrl+pagedown",platform:"win",browser:"firefox",description:"Switches to the next tab.",playground:!1},{label:"<Ctrl>+pageup",shortcut:"Ctrl+pageup",platform:"win",browser:"firefox",description:"Switches to the previous tab.",playground:!1},{label:"<Ctrl>+<Shift>+W",shortcut:"Ctrl+Shift+W",platform:"win",browser:"firefox",description:"Close Window",playground:!1},{label:"<Shift>+backspace",shortcut:"Shift+backspace",platform:"win",browser:"firefox",description:"Forward one Page",playground:!1},{label:"<Shift>+F3",shortcut:"Shift+F3",platform:"win",browser:"firefox",description:"Find Previous",playground:!1},{label:"<Shift>+return",
shortcut:"Shift+return",platform:"win",browser:"firefox",description:"Open Link in New Window",playground:!0},{label:"Right Click",shortcut:"Right Click",platform:"win",browser:"firefox",description:"Context Menu",playground:!1},{label:"<Alt>+LeftMouseClick",shortcut:"Alt+LeftMouseClick",platform:"win",browser:"firefox",description:"Save Page As",playground:!1},{label:"<Shift>+MouseScrollDown",shortcut:"Shift+MouseScrollDown",platform:"win",browser:"firefox",description:"Back one Page",playground:!1},{label:"<Shift>+MouseScrollUp",shortcut:"Shift+MouseScrollUp",platform:"win",browser:"firefox",description:"Forward one Page",playground:!1},{
label:"<Ctrl>+<Shift>+LeftMouseClick",shortcut:"Ctrl+Shift+LeftMouseClick",platform:"win",browser:"firefox",description:"Open Link (in new Foreground Tab)",playground:!0},{label:"<Ctrl>+LeftMouseClick",shortcut:"Ctrl+LeftMouseClick",platform:"win",browser:"firefox",description:"Open Link (in new Background Tab)",playground:!0},{label:"MiddleMouseClick",shortcut:"MiddleMouseClick",platform:"win",browser:"firefox",description:"Open Link (in new Background Tab)",playground:!0},{label:"<Shift>+MiddleMouseClick",shortcut:"Shift+MiddleMouseClick",platform:"win",browser:"firefox",description:"Open Link (in new Foreground Tab)",playground:!0},{
label:"<Shift>+LeftMouseClick",shortcut:"Shift+LeftMouseClick",platform:"win",browser:"firefox",description:"Open Link in New Window",playground:!0},{label:"/",shortcut:"/",platform:"win",browser:"firefox",description:"Quick Find Text (not critical)",playground:!1},{label:"",shortcut:"",platform:"win",browser:"firefox",description:"Quick Find Link (not critical)",playground:!0},{label:"esc",shortcut:"esc",platform:"win",browser:"ie",description:"Stop downloading a page",playground:!1},{label:"backspace",shortcut:"backspace",platform:"win",browser:"ie",description:"Go to the previous page",playground:!1},{label:"F1",shortcut:"F1",platform:"win",browser:"ie",
description:"Display Internet Explorer Help or to display context Help about an item in a dialog box",playground:!1},{label:"F3",shortcut:"F3",platform:"win",browser:"ie",description:"Find on this page",playground:!1},{label:"F4",shortcut:"F4",platform:"win",browser:"ie",description:"Display a list of addresses that you have typed",playground:!1},{label:"F5",shortcut:"F5",platform:"win",browser:"ie",description:"Refresh the current Web page",playground:!1},{label:"F11",shortcut:"F11",platform:"win",browser:"ie",description:"Toggle between full-screen and other views in the browser (TAO will enforce full screen.)",playground:!1},{label:"<Ctrl>+1",
shortcut:"Ctrl+1",platform:"win",browser:"ie",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Ctrl>+2",shortcut:"Ctrl+2",platform:"win",browser:"ie",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Ctrl>+3",shortcut:"Ctrl+3",platform:"win",browser:"ie",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Ctrl>+4",shortcut:"Ctrl+4",platform:"win",browser:"ie",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Ctrl>+5",
shortcut:"Ctrl+5",platform:"win",browser:"ie",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Ctrl>+6",shortcut:"Ctrl+6",platform:"win",browser:"ie",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Ctrl>+7",shortcut:"Ctrl+7",platform:"win",browser:"ie",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Ctrl>+8",shortcut:"Ctrl+8",platform:"win",browser:"ie",description:"Switches to the tab at the specified position number on the tab strip.",playground:!1},{label:"<Ctrl>+9",
shortcut:"Ctrl+9",platform:"win",browser:"ie",description:"Switches to the last tab.",playground:!1},{label:"<Ctrl>+b",shortcut:"Ctrl+b",platform:"win",browser:"ie",description:"Opens organize favorites",playground:!1},{label:"<Ctrl>+d",shortcut:"Ctrl+d",platform:"win",browser:"ie",description:"Add Favorite",playground:!1},{label:"<Ctrl>+e",shortcut:"Ctrl+e",platform:"win",browser:"ie",description:"Open the Search box (website search may not be possible in FS)",playground:!1},{label:"<Ctrl>+f",shortcut:"Ctrl+f",platform:"win",browser:"ie",description:"Find on this page",playground:!1},{label:"<Ctrl>+g",shortcut:"Ctrl+g",platform:"win",browser:"ie",
description:"Open Feeds box",playground:!1},{label:"<Ctrl>+h",shortcut:"Ctrl+h",platform:"win",browser:"ie",description:"Open the History box",playground:!1},{label:"<Ctrl>+i",shortcut:"Ctrl+i",platform:"win",browser:"ie",description:"Open the Favorites box",playground:!1},{label:"<Ctrl>+j",shortcut:"Ctrl+j",platform:"win",browser:"ie",description:"View downloads",playground:!1},{label:"<Ctrl>+k",shortcut:"Ctrl+k",platform:"win",browser:"ie",description:"Open new tab",playground:!1},{label:"<Ctrl>+n",shortcut:"Ctrl+n",platform:"win",browser:"ie",description:"Open a new window",playground:!1},{label:"<Ctrl>+o",shortcut:"Ctrl+o",platform:"win",browser:"ie",
description:"Open file or web page",playground:!1},{label:"<Ctrl>+p",shortcut:"Ctrl+p",platform:"win",browser:"ie",description:"Print the current page or active frame",playground:!1},{label:"<Ctrl>+r",shortcut:"Ctrl+r",platform:"win",browser:"ie",description:"Refresh the current Web page",playground:!1},{label:"<Ctrl>+s",shortcut:"Ctrl+s",platform:"win",browser:"ie",description:"Save the current page",playground:!1},{label:"<Ctrl>+t",shortcut:"Ctrl+t",platform:"win",browser:"ie",description:"Open new tab",playground:!1},{label:"<Ctrl>+u",shortcut:"Ctrl+u",platform:"win",browser:"ie",description:"View source",playground:!1},{label:"<Ctrl>+w",
shortcut:"Ctrl+w",platform:"win",browser:"ie",description:"Close the current window",playground:!1},{label:"<Alt>+d",shortcut:"Alt+d",platform:"win",browser:"ie",description:"Select the text in the Address box",playground:!1},{label:"<Ctrl>+<Shift>+G",shortcut:"Ctrl+Shift+G",platform:"win",browser:"ie",description:"Add to favorites (Feeds)",playground:!1},{label:"<Ctrl>+<Shift>+H",shortcut:"Ctrl+Shift+H",platform:"win",browser:"ie",description:"Add to favorites (History)",playground:!1},{label:"<Ctrl>+<Shift>+I",shortcut:"Ctrl+Shift+I",platform:"win",browser:"ie",description:"Add to favorities (Favorites)",playground:!1},{label:"<Shift>+F10",
shortcut:"Shift+F10",platform:"win",browser:"ie",description:"Display a shortcut menu for a link",playground:!0},{label:"<Alt>+F4",shortcut:"Alt+F4",platform:"win",browser:"ie",description:"Close the current or all windows",playground:!1},{label:"<Alt>+return",shortcut:"Alt+return",platform:"win",browser:"ie",description:"Toggle between full-screen and other views in the browser (TAO will enforce full screen.)",playground:!1},{label:"<Alt>+home",shortcut:"Alt+home",platform:"win",browser:"ie",description:"Go to your Home page",playground:!1},{label:"<Alt>+left",shortcut:"Alt+left",platform:"win",browser:"ie",description:"Go to the previous page",
playground:!1},{label:"<Alt>+right",shortcut:"Alt+right",platform:"win",browser:"ie",description:"Go to the next page",playground:!1},{label:"<Ctrl>+F4",shortcut:"Ctrl+F4",platform:"win",browser:"ie",description:"Close current tab",playground:!1},{label:"<Ctrl>+F5",shortcut:"Ctrl+F5",platform:"win",browser:"ie",description:"Refresh the current Web page, even if the time stamp for the Web version and your locally stored version are the same",playground:!1},{label:"<Ctrl>+tab",shortcut:"Ctrl+tab",platform:"win",browser:"ie",description:"Move forward between frames (tabs)",playground:!1},{label:"<Ctrl>+shift+tab",shortcut:"Ctrl+shift+tab",platform:"win",
browser:"ie",description:"Move back between frames (tabs)",playground:!1},{label:"<Shift>+F3",shortcut:"Shift+F3",platform:"win",browser:"ie",description:"Open find",playground:!1},{label:"Right Click",shortcut:"Right Click",platform:"win",browser:"ie",description:"Context Menu",playground:!1},{label:"<Alt>+LeftMouseClick",shortcut:"Alt+LeftMouseClick",platform:"win",browser:"ie",description:"Save Page As",playground:!1},{label:"<Shift>+MouseScrollDown",shortcut:"Shift+MouseScrollDown",platform:"win",browser:"ie",description:"Back one Page",playground:!1},{label:"<Shift>+MouseScrollUp",shortcut:"Shift+MouseScrollUp",platform:"win",browser:"ie",
description:"Forward one Page",playground:!1},{label:"<Ctrl>+<Shift>+LeftMouseClick",shortcut:"Ctrl+Shift+LeftMouseClick",platform:"win",browser:"ie",description:"Open Link (in new Foreground Tab)",playground:!0},{label:"<Ctrl>+LeftMouseClick",shortcut:"Ctrl+LeftMouseClick",platform:"win",browser:"ie",description:"Open Link (in new Background Tab)",playground:!0},{label:"MiddleMouseClick",shortcut:"MiddleMouseClick",platform:"win",browser:"ie",description:"Open Link (in new Background Tab)",playground:!0},{label:"<Shift>+MiddleMouseClick",shortcut:"Shift+MiddleMouseClick",platform:"win",browser:"ie",description:"Open Link (in new Foreground Tab)",
playground:!0},{label:"<Shift>+LeftMouseClick",shortcut:"Shift+LeftMouseClick",platform:"win",browser:"ie",description:"Open Link in New Window",playground:!0}]}),define("css!taoDevToolsCss/keychecker",[],function(){}),define("taoDevTools/controller/KeyChecker/index",["jquery","core/store","layout/actions/binder","ui/hider","util/shortcut","json!taoDevTools/controller/KeyChecker/shortcuts.json","css!taoDevToolsCss/keychecker.css"],function($,store,binder,hider,shortcutHelper,listOfKeys){"use strict";var platformType=navigator.platform.indexOf("Mac")<0?"win":"mac",isOpera=!!window.opr&&!!opr.addons||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),
isFirefox="undefined"!=typeof InstallTrigger,isSafari=0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),isIE=!!document.documentMode,isEdge=!isIE&&!!window.StyleMedia,isChrome=!!window.chrome&&!!window.chrome.webstore,browserType=isFirefox?"firefox":isIE||isEdge?"ie":isChrome?"chrome":isSafari?"safari":isOpera?"opera":"unknown",specialKeys={mac:{"<Shift>":"Shift","<Ctrl>":"Ctrl","<Meta>":"Cmd","<Alt>":"Option"},win:{"<Shift>":"Shift","<Ctrl>":"Ctrl","<Meta>":"Win","<Alt>":"Alt"}};return{start:function(){var keycheckStorage,$container=$(".keychecker"),current=-1,currentShortcut=null,shortcutCaught=!1,shortcutsResults=[],resultData={
platform:navigator.platform,browser:navigator.userAgent,browserType:browserType,shortcuts:shortcutsResults},actions={showShortcuts:function(){displaySection("shortcuts")},showResults:function(){displaySection("results")},selectResults:function(){!function(element){var range;document.selection?((range=document.body.createTextRange()).moveToElementText(element),range.select()):window.getSelection&&((range=document.createRange()).selectNode(element),window.getSelection().addRange(range))}($container.find(".results pre").get(0));try{document.execCommand("copy")}catch(err){alert("Oops, unable to copy")}},resetAll:function(){shortcutHelper.clear(),current=-1,
currentShortcut=null,shortcutsResults=[],setResults(),actions.nextShortcut()},previousShortcut:function(){removeShortcut(),function(){currentShortcut=null;for(;!currentShortcut;)if((currentShortcut=listOfKeys[--current])&&(currentShortcut.platform&&"all"!==currentShortcut.platform&&currentShortcut.platform.indexOf(platformType)<0?currentShortcut=null:currentShortcut.browser&&"all"!==currentShortcut.browser&&currentShortcut.browser.indexOf(browserType)<0&&(currentShortcut=null)),current<0){current=0,currentShortcut=null;break}}(),updateKeyChecker()},nextShortcut:function(){removeShortcut(),!function(){currentShortcut=null;for(;!currentShortcut;)if((
currentShortcut=listOfKeys[++current])&&(currentShortcut.platform&&"all"!==currentShortcut.platform&&currentShortcut.platform.indexOf(platformType)<0?currentShortcut=null:currentShortcut.browser&&"all"!==currentShortcut.browser&&currentShortcut.browser.indexOf(browserType)<0&&(currentShortcut=null)),current>=listOfKeys.length){currentShortcut=null;break}return currentShortcut}()?(hider.hide($container.find(".desk")),hider.show($container.find(".end")),actions.showResults()):updateKeyChecker()}};function setResults(){function done(){resultData.shortcuts=_.compact(shortcutsResults),$container.find(".results pre").html(JSON.stringify(resultData,null,2))}
keycheckStorage.setItem("state",{current:current,results:shortcutsResults}).then(done).catch(done)}function updateCurrentResult(){var defaultPrevented=$container.find('input[name="default_prevented"][value="1"]').is(":checked"),comment=$container.find(".comment textarea").val();currentShortcut&&(shortcutsResults[current]={shortcut:formatShortcut(currentShortcut.label),shortcutCaught:shortcutCaught,defaultPrevented:defaultPrevented},$container.find('.prevented label[for="default_prevented_yes"]').css("color",defaultPrevented?"green":null),$container.find('.prevented label[for="default_prevented_no"]').css("color",defaultPrevented?null:"red"),
comment?shortcutsResults[current].comment=comment:delete shortcutsResults[current].comment,setResults())}function updateKeyChecker(){$container.find('.prevented input[value="0"]').click(),$container.find(".caught .value").html("No").css("color","red"),$container.find(".comment textarea").val(""),shortcutCaught=!1,currentShortcut&&(shortcutHelper.add(currentShortcut.shortcut,function(event,keystroke){console.log("caught keystroke",keystroke),shortcutCaught=!0,$container.find(".caught .value").html("Yes").css("color","green"),hider.show($container.find(".prevented")),updateCurrentResult()}),$container.find(".key .value").html(formatShortcut(
currentShortcut.label)),$container.find(".description .value").html(formatShortcut(currentShortcut.description)),$container.find(".playground textarea").val("The quick brown fox jumps over the lazy dog"),$container.find(".playground").toggle(!!currentShortcut.playground)),updateCurrentResult(),hider.hide($container.find(".prevented")),hider.hide($container.find(".end")),hider.show($container.find(".desk"))}function removeShortcut(){currentShortcut&&shortcutHelper.remove(currentShortcut.shortcut)}function formatShortcut(label){return _.forEach(specialKeys[platformType],function(spec,code){label=label.replace(code,spec)}),label}function displaySection(name){
hider.hide($container.find(".section")),hider.show($container.find(".section."+name))}$(document).on("click","button",function(e){var control=$(e.target).data("control");actions[control]&&actions[control]()}),$container.find(".prevented input").on("change",updateCurrentResult),$container.find(".comment textarea").on("change",updateCurrentResult).on("blur",updateCurrentResult),$container.find(".platform .value").html(resultData.platform),$container.find(".browser .value").html(resultData.browser),store("keycheck").then(function(storage){(keycheckStorage=storage).getItem("state").then(function(data){shortcutHelper.clear(),current=data.current||-1,
shortcutsResults=data.results||{},0<=current&&current--,displaySection("shortcuts"),actions.nextShortcut()}).catch(function(){displaySection("shortcuts"),actions.resetAll()}),displaySection("shortcuts")}).catch(function(){displaySection("shortcuts"),actions.resetAll()}),binder.register("showShortcuts",actions.showShortcuts),binder.register("showResults",actions.showResults)}}}),define("taoDevTools/controller/routes",[],function(){return{ExtensionsManager:{actions:{index:"controller/settings/extensionManager"}},ScriptRunner:{actions:{index:"controller/ScriptRunner/index"}},FontConversion:{actions:{index:"controller/fontConversion/fileUpload"}},
StudentTollGenerator:{actions:{index:"controller/fontConversion/fileUpload"}},KeyChecker:{actions:{index:"controller/KeyChecker/index"}}}}),define("taoDevTools/controller/ScriptRunner/index",["jquery","helpers","ui/feedback"],function($,helpers,feedback){return{start:function(){$(".script").click(function(event){var action=$(event.target).data("action");$.ajax({type:"POST",url:helpers._url(action,"ScriptRunner","taoDevTools"),dataType:"json",success:function(data){helpers.loaded(),data.success?feedback().success(data.message):feedback().error(data.message)}})})}}}),define("taoDevTools/controller/settings/extensionManager",["jquery","i18n","util/url",
"layout/section","ui/feedback","ui/modal"],function($,__,urlUtil,section,feedback){var ext_installed=[],toInstall=[],indexCurrentToInstall=-1,percentByExt=0,installError=0;function progressConsole(msg){$("#installProgress .console").append("<p>"+msg+"</p>"),$("#installProgress .console").prop({scrollTop:$("#installProgress .console").prop("scrollHeight")})}function installNextExtension(){var ext=toInstall[indexCurrentToInstall];$("#installProgress p.status").text(__("Installing extension %s...").replace("%s",ext)),progressConsole(__("Installing extension %s...").replace("%s",ext)),$.ajax({type:"POST",url:urlUtil.route("install","ExtensionsManager","tao"),
data:"id="+ext,dataType:"json",success:function(data){data.success?(progressConsole(__("> Extension %s succesfully installed.").replace("%s",ext)),$("#installProgress .bar").animate({width:"+="+percentByExt+"%"},1e3,function(){++indexCurrentToInstall>=toInstall.length?(toInstall=[],$("#installProgress .bar").animate({backgroundColor:"#bb6",width:"100%"},1e3),progressConsole(__("Generating cache...")),$.ajax({type:"GET",url:$($("#main-menu a")[0]).prop("href"),success:function(data){$("#installProgress .bar").animate({backgroundColor:"#6b6"},1e3),$("#installProgress p.status").text(__("Installation done.")),progressConsole(__("> Installation done.")),
window.location.reload()}})):installNextExtension()})):(installError=1,progressConsole("Installation of "+ext+" failed")),feedback().info(data.message)}}),installError&&progressConsole(__("A fatal error occured during the installation process."))}return{start:function(){$("#Extensions_manager table tr").removeClass("extensionOdd").removeClass("extensionEven"),$("#Extensions_manager table tr:nth-child(even)").addClass("extensionEven"),$("#Extensions_manager table tr:nth-child(odd)").addClass("extensionOdd"),$("#installProgress").hide(),$("#addButton").click(function(e){e.preventDefault(),section.create({id:"devtools-newextension",name:__(
"Create new extension"),url:urlUtil.route("create","ExtensionsManager","taoDevTools"),contentBlock:!0}).show()}),$("#extensions-manager-container .ext-id").each(function(){var ext=$(this).text();ext_installed.push(ext),$(".ext-id.ext-"+ext).addClass("installed")}),$("#available-extensions-container tr input").click(function(event){event.stopPropagation()}),$("#available-extensions-container tr input:checkbox").click(function(){var $installButton=$("#installButton");0<$(this).parent().parent().parent().find("input:checkbox:checked").length?$installButton.attr("disabled",!1):$installButton.attr("disabled",!0)}),$("#installButton").click(function(event){
var $modalContainer=$("#installProgress");if(event.preventDefault(),toInstall=[],$("#available-extensions-container input:checked").each(function(){var ext=$(this).prop("name").split("_")[1],deps=function getDependencies(extension){var dependencies=[];return $("#"+extension+" .dependencies li:not(.installed)").each(function(){var ext=$(this).attr("rel"),deps=getDependencies(ext);deps.push(ext),dependencies=dependencies.concat(deps)}),dependencies}(ext);deps.length&&(toInstall=toInstall.concat(deps)),toInstall.push(ext)}),0==(toInstall=function(orig){var i,a=[];for(i=0;i<orig.length;i++)$.inArray(orig[i],a)<0&&a.push(orig[i]);return a}(toInstall)).length
)return window.alert(__("Nothing to install !")),!1;percentByExt=100/toInstall.length,$("p.status",$modalContainer).text(__("%s extension(s) to install.").replace("%s",toInstall.length)),$(".bar",$modalContainer).width(0),$(".console",$modalContainer).empty(),progressConsole(__("Do you wish to install the following extension(s):\n%s?").replace("%s",toInstall.join(", "))),$("[data-control=cancel]",$modalContainer).on("click",function(e){e.preventDefault(),$modalContainer.modal("close")}),$("[data-control=confirm]",$modalContainer).on("click",function(e){e.preventDefault(),progressConsole(__("Preparing installation...")),$(".buttons",$modalContainer).remove(),
indexCurrentToInstall=installError=0,installNextExtension()}),$modalContainer.modal({width:400,height:300,top:150,disableEscape:!0,disableClosing:!0})}),$(".disableButton").click(function(event){var id=$(event.target).data("extid");$.ajax({type:"POST",url:urlUtil.route("disable","ExtensionsManager","taoDevTools"),data:"id="+id,dataType:"json",success:function(data){data.success?(feedback().success(data.message),setTimeout(function(){window.location.reload()},1e3)):feedback().info(data.message)}})}),$(".enableButton").click(function(event){var id=$(event.target).data("extid");$.ajax({type:"POST",url:urlUtil.route("enable","ExtensionsManager","taoDevTools"),
data:"id="+id,dataType:"json",success:function(data){data.success?(feedback().success(data.message),setTimeout(function(){window.location.reload()},1e3)):feedback().info(data.message)}})}),$(".uninstallButton").click(function(event){var id=$(event.target).data("extid");$.ajax({type:"POST",url:urlUtil.route("uninstall","ExtensionsManager","taoDevTools"),data:"id="+id,dataType:"json",success:function(data){data.success?(feedback().success(data.message),setTimeout(function(){window.location.reload()},1e3)):feedback().info(data.message)}})})}}}),function(c){var d=document,a="appendChild",i="styleSheet",s=d.createElement("style");s.type="text/css",
d.getElementsByTagName("head")[0][a](s),s[i]?s[i].cssText=c:s[a](d.createTextNode(c))}(
'@charset "UTF-8";\n/*\nUsage:\n- linear-gradient((color1, color2, color3)) - returns linear-gradient with evenly distributed colors,\n   if 3 colors used then the position of each will be 33,33%\n- linear-gradient((color1 0%, color2 30%, color3 80%)) - returns linear-gradient with manually distributed colors,\n   first param - color, second - position. Also you can use px or other valid units for set position.\n*/\n/* Do not edit */\n/* Style of advanced components */\n/* toggler */\n.toggler:after {\n  margin-left: 3px;\n  position: relative;\n  top: 2px;\n  /* use !important to prevent issues with browser extensions that change fonts */\n  font-family: "tao" !important;\n  speak: none;\n  font-style: normal;\n  font-weight: normal;\n  font-variant: normal;\n  text-transform: none;\n  line-height: 1;\n  /* Better Font Rendering =========== */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  content: "";\n}\n.toggler.opened:after {\n  /* use !important to prevent issues with browser extensions that change fonts */\n  font-family: "tao" !important;\n  speak: none;\n  font-style: normal;\n  font-weight: normal;\n  font-variant: normal;\n  text-transform: none;\n  line-height: 1;\n  /* Better Font Rendering =========== */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  content: "";\n}\n\n.toggled {\n  display: none;\n}\n\n/* Adder */\n.adder:before {\n  margin-right: 5px;\n  font-size: 10.5px;\n  font-size: 1.05rem;\n  /* use !important to prevent issues with browser extensions that change fonts */\n  font-family: "tao" !important;\n  speak: none;\n  font-style: normal;\n  font-weight: normal;\n  font-variant: normal;\n  text-transform: none;\n  line-height: 1;\n  /* Better Font Rendering =========== */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  content: "";\n}\n\n/* Closer / Deleter */\n.closer:before, .deleter:before {\n  margin-right: 5px;\n  font-size: 10.5px;\n  font-size: 1.05rem;\n  /* use !important to prevent issues with browser extensions that change fonts */\n  font-family: "tao" !important;\n  speak: none;\n  font-style: normal;\n  font-weight: normal;\n  font-variant: normal;\n  text-transform: none;\n  line-height: 1;\n  /* Better Font Rendering =========== */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  content: "";\n}\n\n.undobox {\n  display: block;\n  position: fixed;\n  top: 50px;\n  left: 50%;\n  margin-left: -200px;\n  width: 400px;\n  z-index: 100005;\n}\n\n/* Incrementer and duration */\ninput[data-increment], input.duration-ctrl {\n  width: 40px !important;\n  min-width: 40px !important;\n  text-align: right;\n}\n\n.duration-ctrl-wrapper, .incrementer-ctrl-wrapper {\n  position: relative;\n  display: inline-block;\n  border: 1px solid #ddd;\n  border-radius: 2px;\n  border-radius: 2px;\n}\n.duration-ctrl-wrapper .incrementer, .incrementer-ctrl-wrapper .incrementer {\n  text-align: right;\n  border: none;\n  padding-right: 18px;\n}\n.duration-ctrl-wrapper .incrementer ~ .incrementer-ctrl, .incrementer-ctrl-wrapper .incrementer ~ .incrementer-ctrl {\n  border-left: 1px #ddd solid;\n  display: inline-block;\n  height: 100%;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n.duration-ctrl-wrapper .incrementer ~ .incrementer-ctrl > a, .incrementer-ctrl-wrapper .incrementer ~ .incrementer-ctrl > a {\n  outline: 0 !important;\n  cursor: pointer;\n  display: inline-block;\n  line-height: 13px;\n  color: #222;\n  background: #f3f1ef;\n  padding: 0 4px 0 4px;\n  font-size: 10.5px;\n  font-size: 1.05rem;\n  position: absolute;\n  right: 0;\n  height: 50%;\n  text-align: center;\n}\n.duration-ctrl-wrapper .incrementer ~ .incrementer-ctrl > a.inc, .incrementer-ctrl-wrapper .incrementer ~ .incrementer-ctrl > a.inc {\n  top: 0;\n  border-top-right-radius: 2px;\n}\n.duration-ctrl-wrapper .incrementer ~ .incrementer-ctrl > a.dec, .incrementer-ctrl-wrapper .incrementer ~ .incrementer-ctrl > a.dec {\n  top: 50%;\n  border-bottom-right-radius: 2px;\n}\n.duration-ctrl-wrapper .incrementer ~ .incrementer-ctrl > a.inc:before, .incrementer-ctrl-wrapper .incrementer ~ .incrementer-ctrl > a.inc:before {\n  position: relative;\n  bottom: 0px;\n  /* use !important to prevent issues with browser extensions that change fonts */\n  font-family: "tao" !important;\n  speak: none;\n  font-style: normal;\n  font-weight: normal;\n  font-variant: normal;\n  text-transform: none;\n  line-height: 1;\n  /* Better Font Rendering =========== */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  content: "";\n}\n.duration-ctrl-wrapper .incrementer ~ .incrementer-ctrl > a.dec:before, .incrementer-ctrl-wrapper .incrementer ~ .incrementer-ctrl > a.dec:before {\n  position: relative;\n  top: 0px;\n  /* use !important to prevent issues with browser extensions that change fonts */\n  font-family: "tao" !important;\n  speak: none;\n  font-style: normal;\n  font-weight: normal;\n  font-variant: normal;\n  text-transform: none;\n  line-height: 1;\n  /* Better Font Rendering =========== */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  content: "";\n}\n.duration-ctrl-wrapper .incrementer ~ .incrementer-ctrl > a:hover, .incrementer-ctrl-wrapper .incrementer ~ .incrementer-ctrl > a:hover {\n  background-color: #3e7da7;\n  color: white;\n}\n\n.duration-ctrl-wrapper ~ .separator {\n  padding: 0 3px;\n  text-align: center;\n  opacity: 0.7;\n}\n\n/* InPlacer */\n[data-in-place], .inplace {\n  cursor: pointer;\n  min-height: 1em;\n}\n[data-in-place] input, .inplace input {\n  cursor: auto;\n}\n[data-in-place]:hover, .inplace:hover {\n  border: dotted 1px #3e7da7;\n}\n\n/* ListBox  */\nul.listbox {\n  margin: 0.1em 0;\n  padding: 0;\n  list-style-type: none;\n  display: block;\n}\nul.listbox > li {\n  white-space: no-wrap;\n  position: relative;\n  min-width: 75%;\n  border: solid 1px #ddd;\n  border-bottom-width: 0;\n  vertical-align: top;\n  margin: 0;\n  padding: 0.3em 2em 0.3em 0.2em;\n  background-color: #f3f1ef;\n  min-height: 1.5em;\n}\nul.listbox > li > .closer, ul.listbox > li > .deleter {\n  position: absolute;\n  right: 5px;\n  top: 0;\n}\nul.listbox > li:first-child {\n  border-radius: 2px 2px 0 0;\n}\nul.listbox > li:last-child {\n  border-radius: 0 0 2px 2px;\n  border-bottom-width: 1px;\n}\nul.listbox > li.placeholder {\n  background: none;\n  margin: 0.5em;\n  opacity: 0.6;\n}\n\n/* Modal styles */\n.modal {\n  background-color: white;\n  border: 1px solid #ddd;\n  box-shadow: 3px 3px 5px #666666;\n  height: auto;\n  opacity: 0;\n  top: -1000px;\n  padding: 40px;\n  position: fixed;\n  z-index: 105002;\n  margin: auto;\n  left: 0;\n  right: 0;\n  overflow: hidden;\n}\n.modal .modal-close {\n  position: absolute;\n  right: 12px;\n  top: 10px;\n  cursor: pointer;\n  font-weight: bold;\n  color: #222;\n  font-size: 20px;\n  font-size: 2rem;\n}\n.modal .modal-close:hover {\n  opacity: 0.6;\n}\n.modal .modal-body h4 {\n  font-size: 16px;\n  font-size: 1.6rem;\n  margin-top: 0;\n  margin-bottom: 8px;\n}\n.modal .modal-body .content, .modal .modal-body .message {\n  margin-bottom: 8px;\n}\n.modal .modal-body .buttons {\n  top: 16px;\n  position: relative;\n}\n.modal .modal-body .buttons button {\n  border-radius: 2px;\n  margin-left: 8px;\n  height: 36px;\n  text-shadow: none;\n  text-transform: uppercase;\n  color: #0e5d91 !important;\n  background: none;\n}\n.modal .modal-body .buttons button:focus, .modal .modal-body .buttons button:hover {\n  background: #dbe7ef;\n}\n.modal[class^=icon-]:before, .modal[class*=" icon-"]:before {\n  font-size: 44px;\n  font-size: 4.4rem;\n  color: #0e5d91;\n  position: absolute;\n}\n.modal[class^=icon-].icon-result-nok:before, .modal[class*=" icon-"].icon-result-nok:before {\n  color: #ba122b;\n}\n.modal[class^=icon-].icon-warning:before, .modal[class*=" icon-"].icon-warning:before {\n  color: #c96043;\n}\n.modal[class^=icon-].icon-result-ok:before, .modal[class*=" icon-"].icon-result-ok:before {\n  color: #0e914b;\n}\n.modal[class^=icon-].error:before, .modal[class*=" icon-"].error:before {\n  color: #ba122b;\n}\n.modal[class^=icon-].danger:before, .modal[class*=" icon-"].danger:before {\n  color: #c96043;\n}\n.modal[class^=icon-].warning:before, .modal[class*=" icon-"].warning:before {\n  color: #d8ae5b;\n}\n.modal[class^=icon-].info:before, .modal[class*=" icon-"].info:before {\n  color: #0e5d91;\n}\n.modal[class^=icon-].success:before, .modal[class*=" icon-"].success:before {\n  color: #0e914b;\n}\n.modal[class^=icon-] .modal-body, .modal[class*=" icon-"] .modal-body {\n  font-family: "Franklin Gothic", "Franklin Gothic Medium", "Source Sans Pro", sans-serif !important;\n  line-height: 1.4;\n  margin-left: 8.5rem;\n}\n\n.modal-bg {\n  background: none repeat scroll 0 0 black;\n  opacity: 0.45;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=45)";\n  filter: alpha(opacity=45);\n  display: none;\n  position: fixed;\n  height: 100%;\n  width: 100%;\n  left: 0;\n  top: 0;\n  z-index: 100001;\n  overflow: hidden;\n}\n\n/* Button groups */\nul[data-button-group], ul.button-group {\n  list-style-type: none;\n  padding: 0;\n  background-color: white;\n  border: 1px solid #ddd;\n  border-radius: 1px;\n  margin: 0 2px 2px 0;\n  display: inline-block;\n  border-radius: 2px;\n  font-size: 12px;\n  font-size: 1.2rem;\n}\nul[data-button-group] > li, ul.button-group > li {\n  border: 0 none;\n  color: #222;\n  cursor: pointer;\n  display: inline-block;\n  float: left;\n  min-width: 26px;\n  padding: 4px 6px;\n  text-align: center;\n  text-decoration: none !important;\n}\nul[data-button-group] > li.active, ul.button-group > li.active {\n  color: white;\n  background-color: #0e5d91;\n  transition: all 0.4s ease;\n}\nul[data-button-group] > li:hover, ul.button-group > li:hover {\n  color: white;\n  background-color: #3e7da7;\n  transition: all 0.4s ease;\n}\nul[data-button-group] > li.separator, ul.button-group > li.separator {\n  background-color: #ddd;\n  float: left;\n  height: 18px;\n  margin: 5px 2px 0 2px;\n  width: 1px;\n  min-width: 1px;\n  padding: 0;\n}\nul[data-button-group] > li[class^=icon-], ul[data-button-group] > li[class*=" icon-"], ul.button-group > li[class^=icon-], ul.button-group > li[class*=" icon-"] {\n  height: 16px;\n  margin-top: 1px;\n  width: 16px;\n  padding-top: 2px;\n}\n\n/* Media Preview */\n.previewer {\n  background-color: white;\n  margin: 5px;\n  min-width: 280px;\n  min-height: 200px;\n  text-align: center;\n}\n.previewer .nopreview {\n  color: #ddd;\n  text-align: center;\n  font-size: 20px;\n  font-size: 2rem;\n}\n.previewer .nopreview:before {\n  font-size: 60px;\n  font-size: 6rem;\n  /* use !important to prevent issues with browser extensions that change fonts */\n  font-family: "tao" !important;\n  speak: none;\n  font-style: normal;\n  font-weight: normal;\n  font-variant: normal;\n  text-transform: none;\n  line-height: 1;\n  /* Better Font Rendering =========== */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  content: "";\n  display: block !important;\n}\n\n/* Progress bar */\n.progressbar {\n  height: 2em;\n  text-align: left;\n  border: none;\n  height: 0.8em;\n  background-color: white;\n  border: 1px solid #ddd;\n}\n.progressbar > span {\n  height: 100%;\n  border: none;\n  background-color: #3e7da7;\n  display: block;\n  color: white;\n  transition: width 0.4s ease 0s;\n}\n.progressbar.info > span {\n  background-color: #0e5d91;\n}\n.progressbar.success > span {\n  background-color: #0e914b;\n}\n.progressbar.warning > span {\n  background-color: #d8ae5b;\n}\n.progressbar.error > span {\n  background-color: #ba122b;\n}\n/*# sourceMappingURL=components.css.map */.keychecker{flex:1}.keychecker .section{margin:0 10px;padding:10px;background-color:#eee}.keychecker .controls{padding:10px}.keychecker pre{margin:10px;padding:10px;background-color:#fff;border:1px solid #000}.keychecker .info,.keychecker .platform,.keychecker .browser,.keychecker .desk,.keychecker .check,.keychecker .key,.keychecker .description,.keychecker .playground,.keychecker .links,.keychecker .result,.keychecker .caught,.keychecker .prevented{display:block}.keychecker .info{font-size:.8rem}.keychecker .info label{display:inline-block;margin:0;padding:2px;width:5em;font-weight:bold;color:#444}.keychecker .info .value{display:inline-block;margin:0;padding:2px;font-weight:bold;color:#111}.keychecker .desk .controls{text-align:center}.keychecker .desk .controls button{font-size:2rem}.keychecker .check{width:50%;margin:10px auto;padding:10px 0}.keychecker .key label,.keychecker .description label{display:block;margin:4px 0 8px 0;padding:2px}.keychecker .key .value,.keychecker .description .value{text-align:center;display:block;margin:0}.keychecker .key .value{padding:20px;font-weight:bold;font-size:4rem}.keychecker .description .value{padding:10px;font-size:1.5rem}.keychecker .playground{width:50%;height:4rem;margin:10px auto}.keychecker .playground .content{margin:10px;display:flex;flex-direction:row}.keychecker .playground .textarea{width:100%;height:4rem;font-size:1.2rem}.keychecker .playground .links{margin:10px}.keychecker .end{margin:10px auto;padding:20px;text-align:center;display:block;font-weight:bold;font-size:2rem}.keychecker .result{width:80%;margin:10px auto}.keychecker .result>label{display:block;margin:20px 0 10px}.keychecker .result .content{display:flex;flex-direction:row}.keychecker .result .value{font-size:1.2rem;font-weight:bold;padding:2px 4px}.keychecker .result label{padding:2px 4px}.keychecker .caught,.keychecker .prevented{padding:0 20px;margin:10px auto}.keychecker .prevented{text-align:center}.keychecker .prevented>label,.keychecker .prevented .value{display:block;font-size:1.2rem}.keychecker .prevented .value{padding:10px;width:80%;margin:0 auto;text-align:left}.keychecker .flags{flex:2}.keychecker .comment{flex:1}.keychecker .comment label{display:block}.keychecker .comment textarea{width:100%;height:8rem}\n\n/*# sourceMappingURL=keychecker.css.map */'
),define("taoDevToolsloader\taoDevTools.bundle",function(){});
//# sourceMappingURL=taoDevTools.min.js.map